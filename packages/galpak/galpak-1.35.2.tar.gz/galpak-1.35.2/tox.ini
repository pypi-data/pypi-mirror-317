[tox]
envlist =  py37,py38,py39,py310,p311,p312,p313,cov

[testenv]
whitelist_externals = which
setenv = PY_IGNORE_IMPORTMISMATCH=1
deps=
    setuptools
    pytest
commands=
    python --version
    which python
    pip freeze -l
    python -m pytest  {posargs}

[testenv:cov]
deps=
    {[testenv]deps}
    coverage
commands=
    coverage run -m pytest
    coverage report
    coverage html

[testenv:docs]
deps=
    numpydoc
    sphinx
    sphinx_click
    sphinx_rtd_theme
    sphinx-automodapi
    sphinxcontrib-programoutput
commands =
    sphinx-build docs docs/_build/html

[pytest]
disable-warnings=1
verbosity=1
minversion = 3.11.0
testpaths = tests/suite

#[testenv:syncdocs]
#skipsdist = True
#skip_install = True
#deps =
#passenv = SSH_AUTH_SOCK
#whitelist_externals = rsync
#commands =
#    rsync -rltDvhc ./docs/_build/html/ urania1:{posargs:/srv/UDF/musered}
