<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>README</title>
  <style>
    html {
      color: #1a1a1a;
      background-color: #fdfdfd;
    }
    body {
      margin: 0 auto;
      max-width: 36em;
      padding-left: 50px;
      padding-right: 50px;
      padding-top: 50px;
      padding-bottom: 50px;
      hyphens: auto;
      overflow-wrap: break-word;
      text-rendering: optimizeLegibility;
      font-kerning: normal;
    }
    @media (max-width: 600px) {
      body {
        font-size: 0.9em;
        padding: 12px;
      }
      h1 {
        font-size: 1.8em;
      }
    }
    @media print {
      html {
        background-color: white;
      }
      body {
        background-color: transparent;
        color: black;
        font-size: 12pt;
      }
      p, h2, h3 {
        orphans: 3;
        widows: 3;
      }
      h2, h3, h4 {
        page-break-after: avoid;
      }
    }
    p {
      margin: 1em 0;
    }
    a {
      color: #1a1a1a;
    }
    a:visited {
      color: #1a1a1a;
    }
    img {
      max-width: 100%;
    }
    svg {
      height: auto;
      max-width: 100%;
    }
    h1, h2, h3, h4, h5, h6 {
      margin-top: 1.4em;
    }
    h5, h6 {
      font-size: 1em;
      font-style: italic;
    }
    h6 {
      font-weight: normal;
    }
    ol, ul {
      padding-left: 1.7em;
      margin-top: 1em;
    }
    li > ol, li > ul {
      margin-top: 0;
    }
    blockquote {
      margin: 1em 0 1em 1.7em;
      padding-left: 1em;
      border-left: 2px solid #e6e6e6;
      color: #606060;
    }
    code {
      font-family: Menlo, Monaco, Consolas, 'Lucida Console', monospace;
      font-size: 85%;
      margin: 0;
      hyphens: manual;
    }
    pre {
      margin: 1em 0;
      overflow: auto;
    }
    pre code {
      padding: 0;
      overflow: visible;
      overflow-wrap: normal;
    }
    .sourceCode {
     background-color: transparent;
     overflow: visible;
    }
    hr {
      background-color: #1a1a1a;
      border: none;
      height: 1px;
      margin: 1em 0;
    }
    table {
      margin: 1em 0;
      border-collapse: collapse;
      width: 100%;
      overflow-x: auto;
      display: block;
      font-variant-numeric: lining-nums tabular-nums;
    }
    table caption {
      margin-bottom: 0.75em;
    }
    tbody {
      margin-top: 0.5em;
      border-top: 1px solid #1a1a1a;
      border-bottom: 1px solid #1a1a1a;
    }
    th {
      border-top: 1px solid #1a1a1a;
      padding: 0.25em 0.5em 0.25em 0.5em;
    }
    td {
      padding: 0.125em 0.5em 0.25em 0.5em;
    }
    header {
      margin-bottom: 4em;
      text-align: center;
    }
    #TOC li {
      list-style: none;
    }
    #TOC ul {
      padding-left: 1.3em;
    }
    #TOC > ul {
      padding-left: 0;
    }
    #TOC a:not(:hover) {
      text-decoration: none;
    }
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    /* The extra [class] is a hack that increases specificity enough to
       override a similar rule in reveal.js */
    ul.task-list[class]{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      font-size: inherit;
      width: 0.8em;
      margin: 0 0.8em 0.2em -1.6em;
      vertical-align: middle;
    }
    .display.math{display: block; text-align: center; margin: 0.5rem auto;}
    /* CSS for syntax highlighting */
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      {   }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span.al { color: #ff0000; font-weight: bold; } /* Alert */
    code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
    code span.at { color: #7d9029; } /* Attribute */
    code span.bn { color: #40a070; } /* BaseN */
    code span.bu { color: #008000; } /* BuiltIn */
    code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #4070a0; } /* Char */
    code span.cn { color: #880000; } /* Constant */
    code span.co { color: #60a0b0; font-style: italic; } /* Comment */
    code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
    code span.do { color: #ba2121; font-style: italic; } /* Documentation */
    code span.dt { color: #902000; } /* DataType */
    code span.dv { color: #40a070; } /* DecVal */
    code span.er { color: #ff0000; font-weight: bold; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #40a070; } /* Float */
    code span.fu { color: #06287e; } /* Function */
    code span.im { color: #008000; font-weight: bold; } /* Import */
    code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
    code span.kw { color: #007020; font-weight: bold; } /* Keyword */
    code span.op { color: #666666; } /* Operator */
    code span.ot { color: #007020; } /* Other */
    code span.pp { color: #bc7a00; } /* Preprocessor */
    code span.sc { color: #4070a0; } /* SpecialChar */
    code span.ss { color: #bb6688; } /* SpecialString */
    code span.st { color: #4070a0; } /* String */
    code span.va { color: #19177c; } /* Variable */
    code span.vs { color: #4070a0; } /* VerbatimString */
    code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
</head>
<body>
<header id="title-block-header">
<h1 class="title">README</h1>
</header>
<h1 id="pwman---commandline-password-manager">pwman - Commandline
password manager</h1>
<p><a href="https://bues.ch/h/pwman">Homepage</a></p>
<p><a href="https://bues.ch/cgit/pwman.git">Git repository</a></p>
<p><a href="https://github.com/mbuesch/pwman">Github repository</a></p>
<p>pwman is a commandline based password manager. It encrypts the
password database file using strong AES-256 encryption.</p>
<p>pwman has support for the following things:</p>
<ul>
<li>Store arbitrary attributes and text data along with the passwords
and login credentials.</li>
<li>Generate two factor authentication tokens (<a
href="https://en.wikipedia.org/wiki/Time-based_One-time_Password_algorithm">TOTP</a>).</li>
<li>Database search with Regular Expressions or SQL LIKE syntax.</li>
<li>Database compare (diff). In pwman prompt, at pwman command line and
as <span class="title-ref">git diff</span> extension.</li>
<li>Shell-style Tab-completion for all commands.</li>
<li>Custom Python scripts for arbitrary database processing.</li>
<li>Export of the complete database as SQL text dump, CSV dump and human
readable plain text dump.</li>
</ul>
<h1 id="algorithms">Algorithms</h1>
<table>
<colgroup>
<col style="width: 42%" />
<col style="width: 57%" />
</colgroup>
<tbody>
<tr class="odd">
<td>Encryption algorithm:</td>
<td>AES in CBC mode with 256 bit key.</td>
</tr>
<tr class="even">
<td>Key derivation function (KDF):</td>
<td>Argon2id with 24 MiB memory cost or more (see environment variables
below).</td>
</tr>
</tbody>
</table>
<h1 id="install-pwman">Install pwman</h1>
<p>pwman does not have to be installed. The <span
class="title-ref">pwman</span> script can be run directly from the
source tree. It is not recommended to install pwman into the operating
system.</p>
<h2 id="installing-pwman-into-a-virtualenv">Installing pwman into a
virtualenv</h2>
<p>If you want to install pwman into a Python virtualenv, run the
following commands to create a new venv and install pwman from <a
href="https://pypi.org/">PyPi</a>:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="ex">python3</span> <span class="at">-m</span> venv <span class="at">--system-site-packages</span> ./pwman-venv</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="bu">.</span> ./pwman-venv/bin/activate</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="ex">pip3</span> install <span class="at">-U</span> pwman-python</span></code></pre></div>
<h1 id="run-pwman">Run pwman</h1>
<p>Just run the <span class="title-ref">pwman</span> executable to start
pwman.</p>
<p>Type <span class="title-ref">pwman -h</span> for help about the
command line options.</p>
<h1 id="pwman-prompt">pwman prompt</h1>
<p>If started without options, pwman enters the command prompt:</p>
<pre><code>pwman$</code></pre>
<p>Type the command <span class="title-ref">help</span> and press enter
to see help about all possible commands.</p>
<h1 id="command-help">Command help</h1>
<p>To get help about a specific command, enter the command into the
prompt and append a question mark without spaces in between:</p>
<pre><code>pwman$ find?</code></pre>
<h1 id="using-a-custom-script-to-process-the-database-content">Using a
custom script to process the database content</h1>
<p>A custom Python script can be passed to <span
class="title-ref">pwman</span> as command line option. Such a script can
do anything to the content of the database.</p>
<p>Please see the example script <span
class="title-ref">examplescript.py</span> for more information.</p>
<h1 id="api-documentation">API documentation</h1>
<p>The API documentation can be found in the <a href="doc/api/">API
documentation directory</a>.</p>
<h1 id="crypto-backends">Crypto backends</h1>
<p>Pwman uses either <a
href="https://pypi.org/project/pycryptodomex/">Cryptodome</a> or <a
href="https://pypi.org/project/pyaes/">pyaes</a> for AES encryption.
Therefore, either one of these Python modules has to be installed. Pwman
first tries to use Cryptodome and then falls back to pyaes, if
Cryptodome is not installed.</p>
<p>For key derivation either <a
href="https://pypi.org/project/argon2-cffi/">argon2-cffi</a> or <a
href="https://pypi.org/project/argon2pure/">argon2pure</a> can be used.
Preferably <span class="title-ref">argon2-cffi</span> shall be
installed. As an option <span class="title-ref">argon2pure</span> is
supported. <span class="title-ref">argon2pure</span> is a pure Python
implementation of the algorithm and it is <em>extremely</em> slow.
Therefore, it will never be selected automatically. See environment
variables.</p>
<h1 id="environment-variables">Environment variables</h1>
<p>Environment variables that affect pwman operation are:</p>
<table style="width:98%;">
<colgroup>
<col style="width: 19%" />
<col style="width: 38%" />
<col style="width: 26%" />
<col style="width: 14%" />
</colgroup>
<thead>
<tr class="header">
<th>Environment variable</th>
<th>Description</th>
<th>Possible values</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>PWMAN_CRYPTOLIB</td>
<td>Select the crypto backend</td>
<td>"cryptodome", "pyaes"</td>
<td>probe in order</td>
</tr>
<tr class="even">
<td>PWMAN_ARGON2LIB</td>
<td>Select the Argon2 backend</td>
<td>"argon2-cffi", "argon2pure"</td>
<td>"argon2-cffi"</td>
</tr>
<tr class="odd">
<td>PWMAN_ARGON2MEM</td>
<td>Set the amount of memory (in KiB) used for key derivation.
Increasing this value improves security, but it also increases the
amount of memory required during encryption and decryption.</td>
<td>Number of KiB, but not less than 24584.</td>
<td>24584</td>
</tr>
<tr class="even">
<td>PWMAN_ARGON2TIME</td>
<td>Set the time used for key derivation. Increasing this value improves
security, but it also increases the time required for encryption and
decryption.</td>
<td>Number of iterations, but not less than 2 and not less than 2500000
/ PWMAN_ARGON2MEM.</td>
<td>163</td>
</tr>
<tr class="odd">
<td>PWMAN_DATABASE</td>
<td>Path to the default database</td>
<td>any file path</td>
<td>~/.pwman.db</td>
</tr>
<tr class="even">
<td>PWMAN_RAWGETPASS</td>
<td>If true, do not use safe master password input. Read directly from
stdin instead.</td>
<td>boolean (0, 1, true, false, yes, no)</td>
<td>false</td>
</tr>
</tbody>
</table>
<p>You probably don't need to set any environment variable to use pwman.
The default values are most likely what you want.</p>
<h1 id="out-of-memory-errors">Out of memory errors</h1>
<p>Pwman uses a strong and memory hard algorithm (Argon2id) to derive
the master encryption key from the user supplied master passphrase. This
algorithm uses lots of memory (and time) to make brute forcing the key
expensive. This significantly improves security, if the master
passphrase has less entropy than the raw AES-256 key.</p>
<p>Pwman also locks all memory to RAM, so that no secrets and keys are
written to swap disk space. Therefore, pwman might crash if the actual
memory usage during key derivation exceeds the system's memory lock
limit.</p>
<p>To increase the locked memory available to applications, please
increase the OS limits by installing a raised limit as follows:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co"># as root:</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="fu">cp</span> pwman-memlock-limits.conf /etc/security/limits.d/</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a><span class="ex">reboot</span></span></code></pre></div>
<h1 id="swap-partition">Swap partition</h1>
<p>Pwman locks all memory to ensure that no secrets are copied from RAM
to possibly unencrypted swap disk space.</p>
<p>However, pwman can only lock its own memory. It cannot lock memory
owned by the window manager, X11, Wayland, the terminal emulator or
anything else. Therefore, it is <em>strongly</em> recommended to avoid
using unencrypted swap disk space when using pwman. If you have
unencrypted swap space it is possible that (parts of) the database or
the master passphrase end up being written to it.</p>
<p>Therefore, please use encrypted swap space, if you need swap space.
If you do not need swap space, please disable swap entirely.</p>
<p>Do <em>not</em> use unencrypted swap space.</p>
<p>Pwman currently only locks memory on Linux and Android platforms. If
pwman is unable to lock memory, it will print a warning message and give
you a chance to abort.</p>
<h1 id="license-copyright">License / Copyright</h1>
<p>Copyright (c) 2011-2024 Michael Büsch &lt;<a
href="mailto:m@bues.ch">m@bues.ch</a>&gt;</p>
<p>This program is free software; you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by the
Free Software Foundation; either version 2 of the License, or (at your
option) any later version.</p>
<p>This program is distributed in the hope that it will be useful, but
WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General
Public License for more details.</p>
<p>You should have received a copy of the GNU General Public License
along with this program; if not, write to the Free Software Foundation,
Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA.</p>
</body>
</html>
