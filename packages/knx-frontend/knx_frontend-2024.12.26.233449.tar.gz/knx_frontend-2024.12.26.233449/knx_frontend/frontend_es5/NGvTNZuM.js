"use strict";(self.webpackChunkknx_frontend=self.webpackChunkknx_frontend||[]).push([[5067],{85067:function(e,t,n){var i,a,r,s=n(95803),l=n(6238),o=n(94881),u=n(1781),d=n(36683),c=n(89231),h=n(29864),f=n(83647),y=n(8364),v=(n(77052),n(69466),n(53501),n(36724),n(71936),n(14460),n(43859),n(1158),n(68113),n(34517),n(97754),n(64148),n(66274),n(85038),n(98168),n(9484),n(98597)),p=n(196),m=n(45081),k=n(33167),_=n(19263),g=n(91330),b=n(38848),A=(n(66442),n(96396),n(29222),n(39599),n(66412)),x=(n(21950),n(55888),n(56262),n(8339),function(){return Promise.all([n.e(7777),n.e(2882)]).then(n.bind(n,22882))}),M=n(31238),w=n(23135),C="___create-new-entity___";(0,y.A)([(0,p.EM)("ha-entity-picker")],(function(e,t){var n,y,Z=function(t){function n(){var t;(0,c.A)(this,n);for(var i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return t=(0,h.A)(this,n,[].concat(a)),e(t),t}return(0,f.A)(n,t),(0,d.A)(n)}(t);return{F:Z,d:[{kind:"field",decorators:[(0,p.MZ)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,p.MZ)({type:Boolean})],key:"autofocus",value:function(){return!1}},{kind:"field",decorators:[(0,p.MZ)({type:Boolean})],key:"disabled",value:function(){return!1}},{kind:"field",decorators:[(0,p.MZ)({type:Boolean})],key:"required",value:function(){return!1}},{kind:"field",decorators:[(0,p.MZ)({type:Boolean,attribute:"allow-custom-entity"})],key:"allowCustomEntity",value:void 0},{kind:"field",decorators:[(0,p.MZ)()],key:"label",value:void 0},{kind:"field",decorators:[(0,p.MZ)()],key:"value",value:void 0},{kind:"field",decorators:[(0,p.MZ)()],key:"helper",value:void 0},{kind:"field",decorators:[(0,p.MZ)({type:Array})],key:"createDomains",value:void 0},{kind:"field",decorators:[(0,p.MZ)({type:Array,attribute:"include-domains"})],key:"includeDomains",value:void 0},{kind:"field",decorators:[(0,p.MZ)({type:Array,attribute:"exclude-domains"})],key:"excludeDomains",value:void 0},{kind:"field",decorators:[(0,p.MZ)({type:Array,attribute:"include-device-classes"})],key:"includeDeviceClasses",value:void 0},{kind:"field",decorators:[(0,p.MZ)({type:Array,attribute:"include-unit-of-measurement"})],key:"includeUnitOfMeasurement",value:void 0},{kind:"field",decorators:[(0,p.MZ)({type:Array,attribute:"include-entities"})],key:"includeEntities",value:void 0},{kind:"field",decorators:[(0,p.MZ)({type:Array,attribute:"exclude-entities"})],key:"excludeEntities",value:void 0},{kind:"field",decorators:[(0,p.MZ)({attribute:!1})],key:"entityFilter",value:void 0},{kind:"field",decorators:[(0,p.MZ)({type:Boolean})],key:"hideClearIcon",value:function(){return!1}},{kind:"field",decorators:[(0,p.MZ)({attribute:"item-label-path"})],key:"itemLabelPath",value:function(){return"friendly_name"}},{kind:"field",decorators:[(0,p.wk)()],key:"_opened",value:function(){return!1}},{kind:"field",decorators:[(0,p.P)("ha-combo-box",!0)],key:"comboBox",value:void 0},{kind:"method",key:"open",value:(y=(0,u.A)((0,o.A)().mark((function e(){var t;return(0,o.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.updateComplete;case 2:return e.next=4,null===(t=this.comboBox)||void 0===t?void 0:t.open();case 4:case"end":return e.stop()}}),e,this)}))),function(){return y.apply(this,arguments)})},{kind:"method",key:"focus",value:(n=(0,u.A)((0,o.A)().mark((function e(){var t;return(0,o.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.updateComplete;case 2:return e.next=4,null===(t=this.comboBox)||void 0===t?void 0:t.focus();case 4:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{kind:"field",key:"_initedStates",value:function(){return!1}},{kind:"field",key:"_states",value:function(){return[]}},{kind:"field",key:"_rowRenderer",value:function(){var e=this;return function(t){return(0,v.qy)(i||(i=(0,l.A)(['<ha-list-item graphic="avatar" .twoline=',">\n      ","\n      <span>",'</span>\n      <span slot="secondary"\n        >',"</span\n      >\n    </ha-list-item>"])),!!t.entity_id,t.state?(0,v.qy)(a||(a=(0,l.A)(['<state-badge\n            slot="graphic"\n            .stateObj=',"\n            .hass=","\n          ></state-badge>"])),t,e.hass):"",t.friendly_name,t.entity_id.startsWith(C)?e.hass.localize("ui.components.entity.entity-picker.new_entity"):t.entity_id)}}},{kind:"field",key:"_getStates",value:function(){var e=this;return(0,m.A)((function(t,n,i,a,r,l,o,u,d,c){var h=[];if(!n)return[];var f,y=Object.keys(n.states),v=null!=c&&c.length?c.map((function(e){var t=n.localize("ui.components.entity.entity-picker.create_helper",{domain:(0,w.z)(e)?n.localize("ui.panel.config.helpers.types.".concat(e)):(0,M.p$)(n.localize,e)});return{entity_id:C+e,state:"on",last_changed:"",last_updated:"",context:{id:"",user_id:null,parent_id:null},friendly_name:t,attributes:{icon:"mdi:plus"},strings:[e,t]}})):[];if(!y.length)return[{entity_id:"",state:"",last_changed:"",last_updated:"",context:{id:"",user_id:null,parent_id:null},friendly_name:e.hass.localize("ui.components.entity.entity-picker.no_entities"),attributes:{friendly_name:e.hass.localize("ui.components.entity.entity-picker.no_entities"),icon:"mdi:magnify"},strings:[]}].concat((0,s.A)(v));if(u&&(y=y.filter((function(e){return u.includes(e)}))),d&&(y=y.filter((function(e){return!d.includes(e)}))),i&&(y=y.filter((function(e){return i.includes((0,_.m)(e))}))),a&&(y=y.filter((function(e){return!a.includes((0,_.m)(e))}))),h=y.map((function(e){var t=(0,g.u)(n.states[e])||e;return Object.assign(Object.assign({},n.states[e]),{},{friendly_name:t,strings:[e,t]})})).sort((function(t,n){return(0,A.S)(t.friendly_name,n.friendly_name,e.hass.locale.language)})),l&&(h=h.filter((function(t){return t.entity_id===e.value||t.attributes.device_class&&l.includes(t.attributes.device_class)}))),o&&(h=h.filter((function(t){return t.entity_id===e.value||t.attributes.unit_of_measurement&&o.includes(t.attributes.unit_of_measurement)}))),r&&(h=h.filter((function(t){return t.entity_id===e.value||r(t)}))),!h.length)return[{entity_id:"",state:"",last_changed:"",last_updated:"",context:{id:"",user_id:null,parent_id:null},friendly_name:e.hass.localize("ui.components.entity.entity-picker.no_match"),attributes:{friendly_name:e.hass.localize("ui.components.entity.entity-picker.no_match"),icon:"mdi:magnify"},strings:[]}].concat((0,s.A)(v));null!=v&&v.length&&(f=h).push.apply(f,(0,s.A)(v));return h}))}},{kind:"method",key:"shouldUpdate",value:function(e){return!!(e.has("value")||e.has("label")||e.has("disabled"))||!(!e.has("_opened")&&this._opened)}},{kind:"method",key:"willUpdate",value:function(e){var t;(!this._initedStates||e.has("_opened")&&this._opened)&&(this._states=this._getStates(this._opened,this.hass,this.includeDomains,this.excludeDomains,this.entityFilter,this.includeDeviceClasses,this.includeUnitOfMeasurement,this.includeEntities,this.excludeEntities,this.createDomains),this._initedStates&&(this.comboBox.filteredItems=this._states),this._initedStates=!0),e.has("createDomains")&&null!==(t=this.createDomains)&&void 0!==t&&t.length&&this.hass.loadFragmentTranslation("config")}},{kind:"method",key:"render",value:function(){return(0,v.qy)(r||(r=(0,l.A)(['\n      <ha-combo-box\n        item-value-path="entity_id"\n        .itemLabelPath=',"\n        .hass=","\n        .value=","\n        .label=","\n        .helper=","\n        .allowCustomValue=","\n        .filteredItems=","\n        .renderer=","\n        .required=","\n        .disabled=","\n        @opened-changed=","\n        @value-changed=","\n        @filter-changed=","\n      >\n      </ha-combo-box>\n    "])),this.itemLabelPath,this.hass,this._value,void 0===this.label?this.hass.localize("ui.components.entity.entity-picker.entity"):this.label,this.helper,this.allowCustomEntity,this._states,this._rowRenderer,this.required,this.disabled,this._openedChanged,this._valueChanged,this._filterChanged)}},{kind:"get",key:"_value",value:function(){return this.value||""}},{kind:"method",key:"_openedChanged",value:function(e){this._opened=e.detail.value}},{kind:"method",key:"_valueChanged",value:function(e){var t,n=this;e.stopPropagation();var i,a,r=null===(t=e.detail.value)||void 0===t?void 0:t.trim();if(r&&r.startsWith(C)){var s=r.substring(23);return i=this,a={domain:s,dialogClosedCallback:function(e){e.entityId&&n._setValue(e.entityId)}},void(0,k.r)(i,"show-dialog",{dialogTag:"dialog-helper-detail",dialogImport:x,dialogParams:a})}r!==this._value&&this._setValue(r)}},{kind:"method",key:"_filterChanged",value:function(e){var t=e.target,n=e.detail.value.trim().toLowerCase();t.filteredItems=n.length?(0,b.H)(n,this._states):this._states}},{kind:"method",key:"_setValue",value:function(e){var t=this;this.value=e,setTimeout((function(){(0,k.r)(t,"value-changed",{value:e}),(0,k.r)(t,"change")}),0)}}]}}),v.WF)},31238:function(e,t,n){n.d(t,{QC:function(){return r},fK:function(){return a},p$:function(){return i}});n(848);var i=function(e,t,n){return e("component.".concat(t,".title"))||(null==n?void 0:n.name)||t},a=function(e,t){var n={type:"manifest/list"};return t&&(n.integrations=t),e.callWS(n)},r=function(e,t){return e.callWS({type:"manifest/get",integration:t})}}}]);