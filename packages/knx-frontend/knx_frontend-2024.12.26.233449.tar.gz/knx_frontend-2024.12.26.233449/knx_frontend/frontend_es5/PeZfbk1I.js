"use strict";(self.webpackChunkknx_frontend=self.webpackChunkknx_frontend||[]).push([[8662],{86640:function(e,a,i){var n,s=i(6238),t=i(36683),r=i(89231),o=i(29864),l=i(83647),d=i(8364),h=(i(77052),i(98597)),c=i(196),u=i(33167);i(26589),(0,d.A)([(0,c.EM)("ha-aliases-editor")],(function(e,a){var i=function(a){function i(){var a;(0,r.A)(this,i);for(var n=arguments.length,s=new Array(n),t=0;t<n;t++)s[t]=arguments[t];return a=(0,o.A)(this,i,[].concat(s)),e(a),a}return(0,l.A)(i,a),(0,t.A)(i)}(a);return{F:i,d:[{kind:"field",decorators:[(0,c.MZ)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,c.MZ)({type:Array})],key:"aliases",value:void 0},{kind:"field",decorators:[(0,c.MZ)({type:Boolean})],key:"disabled",value:function(){return!1}},{kind:"method",key:"render",value:function(){return this.aliases?(0,h.qy)(n||(n=(0,s.A)(["\n      <ha-multi-textfield\n        .hass=","\n        .value=","\n        .disabled=","\n        .label=","\n        .removeLabel=","\n        .addLabel=","\n        item-index\n        @value-changed=","\n      >\n      </ha-multi-textfield>\n    "])),this.hass,this.aliases,this.disabled,this.hass.localize("ui.dialogs.aliases.label"),this.hass.localize("ui.dialogs.aliases.remove"),this.hass.localize("ui.dialogs.aliases.add"),this._aliasesChanged):h.s6}},{kind:"method",key:"_aliasesChanged",value:function(e){(0,u.r)(this,"value-changed",{value:e})}}]}}),h.WF)},8662:function(e,a,i){i.r(a);var n,s,t,r,o,l,d,h,c,u=i(94881),v=i(1781),_=i(6238),f=i(36683),m=i(89231),k=i(29864),p=i(83647),g=i(8364),y=(i(77052),i(69466),i(21950),i(36724),i(848),i(650),i(68113),i(84368),i(57733),i(18404),i(14178),i(5787),i(19394),i(92289),i(61350),i(35832),i(56262),i(64148),i(66274),i(85038),i(98168),i(8339),i(58068),i(29805),i(98597)),A=i(196),b=i(66580),w=i(45081),x=i(33167),z=(i(73409),i(28331),i(91074),i(86640),i(88762)),C=(i(47385),i(93650),i(29222),i(59373),i(57046),i(43799)),q=i(83895),M=i(13473),L=(0,g.A)(null,(function(e,a){var i,g=function(a){function i(){var a;(0,m.A)(this,i);for(var n=arguments.length,s=new Array(n),t=0;t<n;t++)s[t]=arguments[t];return a=(0,k.A)(this,i,[].concat(s)),e(a),a}return(0,p.A)(i,a),(0,f.A)(i)}(a);return{F:g,d:[{kind:"field",decorators:[(0,A.MZ)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,A.wk)()],key:"_name",value:void 0},{kind:"field",decorators:[(0,A.wk)()],key:"_aliases",value:void 0},{kind:"field",decorators:[(0,A.wk)()],key:"_icon",value:void 0},{kind:"field",decorators:[(0,A.wk)()],key:"_level",value:void 0},{kind:"field",decorators:[(0,A.wk)()],key:"_error",value:void 0},{kind:"field",decorators:[(0,A.wk)()],key:"_params",value:void 0},{kind:"field",decorators:[(0,A.wk)()],key:"_submitting",value:void 0},{kind:"field",decorators:[(0,A.wk)()],key:"_addedAreas",value:function(){return new Set}},{kind:"field",decorators:[(0,A.wk)()],key:"_removedAreas",value:function(){return new Set}},{kind:"method",key:"showDialog",value:function(e){var a,i,n,s;this._params=e,this._error=void 0,this._name=this._params.entry?this._params.entry.name:this._params.suggestedName||"",this._aliases=(null===(a=this._params.entry)||void 0===a?void 0:a.aliases)||[],this._icon=(null===(i=this._params.entry)||void 0===i?void 0:i.icon)||null,this._level=null!==(n=null===(s=this._params.entry)||void 0===s?void 0:s.level)&&void 0!==n?n:null,this._addedAreas.clear(),this._removedAreas.clear()}},{kind:"method",key:"closeDialog",value:function(){this._error="",this._params=void 0,this._addedAreas.clear(),this._removedAreas.clear(),(0,x.r)(this,"dialog-closed",{dialog:this.localName})}},{kind:"field",key:"_floorAreas",value:function(){return(0,w.A)((function(e,a,i,n){return Object.values(a).filter((function(a){return(a.floor_id===(null==e?void 0:e.floor_id)||i.has(a.area_id))&&!n.has(a.area_id)}))}))}},{kind:"method",key:"render",value:function(){var e,a=this,i=this._floorAreas(null===(e=this._params)||void 0===e?void 0:e.entry,this.hass.areas,this._addedAreas,this._removedAreas);if(!this._params)return y.s6;var c=this._params.entry,u=!this._isNameValid();return(0,y.qy)(n||(n=(0,_.A)(["\n      <ha-dialog\n        open\n        @closed=","\n        .heading=","\n      >\n        <div>\n          ",'\n          <div class="form">\n            ',"\n\n            <ha-textfield\n              .value=","\n              @input=","\n              .label=","\n              .validationMessage=","\n              required\n              dialogInitialFocus\n            ></ha-textfield>\n\n            <ha-textfield\n              .value=","\n              @input=","\n              .label=",'\n              type="number"\n            ></ha-textfield>\n\n            <ha-icon-picker\n              .hass=',"\n              .value=","\n              @value-changed=","\n              .label=","\n            >\n              ",'\n            </ha-icon-picker>\n\n            <h3 class="header">\n              ','\n            </h3>\n\n            <p class="description">\n              ',"\n            </p>\n            ","\n            <ha-area-picker\n              no-add\n              .hass=","\n              @value-changed=","\n              .excludeAreas=","\n              .label=",'\n            ></ha-area-picker>\n\n            <h3 class="header">\n              ','\n            </h3>\n\n            <p class="description">\n              ',"\n            </p>\n            <ha-aliases-editor\n              .hass=","\n              .aliases=","\n              @value-changed=",'\n            ></ha-aliases-editor>\n          </div>\n        </div>\n        <mwc-button slot="secondaryAction" @click=',">\n          ",'\n        </mwc-button>\n        <mwc-button\n          slot="primaryAction"\n          @click=',"\n          .disabled=","\n        >\n          ","\n        </mwc-button>\n      </ha-dialog>\n    "])),this.closeDialog,(0,z.l)(this.hass,c?this.hass.localize("ui.panel.config.floors.editor.update_floor"):this.hass.localize("ui.panel.config.floors.editor.create_floor")),this._error?(0,y.qy)(s||(s=(0,_.A)(['<ha-alert alert-type="error">',"</ha-alert>"])),this._error):"",c?(0,y.qy)(t||(t=(0,_.A)(['\n                  <ha-settings-row>\n                    <span slot="heading">\n                      ','\n                    </span>\n                    <span slot="description">',"</span>\n                  </ha-settings-row>\n                "])),this.hass.localize("ui.panel.config.floors.editor.floor_id"),c.floor_id):y.s6,this._name,this._nameChanged,this.hass.localize("ui.panel.config.floors.editor.name"),this.hass.localize("ui.panel.config.floors.editor.name_required"),this._level,this._levelChanged,this.hass.localize("ui.panel.config.floors.editor.level"),this.hass,this._icon,this._iconChanged,this.hass.localize("ui.panel.config.areas.editor.icon"),this._icon?y.s6:(0,y.qy)(r||(r=(0,_.A)(['\n                    <ha-floor-icon\n                      slot="fallback"\n                      .floor=',"\n                    ></ha-floor-icon>\n                  "])),{level:this._level}),this.hass.localize("ui.panel.config.floors.editor.areas_section"),this.hass.localize("ui.panel.config.floors.editor.areas_description"),i.length?(0,y.qy)(o||(o=(0,_.A)(["<ha-chip-set>\n                  ","\n                </ha-chip-set>"])),(0,b.u)(i,(function(e){return e.area_id}),(function(e){return(0,y.qy)(l||(l=(0,_.A)(["<ha-input-chip\n                        .area=","\n                        @click=","\n                        @remove=","\n                        .label=","\n                      >\n                        ","\n                      </ha-input-chip>"])),e,a._openArea,a._removeArea,null==e?void 0:e.name,e.icon?(0,y.qy)(d||(d=(0,_.A)(['<ha-icon\n                              slot="icon"\n                              .icon=',"\n                            ></ha-icon>"])),e.icon):(0,y.qy)(h||(h=(0,_.A)(['<ha-svg-icon\n                              slot="icon"\n                              .path=',"\n                            ></ha-svg-icon>"])),"M20 2H4C2.9 2 2 2.9 2 4V20C2 21.11 2.9 22 4 22H20C21.11 22 22 21.11 22 20V4C22 2.9 21.11 2 20 2M4 6L6 4H10.9L4 10.9V6M4 13.7L13.7 4H18.6L4 18.6V13.7M20 18L18 20H13.1L20 13.1V18M20 10.3L10.3 20H5.4L20 5.4V10.3Z"))}))):y.s6,this.hass,this._addArea,i.map((function(e){return e.area_id})),this.hass.localize("ui.panel.config.floors.editor.add_area"),this.hass.localize("ui.panel.config.floors.editor.aliases_section"),this.hass.localize("ui.panel.config.floors.editor.aliases_description"),this.hass,this._aliases,this._aliasesChanged,this.closeDialog,this.hass.localize("ui.common.cancel"),this._updateEntry,u||this._submitting,c?this.hass.localize("ui.common.save"):this.hass.localize("ui.common.add"))}},{kind:"method",key:"_openArea",value:function(e){var a=this,i=e.target.area;(0,q.J)(this,{entry:i,updateEntry:function(e){return(0,M.gs)(a.hass,i.area_id,e)}})}},{kind:"method",key:"_removeArea",value:function(e){var a=e.target.area.area_id;if(this._addedAreas.has(a))return this._addedAreas.delete(a),void(this._addedAreas=new Set(this._addedAreas));this._removedAreas.add(a),this._removedAreas=new Set(this._removedAreas)}},{kind:"method",key:"_addArea",value:function(e){var a=e.detail.value;if(a){if(e.target.value="",this._removedAreas.has(a))return this._removedAreas.delete(a),void(this._removedAreas=new Set(this._removedAreas));this._addedAreas.add(a),this._addedAreas=new Set(this._addedAreas)}}},{kind:"method",key:"_isNameValid",value:function(){return""!==this._name.trim()}},{kind:"method",key:"_nameChanged",value:function(e){this._error=void 0,this._name=e.target.value}},{kind:"method",key:"_levelChanged",value:function(e){this._error=void 0,this._level=""===e.target.value?null:Number(e.target.value)}},{kind:"method",key:"_iconChanged",value:function(e){this._error=void 0,this._icon=e.detail.value}},{kind:"method",key:"_updateEntry",value:(i=(0,v.A)((0,u.A)().mark((function e(){var a,i;return(0,u.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._submitting=!0,a=!this._params.entry,e.prev=2,i={name:this._name.trim(),icon:this._icon||(a?void 0:null),level:this._level,aliases:this._aliases},!a){e.next=9;break}return e.next=7,this._params.createEntry(i,this._addedAreas);case 7:e.next=11;break;case 9:return e.next=11,this._params.updateEntry(i,this._addedAreas,this._removedAreas);case 11:this.closeDialog(),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(2),this._error=e.t0.message||this.hass.localize("ui.panel.config.floors.editor.unknown_error");case 17:return e.prev=17,this._submitting=!1,e.finish(17);case 20:case"end":return e.stop()}}),e,this,[[2,14,17,20]])}))),function(){return i.apply(this,arguments)})},{kind:"method",key:"_aliasesChanged",value:function(e){this._aliases=e.detail.value}},{kind:"get",static:!0,key:"styles",value:function(){return[C.RF,C.nA,(0,y.AH)(c||(c=(0,_.A)(["\n        ha-textfield {\n          display: block;\n          margin-bottom: 16px;\n        }\n        ha-floor-icon {\n          color: var(--secondary-text-color);\n        }\n        ha-chip-set {\n          margin-bottom: 8px;\n        }\n      "])))]}}]}}),y.WF);customElements.define("dialog-floor-registry-detail",L)}}]);