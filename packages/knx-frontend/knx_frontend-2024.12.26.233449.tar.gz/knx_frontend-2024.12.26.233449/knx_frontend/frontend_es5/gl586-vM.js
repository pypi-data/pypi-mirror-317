"use strict";(self.webpackChunkknx_frontend=self.webpackChunkknx_frontend||[]).push([[7701],{7701:function(n,e,t){t.r(e),t.d(e,{HaConversationAgentSelector:function(){return j}});var o,a,i,r,c,s,l,u,d,p,f,h,v,g=t(6238),m=t(36683),_=t(89231),k=t(29864),y=t(83647),w=t(8364),A=(t(77052),t(98597)),b=t(196),C=t(94881),x=t(1781),F=t(66123),S=t(27526),z=(t(4187),t(53501),t(36724),t(848),t(68113),t(34517),t(66274),t(85767),t(98168),t(33167)),E=t(24517),M=t(11355),L=t(81407),q=t(193),O=t(31238),Z=t(22481),T=(t(21950),t(43859),t(55888),t(56262),t(8339),function(n,e){var t;return n.callApi("POST","config/config_entries/options/flow",{handler:e,show_advanced_options:Boolean(null===(t=n.userData)||void 0===t?void 0:t.showAdvanced)})}),P=function(n,e){return n.callApi("GET","config/config_entries/options/flow/".concat(e))},H=function(n,e,t){return n.callApi("POST","config/config_entries/options/flow/".concat(e),t)},B=function(n,e){return n.callApi("DELETE","config/config_entries/options/flow/".concat(e))},D=t(50006),W=function(n,e,t){return(0,D.g)(n,Object.assign({startFlowHandler:e.entry_id,domain:e.domain},t),{flowType:"options_flow",showDevices:!1,createFlow:(u=(0,x.A)((0,C.A)().mark((function n(t,o){var a,i,r;return(0,C.A)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Promise.all([T(t,o),t.loadFragmentTranslation("config"),t.loadBackendTranslation("options",e.domain),t.loadBackendTranslation("selector",e.domain)]);case 2:return a=n.sent,i=(0,Z.A)(a,1),r=i[0],n.abrupt("return",r);case 6:case"end":return n.stop()}}),n)}))),function(n,e){return u.apply(this,arguments)}),fetchFlow:(l=(0,x.A)((0,C.A)().mark((function n(t,o){var a,i,r;return(0,C.A)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Promise.all([P(t,o),t.loadFragmentTranslation("config"),t.loadBackendTranslation("options",e.domain),t.loadBackendTranslation("selector",e.domain)]);case 2:return a=n.sent,i=(0,Z.A)(a,1),r=i[0],n.abrupt("return",r);case 6:case"end":return n.stop()}}),n)}))),function(n,e){return l.apply(this,arguments)}),handleFlowStep:H,deleteFlow:B,renderAbortDescription:function(n,t){var a=n.localize("component.".concat(t.translation_domain||e.domain,".options.abort.").concat(t.reason),t.description_placeholders);return a?(0,A.qy)(o||(o=(0,g.A)(["\n              <ha-markdown\n                breaks\n                allowsvg\n                .content=","\n              ></ha-markdown>\n            "])),a):t.reason},renderShowFormStepHeader:function(n,t){return n.localize("component.".concat(t.translation_domain||e.domain,".options.step.").concat(t.step_id,".title"),t.description_placeholders)||n.localize("ui.dialogs.options_flow.form.header")},renderShowFormStepDescription:function(n,t){var o=n.localize("component.".concat(t.translation_domain||e.domain,".options.step.").concat(t.step_id,".description"),t.description_placeholders);return o?(0,A.qy)(a||(a=(0,g.A)(["\n              <ha-markdown\n                allowsvg\n                breaks\n                .content=","\n              ></ha-markdown>\n            "])),o):""},renderShowFormStepFieldLabel:function(n,t,o,a){var i;if("expandable"===o.type)return n.localize("component.".concat(e.domain,".options.step.").concat(t.step_id,".sections.").concat(o.name,".name"));var r=null!=a&&null!==(i=a.path)&&void 0!==i&&i[0]?"sections.".concat(a.path[0],"."):"";return n.localize("component.".concat(e.domain,".options.step.").concat(t.step_id,".").concat(r,"data.").concat(o.name))||o.name},renderShowFormStepFieldHelper:function(n,t,o,a){var r;if("expandable"===o.type)return n.localize("component.".concat(t.translation_domain||e.domain,".options.step.").concat(t.step_id,".sections.").concat(o.name,".description"));var c=null!=a&&null!==(r=a.path)&&void 0!==r&&r[0]?"sections.".concat(a.path[0],"."):"",s=n.localize("component.".concat(t.translation_domain||e.domain,".options.step.").concat(t.step_id,".").concat(c,"data_description.").concat(o.name),t.description_placeholders);return s?(0,A.qy)(i||(i=(0,g.A)(["<ha-markdown breaks .content=","></ha-markdown>"])),s):""},renderShowFormStepFieldError:function(n,t,o){return n.localize("component.".concat(t.translation_domain||e.domain,".options.error.").concat(o),t.description_placeholders)||o},renderShowFormStepFieldLocalizeValue:function(n,t,o){return n.localize("component.".concat(e.domain,".selector.").concat(o))},renderShowFormStepSubmitButton:function(n,t){return n.localize("component.".concat(e.domain,".options.step.").concat(t.step_id,".submit"))||n.localize("ui.panel.config.integrations.config_flow.".concat(!1===t.last_step?"next":"submit"))},renderExternalStepHeader:function(n,e){return""},renderExternalStepDescription:function(n,e){return""},renderCreateEntryDescription:function(n,e){return(0,A.qy)(r||(r=(0,g.A)(["\n          <p>","</p>\n        "])),n.localize("ui.dialogs.options_flow.success.description"))},renderShowFormProgressHeader:function(n,t){return n.localize("component.".concat(e.domain,".options.step.").concat(t.step_id,".title"))||n.localize("component.".concat(e.domain,".title"))},renderShowFormProgressDescription:function(n,t){var o=n.localize("component.".concat(t.translation_domain||e.domain,".options.progress.").concat(t.progress_action),t.description_placeholders);return o?(0,A.qy)(c||(c=(0,g.A)(["\n              <ha-markdown\n                allowsvg\n                breaks\n                .content=","\n              ></ha-markdown>\n            "])),o):""},renderMenuHeader:function(n,t){return n.localize("component.".concat(e.domain,".options.step.").concat(t.step_id,".title"))||n.localize("component.".concat(e.domain,".title"))},renderMenuDescription:function(n,t){var o=n.localize("component.".concat(t.translation_domain||e.domain,".options.step.").concat(t.step_id,".description"),t.description_placeholders);return o?(0,A.qy)(s||(s=(0,g.A)(["\n              <ha-markdown\n                allowsvg\n                breaks\n                .content=","\n              ></ha-markdown>\n            "])),o):""},renderMenuOption:function(n,t,o){return n.localize("component.".concat(t.translation_domain||e.domain,".options.step.").concat(t.step_id,".menu_options.").concat(o),t.description_placeholders)},renderLoadingDescription:function(n,t){return n.localize("component.".concat(e.domain,".options.loading"))||("loading_flow"===t||"loading_step"===t?n.localize("ui.dialogs.options_flow.loading.".concat(t),{integration:(0,O.p$)(n.localize,e.domain)}):"")}});var l,u},N=(t(9484),t(96334),t(27761)),U="__NONE_OPTION__",j=((0,w.A)([(0,b.EM)("ha-conversation-agent-picker")],(function(n,e){var t,o,a,i=function(e){function t(){var e;(0,_.A)(this,t);for(var o=arguments.length,a=new Array(o),i=0;i<o;i++)a[i]=arguments[i];return e=(0,k.A)(this,t,[].concat(a)),n(e),e}return(0,y.A)(t,e),(0,m.A)(t)}(e);return{F:i,d:[{kind:"field",decorators:[(0,b.MZ)()],key:"value",value:void 0},{kind:"field",decorators:[(0,b.MZ)()],key:"language",value:void 0},{kind:"field",decorators:[(0,b.MZ)()],key:"label",value:void 0},{kind:"field",decorators:[(0,b.MZ)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,b.MZ)({type:Boolean,reflect:!0})],key:"disabled",value:function(){return!1}},{kind:"field",decorators:[(0,b.MZ)({type:Boolean})],key:"required",value:function(){return!1}},{kind:"field",decorators:[(0,b.wk)()],key:"_agents",value:void 0},{kind:"field",decorators:[(0,b.wk)()],key:"_configEntry",value:void 0},{kind:"method",key:"render",value:function(){var n;if(!this._agents)return A.s6;var e=this.value;if(!e&&this.required){var t,o=(0,F.A)(this._agents);try{for(o.s();!(t=o.n()).done;){var a=t.value;if("conversation.home_assistant"===a.id&&a.supported_languages.includes(this.language)){e=a.id;break}}}catch(s){o.e(s)}finally{o.f()}if(!e){var i,r=(0,F.A)(this._agents);try{for(r.s();!(i=r.n()).done;){var c=i.value;if("*"===c.supported_languages&&c.supported_languages.includes(this.language)){e=c.id;break}}}catch(s){r.e(s)}finally{r.f()}}}return e||(e=U),(0,A.qy)(l||(l=(0,g.A)(["\n      <ha-select\n        .label=","\n        .value=","\n        .required=","\n        .disabled=","\n        @selected=","\n        @closed=","\n        fixedMenuPosition\n        naturalMenuWidth\n      >\n        ","\n        ","</ha-select\n      >","\n    "])),this.label||this.hass.localize("ui.components.coversation-agent-picker.conversation_agent"),e,this.required,this.disabled,this._changed,E.d,this.required?A.s6:(0,A.qy)(u||(u=(0,g.A)(["<ha-list-item .value=",">\n              ","\n            </ha-list-item>"])),U,this.hass.localize("ui.components.coversation-agent-picker.none")),this._agents.map((function(n){return(0,A.qy)(d||(d=(0,g.A)(["<ha-list-item\n              .value=","\n              .disabled=","\n            >\n              ","\n            </ha-list-item>"])),n.id,"*"!==n.supported_languages&&0===n.supported_languages.length,n.name)})),null!==(n=this._configEntry)&&void 0!==n&&n.supports_options?(0,A.qy)(p||(p=(0,g.A)(["<ha-icon-button\n            .path=","\n            @click=","\n          ></ha-icon-button>"])),"M12,15.5A3.5,3.5 0 0,1 8.5,12A3.5,3.5 0 0,1 12,8.5A3.5,3.5 0 0,1 15.5,12A3.5,3.5 0 0,1 12,15.5M19.43,12.97C19.47,12.65 19.5,12.33 19.5,12C19.5,11.67 19.47,11.34 19.43,11L21.54,9.37C21.73,9.22 21.78,8.95 21.66,8.73L19.66,5.27C19.54,5.05 19.27,4.96 19.05,5.05L16.56,6.05C16.04,5.66 15.5,5.32 14.87,5.07L14.5,2.42C14.46,2.18 14.25,2 14,2H10C9.75,2 9.54,2.18 9.5,2.42L9.13,5.07C8.5,5.32 7.96,5.66 7.44,6.05L4.95,5.05C4.73,4.96 4.46,5.05 4.34,5.27L2.34,8.73C2.21,8.95 2.27,9.22 2.46,9.37L4.57,11C4.53,11.34 4.5,11.67 4.5,12C4.5,12.33 4.53,12.65 4.57,12.97L2.46,14.63C2.27,14.78 2.21,15.05 2.34,15.27L4.34,18.73C4.46,18.95 4.73,19.03 4.95,18.95L7.44,17.94C7.96,18.34 8.5,18.68 9.13,18.93L9.5,21.58C9.54,21.82 9.75,22 10,22H14C14.25,22 14.46,21.82 14.5,21.58L14.87,18.93C15.5,18.67 16.04,18.34 16.56,17.94L19.05,18.95C19.27,19.03 19.54,18.95 19.66,18.73L21.66,15.27C21.78,15.05 21.73,14.78 21.54,14.63L19.43,12.97Z",this._openOptionsFlow):"")}},{kind:"method",key:"willUpdate",value:function(n){(0,S.A)(i,"willUpdate",this,3)([n]),this.hasUpdated?n.has("language")&&this._debouncedUpdateAgents():this._updateAgents(),n.has("value")&&this._maybeFetchConfigEntry()}},{kind:"method",key:"_maybeFetchConfigEntry",value:(a=(0,x.A)((0,C.A)().mark((function n(){var e;return(0,C.A)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(this.value&&this.value in this.hass.entities){n.next=3;break}return this._configEntry=void 0,n.abrupt("return");case 3:return n.prev=3,n.next=6,(0,N.v)(this.hass,this.value);case 6:if((e=n.sent).config_entry_id){n.next=10;break}return this._configEntry=void 0,n.abrupt("return");case 10:return n.next=12,(0,L.Vx)(this.hass,e.config_entry_id);case 12:this._configEntry=n.sent.config_entry,n.next=18;break;case 15:n.prev=15,n.t0=n.catch(3),this._configEntry=void 0;case 18:case"end":return n.stop()}}),n,this,[[3,15]])}))),function(){return a.apply(this,arguments)})},{kind:"field",key:"_debouncedUpdateAgents",value:function(){var n=this;return(0,M.s)((function(){return n._updateAgents()}),500)}},{kind:"method",key:"_updateAgents",value:(o=(0,x.A)((0,C.A)().mark((function n(){var e,t,o,a=this;return(0,C.A)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,q.vc)(this.hass,this.language,this.hass.config.country||void 0);case 2:if(e=n.sent,t=e.agents,this._agents=t,this.value){n.next=7;break}return n.abrupt("return");case 7:o=t.find((function(n){return n.id===a.value})),(0,z.r)(this,"supported-languages-changed",{value:null==o?void 0:o.supported_languages}),(!o||"*"!==o.supported_languages&&0===o.supported_languages.length)&&(this.value=void 0,(0,z.r)(this,"value-changed",{value:this.value}));case 10:case"end":return n.stop()}}),n,this)}))),function(){return o.apply(this,arguments)})},{kind:"method",key:"_openOptionsFlow",value:(t=(0,x.A)((0,C.A)().mark((function n(){return(0,C.A)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(this._configEntry){n.next=2;break}return n.abrupt("return");case 2:return n.t0=W,n.t1=this,n.t2=this._configEntry,n.next=7,(0,O.QC)(this.hass,this._configEntry.domain);case 7:n.t3=n.sent,n.t4={manifest:n.t3},(0,n.t0)(n.t1,n.t2,n.t4);case 10:case"end":return n.stop()}}),n,this)}))),function(){return t.apply(this,arguments)})},{kind:"get",static:!0,key:"styles",value:function(){return(0,A.AH)(f||(f=(0,g.A)(["\n      :host {\n        display: flex;\n        align-items: center;\n      }\n      ha-select {\n        width: 100%;\n      }\n      ha-icon-button {\n        color: var(--secondary-text-color);\n      }\n    "])))}},{kind:"method",key:"_changed",value:function(n){var e,t=this,o=n.target;!this.hass||""===o.value||o.value===this.value||void 0===this.value&&o.value===U||(this.value=o.value===U?void 0:o.value,(0,z.r)(this,"value-changed",{value:this.value}),(0,z.r)(this,"supported-languages-changed",{value:null===(e=this._agents.find((function(n){return n.id===t.value})))||void 0===e?void 0:e.supported_languages}))}}]}}),A.WF),(0,w.A)([(0,b.EM)("ha-selector-conversation_agent")],(function(n,e){var t=function(e){function t(){var e;(0,_.A)(this,t);for(var o=arguments.length,a=new Array(o),i=0;i<o;i++)a[i]=arguments[i];return e=(0,k.A)(this,t,[].concat(a)),n(e),e}return(0,y.A)(t,e),(0,m.A)(t)}(e);return{F:t,d:[{kind:"field",decorators:[(0,b.MZ)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,b.MZ)({attribute:!1})],key:"selector",value:void 0},{kind:"field",decorators:[(0,b.MZ)()],key:"value",value:void 0},{kind:"field",decorators:[(0,b.MZ)()],key:"label",value:void 0},{kind:"field",decorators:[(0,b.MZ)()],key:"helper",value:void 0},{kind:"field",decorators:[(0,b.MZ)({type:Boolean})],key:"disabled",value:function(){return!1}},{kind:"field",decorators:[(0,b.MZ)({type:Boolean})],key:"required",value:function(){return!0}},{kind:"field",decorators:[(0,b.MZ)({attribute:!1})],key:"context",value:void 0},{kind:"method",key:"render",value:function(){var n,e;return(0,A.qy)(h||(h=(0,g.A)(["<ha-conversation-agent-picker\n      .hass=","\n      .value=","\n      .language=","\n      .label=","\n      .helper=","\n      .disabled=","\n      .required=","\n    ></ha-conversation-agent-picker>"])),this.hass,this.value,(null===(n=this.selector.conversation_agent)||void 0===n?void 0:n.language)||(null===(e=this.context)||void 0===e?void 0:e.language),this.label,this.helper,this.disabled,this.required)}},{kind:"field",static:!0,key:"styles",value:function(){return(0,A.AH)(v||(v=(0,g.A)(["\n    ha-conversation-agent-picker {\n      width: 100%;\n    }\n  "])))}}]}}),A.WF))},193:function(n,e,t){t.d(e,{ZE:function(){return o},vc:function(){return a}});var o=function(n){return n[n.CONTROL=1]="CONTROL",n}({}),a=function(n,e,t){return n.callWS({type:"conversation/agent/list",language:e,country:t})}},27761:function(n,e,t){t.d(e,{jh:function(){return r},Ox:function(){return s},P9:function(){return l},v:function(){return c}});var o=t(66123),a=(t(69466),t(4187),t(53501),t(75658),t(14460),t(848),t(43859),t(68113),t(66274),t(85038),t(85767),t(45081)),i=t(91330),r=(t(66412),t(19263),function(n,e){if(e.name)return e.name;var t=n.states[e.entity_id];return t?(0,i.u)(t):e.original_name?e.original_name:e.entity_id}),c=function(n,e){return n.callWS({type:"config/entity_registry/get",entity_id:e})},s=(0,a.A)((function(n){var e,t={},a=(0,o.A)(n);try{for(a.s();!(e=a.n()).done;){var i=e.value;t[i.entity_id]=i}}catch(r){a.e(r)}finally{a.f()}return t})),l=(0,a.A)((function(n){var e,t={},a=(0,o.A)(n);try{for(a.s();!(e=a.n()).done;){var i=e.value;t[i.id]=i}}catch(r){a.e(r)}finally{a.f()}return t}))},31238:function(n,e,t){t.d(e,{QC:function(){return i},fK:function(){return a},p$:function(){return o}});t(848);var o=function(n,e,t){return n("component.".concat(e,".title"))||(null==t?void 0:t.name)||e},a=function(n,e){var t={type:"manifest/list"};return e&&(t.integrations=e),n.callWS(t)},i=function(n,e){return n.callWS({type:"manifest/get",integration:e})}},50006:function(n,e,t){t.d(e,{g:function(){return i}});t(21950),t(43859),t(68113),t(55888),t(56262),t(8339);var o=t(33167),a=function(){return Promise.all([t.e(7777),t.e(4292),t.e(5721)]).then(t.bind(t,55721))},i=function(n,e,t){(0,o.r)(n,"show-dialog",{dialogTag:"dialog-data-entry-flow",dialogImport:a,dialogParams:Object.assign(Object.assign({},e),{},{flowConfig:t,dialogParentElement:n})})}}}]);