"use strict";(self.webpackChunkknx_frontend=self.webpackChunkknx_frontend||[]).push([[7385],{80106:function(e,n,i){i.d(n,{d:function(){return t}});var t=function(e){switch(e.language){case"cz":case"de":case"fi":case"fr":case"sk":case"sv":return" ";default:return""}}},96287:function(e,n,i){var t,a,r,o,l,s,d,c,u=i(6238),p=i(36683),h=i(89231),v=i(29864),f=i(83647),g=i(8364),k=i(27526),m=(i(77052),i(35848),i(36724),i(848),i(650),i(68113),i(58971),i(56262),i(98168),i(8774),i(98597)),y=i(196),b=i(69760),x=i(33167),A=(i(66494),i(96396),i(80106)),_=i(96041),w=(i(86150),i(86245),"M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19Z"),M="M14,2H6A2,2 0 0,0 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2M13.5,16V19H10.5V16H8L12,12L16,16H13.5M13,9V3.5L18.5,9H13Z";(0,g.A)([(0,y.EM)("ha-file-upload")],(function(e,n){var i=function(n){function i(){var n;(0,h.A)(this,i);for(var t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];return n=(0,v.A)(this,i,[].concat(a)),e(n),n}return(0,f.A)(i,n),(0,p.A)(i)}(n);return{F:i,d:[{kind:"field",decorators:[(0,y.MZ)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,y.MZ)()],key:"accept",value:void 0},{kind:"field",decorators:[(0,y.MZ)()],key:"icon",value:void 0},{kind:"field",decorators:[(0,y.MZ)()],key:"label",value:void 0},{kind:"field",decorators:[(0,y.MZ)()],key:"secondary",value:void 0},{kind:"field",decorators:[(0,y.MZ)()],key:"supports",value:void 0},{kind:"field",decorators:[(0,y.MZ)({type:Object})],key:"value",value:void 0},{kind:"field",decorators:[(0,y.MZ)({type:Boolean})],key:"multiple",value:function(){return!1}},{kind:"field",decorators:[(0,y.MZ)({type:Boolean,reflect:!0})],key:"disabled",value:function(){return!1}},{kind:"field",decorators:[(0,y.MZ)({type:Boolean})],key:"uploading",value:function(){return!1}},{kind:"field",decorators:[(0,y.MZ)({type:Number})],key:"progress",value:void 0},{kind:"field",decorators:[(0,y.MZ)({type:Boolean,attribute:"auto-open-file-dialog"})],key:"autoOpenFileDialog",value:function(){return!1}},{kind:"field",decorators:[(0,y.wk)()],key:"_drag",value:function(){return!1}},{kind:"field",decorators:[(0,y.P)("#input")],key:"_input",value:void 0},{kind:"method",key:"firstUpdated",value:function(e){(0,k.A)(i,"firstUpdated",this,3)([e]),this.autoOpenFileDialog&&this._openFilePicker()}},{kind:"method",key:"render",value:function(){var e,n,i,c,p,h=this;return(0,m.qy)(t||(t=(0,u.A)(["\n      ","\n    "])),this.uploading?(0,m.qy)(a||(a=(0,u.A)(['<div class="container">\n            <div class="row">\n              <span class="header"\n                >',"</span\n              >\n              ","\n            </div>\n            <mwc-linear-progress\n              .indeterminate=","\n              .progress=","\n            ></mwc-linear-progress>\n          </div>"])),this.value?null===(e=this.hass)||void 0===e?void 0:e.localize("ui.components.file-upload.uploading_name",{name:this.value.toString()}):null===(n=this.hass)||void 0===n?void 0:n.localize("ui.components.file-upload.uploading"),this.progress?(0,m.qy)(r||(r=(0,u.A)(['<span class="progress"\n                    >',"","%</span\n                  >"])),this.progress,(0,A.d)(this.hass.locale)):"",!this.progress,this.progress?this.progress/100:void 0):(0,m.qy)(o||(o=(0,u.A)(["<label\n            for=",'\n            class="container ','"\n            @drop=',"\n            @dragenter=","\n            @dragover=","\n            @dragleave=","\n            @dragend=","\n            >",'\n            <input\n              id="input"\n              type="file"\n              class="file"\n              .accept=',"\n              .multiple=","\n              @change=","\n          /></label>"])),this.value?"":"input",(0,b.H)({dragged:this._drag,multiple:this.multiple,value:Boolean(this.value)}),this._handleDrop,this._handleDragStart,this._handleDragStart,this._handleDragEnd,this._handleDragEnd,this.value?"string"==typeof this.value?(0,m.qy)(s||(s=(0,u.A)(['<div class="row">\n                    <div class="value" @click=',">\n                      <ha-svg-icon\n                        .path=","\n                      ></ha-svg-icon>\n                      ","\n                    </div>\n                    <ha-icon-button\n                      @click=","\n                      .label=","\n                      .path=","\n                    ></ha-icon-button>\n                  </div>"])),this._openFilePicker,this.icon||M,this.value,this._clearValue,(null===(p=this.hass)||void 0===p?void 0:p.localize("ui.common.delete"))||"Delete",w):(this.value instanceof FileList?Array.from(this.value):(0,_.e)(this.value)).map((function(e){var n;return(0,m.qy)(d||(d=(0,u.A)(['<div class="row">\n                        <div class="value" @click=',">\n                          <ha-svg-icon\n                            .path=","\n                          ></ha-svg-icon>\n                          "," - ","\n                        </div>\n                        <ha-icon-button\n                          @click=","\n                          .label=","\n                          .path=","\n                        ></ha-icon-button>\n                      </div>"])),h._openFilePicker,h.icon||M,e.name,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;if(0===e)return"0 Bytes";n=n<0?0:n;var i=Math.floor(Math.log(e)/Math.log(1024));return"".concat(parseFloat((e/Math.pow(1024,i)).toFixed(n))," ").concat(["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"][i])}(e.size),h._clearValue,(null===(n=h.hass)||void 0===n?void 0:n.localize("ui.common.delete"))||"Delete",w)})):(0,m.qy)(l||(l=(0,u.A)(['<ha-svg-icon\n                    class="big-icon"\n                    .path=',"\n                  ></ha-svg-icon>\n                  <ha-button unelevated @click=",">\n                    ",'\n                  </ha-button>\n                  <span class="secondary"\n                    >','</span\n                  >\n                  <span class="supports">',"</span>"])),this.icon||M,this._openFilePicker,this.label||(null===(i=this.hass)||void 0===i?void 0:i.localize("ui.components.file-upload.label")),this.secondary||(null===(c=this.hass)||void 0===c?void 0:c.localize("ui.components.file-upload.secondary")),this.supports),this.accept,this.multiple,this._handleFilePicked))}},{kind:"method",key:"_openFilePicker",value:function(){var e;null===(e=this._input)||void 0===e||e.click()}},{kind:"method",key:"_handleDrop",value:function(e){var n;e.preventDefault(),e.stopPropagation(),null!==(n=e.dataTransfer)&&void 0!==n&&n.files&&(0,x.r)(this,"file-picked",{files:this.multiple||1===e.dataTransfer.files.length?Array.from(e.dataTransfer.files):[e.dataTransfer.files[0]]}),this._drag=!1}},{kind:"method",key:"_handleDragStart",value:function(e){e.preventDefault(),e.stopPropagation(),this._drag=!0}},{kind:"method",key:"_handleDragEnd",value:function(e){e.preventDefault(),e.stopPropagation(),this._drag=!1}},{kind:"method",key:"_handleFilePicked",value:function(e){0!==e.target.files.length&&(this.value=e.target.files,(0,x.r)(this,"file-picked",{files:e.target.files}))}},{kind:"method",key:"_clearValue",value:function(e){e.preventDefault(),this._input.value="",this.value=void 0,(0,x.r)(this,"change")}},{kind:"get",static:!0,key:"styles",value:function(){return(0,m.AH)(c||(c=(0,u.A)(['\n      :host {\n        display: block;\n        height: 240px;\n      }\n      :host([disabled]) {\n        pointer-events: none;\n        color: var(--disabled-text-color);\n      }\n      .container {\n        position: relative;\n        display: flex;\n        flex-direction: column;\n        justify-content: center;\n        align-items: center;\n        border: solid 1px\n          var(--mdc-text-field-idle-line-color, rgba(0, 0, 0, 0.42));\n        border-radius: var(--mdc-shape-small, 4px);\n        height: 100%;\n      }\n      label.container {\n        border: dashed 1px\n          var(--mdc-text-field-idle-line-color, rgba(0, 0, 0, 0.42));\n        cursor: pointer;\n      }\n      :host([disabled]) .container {\n        border-color: var(--disabled-color);\n      }\n      label.dragged {\n        border-color: var(--primary-color);\n      }\n      .dragged:before {\n        position: absolute;\n        top: 0;\n        right: 0;\n        bottom: 0;\n        left: 0;\n        background-color: var(--primary-color);\n        content: "";\n        opacity: var(--dark-divider-opacity);\n        pointer-events: none;\n        border-radius: var(--mdc-shape-small, 4px);\n      }\n      label.value {\n        cursor: default;\n      }\n      label.value.multiple {\n        justify-content: unset;\n        overflow: auto;\n      }\n      .highlight {\n        color: var(--primary-color);\n      }\n      .row {\n        display: flex;\n        width: 100%;\n        align-items: center;\n        justify-content: space-between;\n        padding: 0 16px;\n        box-sizing: border-box;\n      }\n      ha-button {\n        margin-bottom: 4px;\n      }\n      .supports {\n        color: var(--secondary-text-color);\n        font-size: 12px;\n      }\n      :host([disabled]) .secondary {\n        color: var(--disabled-text-color);\n      }\n      input.file {\n        display: none;\n      }\n      .value {\n        cursor: pointer;\n      }\n      .value ha-svg-icon {\n        margin-right: 8px;\n        margin-inline-end: 8px;\n        margin-inline-start: initial;\n      }\n      .big-icon {\n        --mdc-icon-size: 48px;\n        margin-bottom: 8px;\n      }\n      ha-button {\n        --mdc-button-outline-color: var(--primary-color);\n        --mdc-icon-button-size: 24px;\n      }\n      mwc-linear-progress {\n        width: 100%;\n        padding: 16px;\n        box-sizing: border-box;\n      }\n      .header {\n        font-weight: 500;\n      }\n      .progress {\n        color: var(--secondary-text-color);\n      }\n    '])))}}]}}),m.WF)},47385:function(e,n,i){var t,a,r,o=i(94881),l=i(1781),s=i(6238),d=i(36683),c=i(89231),u=i(29864),p=i(83647),h=i(8364),v=(i(77052),i(53501),i(650),i(68113),i(58971),i(98597)),f=i(196),g=i(33167),k=i(43799),m=i(10377),y=i(31447),b=(i(21950),i(55888),i(56262),i(8339),function(){return Promise.all([i.e(4857),i.e(2e3)]).then(i.bind(i,12e3))});i(66494),i(73279),i(96287),(0,h.A)([(0,f.EM)("ha-picture-upload")],(function(e,n){var i,h,x,A,_=function(n){function i(){var n;(0,c.A)(this,i);for(var t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];return n=(0,u.A)(this,i,[].concat(a)),e(n),n}return(0,p.A)(i,n),(0,d.A)(i)}(n);return{F:_,d:[{kind:"field",key:"hass",value:void 0},{kind:"field",decorators:[(0,f.MZ)()],key:"value",value:function(){return null}},{kind:"field",decorators:[(0,f.MZ)()],key:"label",value:void 0},{kind:"field",decorators:[(0,f.MZ)()],key:"secondary",value:void 0},{kind:"field",decorators:[(0,f.MZ)()],key:"supports",value:void 0},{kind:"field",decorators:[(0,f.MZ)()],key:"currentImageAltText",value:void 0},{kind:"field",decorators:[(0,f.MZ)({type:Boolean})],key:"crop",value:function(){return!1}},{kind:"field",decorators:[(0,f.MZ)({attribute:!1})],key:"cropOptions",value:void 0},{kind:"field",decorators:[(0,f.MZ)({type:Boolean})],key:"original",value:function(){return!1}},{kind:"field",decorators:[(0,f.MZ)({type:Number})],key:"size",value:function(){return 512}},{kind:"field",decorators:[(0,f.wk)()],key:"_uploading",value:function(){return!1}},{kind:"method",key:"render",value:function(){return this.value?(0,v.qy)(a||(a=(0,s.A)(['<div class="center-vertical">\n      <div class="value">\n        <img\n          .src=',"\n          alt=","\n        />\n        <div>\n          <ha-button\n            @click=","\n            .label=","\n          >\n          </ha-button>\n        </div>\n      </div>\n    </div>"])),this.value,this.currentImageAltText||this.hass.localize("ui.components.picture-upload.current_image_alt"),this._handleChangeClick,this.hass.localize("ui.components.picture-upload.change_picture")):(0,v.qy)(t||(t=(0,s.A)(["\n        <ha-file-upload\n          .hass=","\n          .icon=","\n          .label=","\n          .secondary=","\n          .supports=","\n          .uploading=","\n          @file-picked=","\n          @change=",'\n          accept="image/png, image/jpeg, image/gif"\n        ></ha-file-upload>\n      '])),this.hass,"M18 15V18H15V20H18V23H20V20H23V18H20V15H18M13.3 21H5C3.9 21 3 20.1 3 19V5C3 3.9 3.9 3 5 3H19C20.1 3 21 3.9 21 5V13.3C20.4 13.1 19.7 13 19 13C17.9 13 16.8 13.3 15.9 13.9L14.5 12L11 16.5L8.5 13.5L5 18H13.1C13 18.3 13 18.7 13 19C13 19.7 13.1 20.4 13.3 21Z",this.label||this.hass.localize("ui.components.picture-upload.label"),this.secondary,this.supports||this.hass.localize("ui.components.picture-upload.supported_formats"),this._uploading,this._handleFilePicked,this._handleFileCleared)}},{kind:"method",key:"_handleChangeClick",value:function(){this.value=null,(0,g.r)(this,"change")}},{kind:"method",key:"_handleFilePicked",value:(A=(0,l.A)((0,o.A)().mark((function e(n){var i;return(0,o.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=n.detail.files[0],this.crop?this._cropFile(i):this._uploadFile(i);case 2:case"end":return e.stop()}}),e,this)}))),function(e){return A.apply(this,arguments)})},{kind:"method",key:"_handleFileCleared",value:(x=(0,l.A)((0,o.A)().mark((function e(){return(0,o.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.value=null;case 1:case"end":return e.stop()}}),e,this)}))),function(){return x.apply(this,arguments)})},{kind:"method",key:"_cropFile",value:(h=(0,l.A)((0,o.A)().mark((function e(n){var i=this;return(0,o.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(["image/png","image/jpeg","image/gif"].includes(n.type)){e.next=3;break}return(0,y.K$)(this,{text:this.hass.localize("ui.components.picture-upload.unsupported_format")}),e.abrupt("return");case 3:t=this,a={file:n,options:this.cropOptions||{round:!1,aspectRatio:NaN},croppedCallback:function(e){i._uploadFile(e)}},(0,g.r)(t,"show-dialog",{dialogTag:"image-cropper-dialog",dialogImport:b,dialogParams:a});case 4:case"end":return e.stop()}var t,a}),e,this)}))),function(e){return h.apply(this,arguments)})},{kind:"method",key:"_uploadFile",value:(i=(0,l.A)((0,o.A)().mark((function e(n){var i;return(0,o.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(["image/png","image/jpeg","image/gif"].includes(n.type)){e.next=3;break}return(0,y.K$)(this,{text:this.hass.localize("ui.components.picture-upload.unsupported_format")}),e.abrupt("return");case 3:return this._uploading=!0,e.prev=4,e.next=7,(0,m.mF)(this.hass,n);case 7:i=e.sent,this.value=(0,m.Q0)(i.id,this.size,this.original),(0,g.r)(this,"change"),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(4),(0,y.K$)(this,{text:e.t0.toString()});case 15:return e.prev=15,this._uploading=!1,e.finish(15);case 18:case"end":return e.stop()}}),e,this,[[4,12,15,18]])}))),function(e){return i.apply(this,arguments)})},{kind:"get",static:!0,key:"styles",value:function(){return[k.RF,(0,v.AH)(r||(r=(0,s.A)(["\n        :host {\n          display: block;\n          height: 240px;\n        }\n        ha-file-upload {\n          height: 100%;\n        }\n        .center-vertical {\n          display: flex;\n          align-items: center;\n          height: 100%;\n        }\n        .value {\n          width: 100%;\n          display: flex;\n          flex-direction: column;\n          align-items: center;\n        }\n        img {\n          max-width: 100%;\n          max-height: 200px;\n          margin-bottom: 4px;\n          border-radius: var(--file-upload-image-border-radius);\n        }\n      "])))]}}]}}),v.WF)},10377:function(e,n,i){i.d(n,{Q0:function(){return o},fO:function(){return r},mF:function(){return l}});var t=i(94881),a=i(1781),r=(i(27934),i(77052),i(75658),i(848),i(43859),i(97754),"/api/image/serve/"),o=function(e,n){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!i&&!n)throw new Error("Size must be provided if original is false");return i?"/api/image/serve/".concat(e,"/original"):"/api/image/serve/".concat(e,"/").concat(n,"x").concat(n)},l=function(){var e=(0,a.A)((0,t.A)().mark((function e(n,i){var a,r;return(0,t.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a=new FormData).append("file",i),e.next=4,n.fetchWithAuth("/api/image/upload",{method:"POST",body:a});case 4:if(413!==(r=e.sent).status){e.next=9;break}throw new Error("Uploaded image is too large (".concat(i.name,")"));case 9:if(200===r.status){e.next=11;break}throw new Error("Unknown error");case 11:return e.abrupt("return",r.json());case 12:case"end":return e.stop()}}),e)})));return function(n,i){return e.apply(this,arguments)}}()}}]);