"use strict";(self.webpackChunkknx_frontend=self.webpackChunkknx_frontend||[]).push([[9168],{9168:function(n,e,t){t.r(e),t.d(e,{DialogVoiceAssistantPipelineDetail:function(){return xn}});var i,a,s,r,o,d,l,u,p,c,h,v,g,_,f,m,k,y,w,b,A,x,L,R,q,z,W,M,E,F,Z,C,O,T,j,P,D,S,H,I,U,N,V,K=t(6238),J=t(94881),Q=t(1781),$=t(36683),B=t(89231),G=t(29864),X=t(83647),Y=t(8364),nn=(t(77052),t(848),t(43859),t(68113),t(84368),t(66274),t(84531),t(34290),t(98597)),en=t(196),tn=t(33167),an=(t(66494),t(32714),t(93259),t(82286)),sn=t(43799),rn=t(45081),on=((0,Y.A)([(0,en.EM)("assist-pipeline-detail-config")],(function(n,e){var t,s=function(e){function t(){var e;(0,B.A)(this,t);for(var i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return e=(0,G.A)(this,t,[].concat(a)),n(e),e}return(0,X.A)(t,e),(0,$.A)(t)}(e);return{F:s,d:[{kind:"field",decorators:[(0,en.MZ)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,en.MZ)({attribute:!1})],key:"data",value:void 0},{kind:"field",decorators:[(0,en.MZ)({type:Array})],key:"supportedLanguages",value:void 0},{kind:"method",key:"focus",value:(t=(0,Q.A)((0,J.A)().mark((function n(){var e,t;return(0,J.A)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.updateComplete;case 2:null==(t=null===(e=this.renderRoot)||void 0===e?void 0:e.querySelector("ha-form"))||t.focus();case 4:case"end":return n.stop()}}),n,this)}))),function(){return t.apply(this,arguments)})},{kind:"field",key:"_schema",value:function(){return(0,rn.A)((function(n){return[{name:"",type:"grid",schema:[{name:"name",required:!0,selector:{text:{}}},n?{name:"language",required:!0,selector:{language:{languages:n}}}:{name:"",type:"constant"}]}]}))}},{kind:"field",key:"_computeLabel",value:function(){var n=this;return function(e){return e.name?n.hass.localize("ui.panel.config.voice_assistants.assistants.pipeline.detail.form.".concat(e.name)):""}}},{kind:"method",key:"render",value:function(){return(0,nn.qy)(i||(i=(0,K.A)(['\n      <div class="section">\n        <div class="intro">\n          <h3>\n            ',"\n          </h3>\n          <p>\n            ","\n          </p>\n        </div>\n        <ha-form\n          .schema=","\n          .data=","\n          .hass=","\n          .computeLabel=","\n        ></ha-form>\n      </div>\n    "])),this.hass.localize("ui.panel.config.voice_assistants.assistants.pipeline.detail.steps.config.title"),this.hass.localize("ui.panel.config.voice_assistants.assistants.pipeline.detail.steps.config.description"),this._schema(this.supportedLanguages),this.data,this.hass,this._computeLabel)}},{kind:"get",static:!0,key:"styles",value:function(){return(0,nn.AH)(a||(a=(0,K.A)(["\n      .section {\n        border: 1px solid var(--divider-color);\n        border-radius: 8px;\n        box-sizing: border-box;\n        padding: 16px;\n      }\n      .intro {\n        margin-bottom: 16px;\n      }\n      h3 {\n        font-weight: normal;\n        font-size: 22px;\n        line-height: 28px;\n        margin-top: 0;\n        margin-bottom: 4px;\n      }\n      p {\n        color: var(--secondary-text-color);\n        font-size: var(--mdc-typography-body2-font-size, 0.875rem);\n        margin-top: 0;\n        margin-bottom: 0;\n      }\n    "])))}}]}}),nn.WF),(0,Y.A)([(0,en.EM)("assist-pipeline-detail-conversation")],(function(n,e){var t=function(e){function t(){var e;(0,B.A)(this,t);for(var i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return e=(0,G.A)(this,t,[].concat(a)),n(e),e}return(0,X.A)(t,e),(0,$.A)(t)}(e);return{F:t,d:[{kind:"field",decorators:[(0,en.MZ)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,en.MZ)({attribute:!1})],key:"data",value:void 0},{kind:"field",decorators:[(0,en.wk)()],key:"_supportedLanguages",value:void 0},{kind:"field",key:"_schema",value:function(){return(0,rn.A)((function(n,e){return[{name:"",type:"grid",schema:[{name:"conversation_engine",required:!0,selector:{conversation_agent:{language:n}}},"*"!==e&&null!=e&&e.length?{name:"conversation_language",required:!0,selector:{language:{languages:e,no_sort:!0}}}:{name:"",type:"constant"}]}]}))}},{kind:"field",key:"_computeLabel",value:function(){var n=this;return function(e){return e.name?n.hass.localize("ui.panel.config.voice_assistants.assistants.pipeline.detail.form.".concat(e.name)):""}}},{kind:"method",key:"render",value:function(){var n;return(0,nn.qy)(s||(s=(0,K.A)(['\n      <div class="section">\n        <div class="intro">\n          <h3>\n            ',"\n          </h3>\n          <p>\n            ","\n          </p>\n        </div>\n        <ha-form\n          .schema=","\n          .data=","\n          .hass=","\n          .computeLabel=","\n          @supported-languages-changed=","\n        ></ha-form>\n      </div>\n    "])),this.hass.localize("ui.panel.config.voice_assistants.assistants.pipeline.detail.steps.conversation.title"),this.hass.localize("ui.panel.config.voice_assistants.assistants.pipeline.detail.steps.conversation.description"),this._schema(null===(n=this.data)||void 0===n?void 0:n.language,this._supportedLanguages),this.data,this.hass,this._computeLabel,this._supportedLanguagesChanged)}},{kind:"method",key:"_supportedLanguagesChanged",value:function(n){var e=this;"*"===n.detail.value&&setTimeout((function(){var n=Object.assign({},e.data);n.conversation_language="*",(0,tn.r)(e,"value-changed",{value:n})}),0),this._supportedLanguages=n.detail.value}},{kind:"get",static:!0,key:"styles",value:function(){return(0,nn.AH)(r||(r=(0,K.A)(["\n      .section {\n        border: 1px solid var(--divider-color);\n        border-radius: 8px;\n        box-sizing: border-box;\n        padding: 16px;\n      }\n      .intro {\n        margin-bottom: 16px;\n      }\n      h3 {\n        font-weight: normal;\n        font-size: 22px;\n        line-height: 28px;\n        margin-top: 0;\n        margin-bottom: 4px;\n      }\n      p {\n        color: var(--secondary-text-color);\n        font-size: var(--mdc-typography-body2-font-size, 0.875rem);\n        margin-top: 0;\n        margin-bottom: 0;\n      }\n    "])))}}]}}),nn.WF),(0,Y.A)([(0,en.EM)("assist-pipeline-detail-stt")],(function(n,e){var t=function(e){function t(){var e;(0,B.A)(this,t);for(var i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return e=(0,G.A)(this,t,[].concat(a)),n(e),e}return(0,X.A)(t,e),(0,$.A)(t)}(e);return{F:t,d:[{kind:"field",decorators:[(0,en.MZ)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,en.MZ)({attribute:!1})],key:"data",value:void 0},{kind:"field",decorators:[(0,en.wk)()],key:"_supportedLanguages",value:void 0},{kind:"field",key:"_schema",value:function(){return(0,rn.A)((function(n,e){return[{name:"",type:"grid",schema:[{name:"stt_engine",selector:{stt:{language:n}}},null!=e&&e.length?{name:"stt_language",required:!0,selector:{language:{languages:e,no_sort:!0}}}:{name:"",type:"constant"}]}]}))}},{kind:"field",key:"_computeLabel",value:function(){var n=this;return function(e){return e.name?n.hass.localize("ui.panel.config.voice_assistants.assistants.pipeline.detail.form.".concat(e.name)):""}}},{kind:"method",key:"render",value:function(){var n;return(0,nn.qy)(o||(o=(0,K.A)(['\n      <div class="section">\n        <div class="intro">\n          <h3>\n            ',"\n          </h3>\n          <p>\n            ","\n          </p>\n        </div>\n        <ha-form\n          .schema=","\n          .data=","\n          .hass=","\n          .computeLabel=","\n          @supported-languages-changed=","\n        ></ha-form>\n      </div>\n    "])),this.hass.localize("ui.panel.config.voice_assistants.assistants.pipeline.detail.steps.stt.title"),this.hass.localize("ui.panel.config.voice_assistants.assistants.pipeline.detail.steps.stt.description"),this._schema(null===(n=this.data)||void 0===n?void 0:n.language,this._supportedLanguages),this.data,this.hass,this._computeLabel,this._supportedLanguagesChanged)}},{kind:"method",key:"_supportedLanguagesChanged",value:function(n){this._supportedLanguages=n.detail.value}},{kind:"get",static:!0,key:"styles",value:function(){return(0,nn.AH)(d||(d=(0,K.A)(["\n      .section {\n        border: 1px solid var(--divider-color);\n        border-radius: 8px;\n        box-sizing: border-box;\n        padding: 16px;\n      }\n      .intro {\n        margin-bottom: 16px;\n      }\n      h3 {\n        font-weight: normal;\n        font-size: 22px;\n        line-height: 28px;\n        margin-top: 0;\n        margin-bottom: 4px;\n      }\n      p {\n        color: var(--secondary-text-color);\n        font-size: var(--mdc-typography-body2-font-size, 0.875rem);\n        margin-top: 0;\n        margin-bottom: 0;\n      }\n    "])))}}]}}),nn.WF),t(21950),t(55888),t(56262),t(8339),function(){return t.e(2527).then(t.bind(t,2527))}),dn=((0,Y.A)([(0,en.EM)("assist-pipeline-detail-tts")],(function(n,e){var t,i=function(e){function t(){var e;(0,B.A)(this,t);for(var i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return e=(0,G.A)(this,t,[].concat(a)),n(e),e}return(0,X.A)(t,e),(0,$.A)(t)}(e);return{F:i,d:[{kind:"field",decorators:[(0,en.MZ)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,en.MZ)({attribute:!1})],key:"data",value:void 0},{kind:"field",decorators:[(0,en.wk)()],key:"_supportedLanguages",value:void 0},{kind:"field",key:"_schema",value:function(){return(0,rn.A)((function(n,e){return[{name:"",type:"grid",schema:[{name:"tts_engine",selector:{tts:{language:n}}},null!=e&&e.length?{name:"tts_language",required:!0,selector:{language:{languages:e,no_sort:!0}}}:{name:"",type:"constant"},{name:"tts_voice",selector:{tts_voice:{}},context:{language:"tts_language",engineId:"tts_engine"},required:!0}]}]}))}},{kind:"field",key:"_computeLabel",value:function(){var n=this;return function(e){return e.name?n.hass.localize("ui.panel.config.voice_assistants.assistants.pipeline.detail.form.".concat(e.name)):""}}},{kind:"method",key:"render",value:function(){var n,e;return(0,nn.qy)(l||(l=(0,K.A)(['\n      <div class="section">\n        <div class="content">\n          <div class="intro">\n          <h3>\n            ',"\n          </h3>\n          <p>\n            ","\n          </p>\n          </div>\n          <ha-form\n            .schema=","\n            .data=","\n            .hass=","\n            .computeLabel=","\n            @supported-languages-changed=","\n          ></ha-form>\n        </div>\n\n       ","\n        </div>\n      </div>\n    "])),this.hass.localize("ui.panel.config.voice_assistants.assistants.pipeline.detail.steps.tts.title"),this.hass.localize("ui.panel.config.voice_assistants.assistants.pipeline.detail.steps.tts.description"),this._schema(null===(n=this.data)||void 0===n?void 0:n.language,this._supportedLanguages),this.data,this.hass,this._computeLabel,this._supportedLanguagesChanged,null!==(e=this.data)&&void 0!==e&&e.tts_engine?(0,nn.qy)(u||(u=(0,K.A)(['<div class="footer">\n               <ha-button\n                 .label=',"\n                 @click=","\n               >\n               </ha-button>\n             </div>"])),this.hass.localize("ui.panel.config.voice_assistants.assistants.pipeline.detail.try_tts"),this._preview):nn.s6)}},{kind:"method",key:"_preview",value:(t=(0,Q.A)((0,J.A)().mark((function n(){var e,t,i;return(0,J.A)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(this.data){n.next=2;break}return n.abrupt("return");case 2:if(e=this.data.tts_engine,t=this.data.tts_language||void 0,i=this.data.tts_voice||void 0,e){n.next=7;break}return n.abrupt("return");case 7:a=this,s={engine:e,language:t,voice:i},(0,tn.r)(a,"show-dialog",{addHistory:!1,dialogTag:"dialog-tts-try",dialogImport:on,dialogParams:s});case 8:case"end":return n.stop()}var a,s}),n,this)}))),function(){return t.apply(this,arguments)})},{kind:"method",key:"_supportedLanguagesChanged",value:function(n){this._supportedLanguages=n.detail.value}},{kind:"get",static:!0,key:"styles",value:function(){return(0,nn.AH)(p||(p=(0,K.A)(["\n      .section {\n        border: 1px solid var(--divider-color);\n        border-radius: 8px;\n      }\n      .content {\n        padding: 16px;\n      }\n      .intro {\n        margin-bottom: 16px;\n      }\n      h3 {\n        font-weight: normal;\n        font-size: 22px;\n        line-height: 28px;\n        margin-top: 0;\n        margin-bottom: 4px;\n      }\n      p {\n        color: var(--secondary-text-color);\n        font-size: var(--mdc-typography-body2-font-size, 0.875rem);\n        margin-top: 0;\n        margin-bottom: 0;\n      }\n      .footer {\n        border-top: 1px solid var(--divider-color);\n        padding: 8px 16px;\n      }\n    "])))}}]}}),nn.WF),t(36724),t(1158),t(97754),t(98168),t(22836),t(31750)),ln=((0,Y.A)([(0,en.EM)("assist-pipeline-detail-wakeword")],(function(n,e){var t,i=function(e){function t(){var e;(0,B.A)(this,t);for(var i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return e=(0,G.A)(this,t,[].concat(a)),n(e),e}return(0,X.A)(t,e),(0,$.A)(t)}(e);return{F:i,d:[{kind:"field",decorators:[(0,en.MZ)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,en.MZ)({attribute:!1})],key:"data",value:void 0},{kind:"field",decorators:[(0,en.wk)()],key:"_wakeWords",value:void 0},{kind:"field",key:"_schema",value:function(){return(0,rn.A)((function(n){return[{name:"",type:"grid",schema:[{name:"wake_word_entity",selector:{entity:{domain:"wake_word"}}},null!=n&&n.length?{name:"wake_word_id",required:!0,selector:{select:{mode:"dropdown",sort:!0,options:n.map((function(n){return{value:n.id,label:n.name}}))}}}:{name:"",type:"constant"}]}]}))}},{kind:"field",key:"_computeLabel",value:function(){var n=this;return function(e){return e.name?n.hass.localize("ui.panel.config.voice_assistants.assistants.pipeline.detail.form.".concat(e.name)):""}}},{kind:"method",key:"willUpdate",value:function(n){var e,t,i,a;n.has("data")&&(null===(e=n.get("data"))||void 0===e?void 0:e.wake_word_entity)!==(null===(t=this.data)||void 0===t?void 0:t.wake_word_entity)&&(null!==(i=n.get("data"))&&void 0!==i&&i.wake_word_entity&&null!==(a=this.data)&&void 0!==a&&a.wake_word_id&&(0,tn.r)(this,"value-changed",{value:Object.assign(Object.assign({},this.data),{},{wake_word_id:void 0})}),this._fetchWakeWords())}},{kind:"field",key:"_hasWakeWorkEntities",value:function(){return(0,rn.A)((function(n){return Object.keys(n).some((function(n){return n.startsWith("wake_word.")}))}))}},{kind:"method",key:"render",value:function(){var n=this._hasWakeWorkEntities(this.hass.states);return(0,nn.qy)(c||(c=(0,K.A)(['\n      <div class="section">\n        <div class="content">\n          <div class="intro">\n            <h3>\n              ',"\n            </h3>\n            <p>\n              ","\n            </p>\n          </div>\n          ","\n          <ha-form\n            .schema=","\n            .data=","\n            .hass=","\n            .computeLabel=","\n            .disabled=","\n          ></ha-form>\n        </div>\n      </div>\n    "])),this.hass.localize("ui.panel.config.voice_assistants.assistants.pipeline.detail.steps.wakeword.title"),this.hass.localize("ui.panel.config.voice_assistants.assistants.pipeline.detail.steps.wakeword.description"),n?nn.s6:(0,nn.qy)(h||(h=(0,K.A)(["","\n                <a\n                  href=",'\n                  target="_blank"\n                  rel="noreferrer noopener"\n                  >',"</a\n                >"])),this.hass.localize("ui.panel.config.voice_assistants.assistants.pipeline.detail.steps.wakeword.no_wake_words"),(0,dn.o)(this.hass,"/voice_control/install_wake_word_add_on/"),this.hass.localize("ui.panel.config.voice_assistants.assistants.pipeline.detail.steps.wakeword.no_wake_words_link")),this._schema(this._wakeWords),this.data,this.hass,this._computeLabel,!n)}},{kind:"method",key:"_fetchWakeWords",value:(t=(0,Q.A)((0,J.A)().mark((function n(){var e,t,i,a,s,r=this;return(0,J.A)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(this._wakeWords=void 0,null!==(e=this.data)&&void 0!==e&&e.wake_word_entity){n.next=3;break}return n.abrupt("return");case 3:return i=this.data.wake_word_entity,n.next=6,o=this.hass,d=i,o.callWS({type:"wake_word/info",entity_id:d});case 6:if(a=n.sent,this.data.wake_word_entity===i){n.next=9;break}return n.abrupt("return");case 9:this._wakeWords=a.wake_words,!this.data||null!==(t=this.data)&&void 0!==t&&t.wake_word_id&&this._wakeWords.some((function(n){return n.id===r.data.wake_word_id}))||(0,tn.r)(this,"value-changed",{value:Object.assign(Object.assign({},this.data),{},{wake_word_id:null===(s=this._wakeWords[0])||void 0===s?void 0:s.id})});case 11:case"end":return n.stop()}var o,d}),n,this)}))),function(){return t.apply(this,arguments)})},{kind:"get",static:!0,key:"styles",value:function(){return(0,nn.AH)(v||(v=(0,K.A)(["\n      .section {\n        border: 1px solid var(--divider-color);\n        border-radius: 8px;\n      }\n      .content {\n        padding: 16px;\n      }\n      .intro {\n        margin-bottom: 16px;\n      }\n      h3 {\n        font-weight: normal;\n        font-size: 22px;\n        line-height: 28px;\n        margin-top: 0;\n        margin-bottom: 4px;\n      }\n      p {\n        color: var(--secondary-text-color);\n        font-size: var(--mdc-typography-body2-font-size, 0.875rem);\n        margin-top: 0;\n        margin-bottom: 0;\n      }\n      a {\n        color: var(--primary-color);\n      }\n    "])))}}]}}),nn.WF),t(59092),t(22481)),un=(t(4187),t(71936),t(21968),t(85767),t(94392),t(91074),t(73279),t(91686),t(17963)),pn=(t(42459),t(31447)),cn={pipeline:"Pipeline",language:"Language"},hn={engine:"Engine"},vn={engine:"Engine"},gn={engine:"Engine",language:"Language",intent_input:"Input"},_n={engine:"Engine",language:"Language",voice:"Voice",tts_input:"Input"},fn={ready:0,wake_word:1,stt:2,intent:3,tts:4,done:5,error:6},mn=function(n,e){return n.init_options?fn[n.init_options.start_stage]<=fn[e]&&fn[e]<=fn[n.init_options.end_stage]:e in n},kn=function(n,e,t){return"error"in n&&t===e?(0,nn.qy)(g||(g=(0,K.A)(['\n    <ha-alert alert-type="error">\n      '," (",")\n    </ha-alert>\n  "])),n.error.message,n.error.code):""},yn=function(n,e,t){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"-start",a=e.events.find((function(n){return n.type==="".concat(t)+i})),s=e.events.find((function(n){return n.type==="".concat(t,"-end")}));if(!a)return"";if(!s)return"error"in e?(0,nn.qy)(_||(_=(0,K.A)(["❌"]))):(0,nn.qy)(f||(f=(0,K.A)(['\n      <ha-circular-progress size="small" indeterminate></ha-circular-progress>\n    '])));var r=new Date(s.timestamp).getTime()-new Date(a.timestamp).getTime(),o=(0,un.ZV)(r/1e3,n.locale,{maximumFractionDigits:2});return(0,nn.qy)(m||(m=(0,K.A)(["","s ✅"])),o)},wn=function(n,e){return Object.entries(e).map((function(e){var t=(0,ln.A)(e,2),i=t[0],a=t[1];return(0,nn.qy)(k||(k=(0,K.A)(['\n      <div class="row">\n        <div>',"</div>\n        <div>","</div>\n      </div>\n    "])),a,n[i])}))},bn=function(n,e){var t={},i=!1;for(var a in n)a in e||"done"===a||(i=!0,t[a]=n[a]);return i?(0,nn.qy)(y||(y=(0,K.A)(['<ha-expansion-panel>\n        <span slot="header">Raw</span>\n        <ha-yaml-editor readOnly autoUpdate .value=',"></ha-yaml-editor>\n      </ha-expansion-panel>"])),t):""},An=((0,Y.A)([(0,en.EM)("assist-render-pipeline-run")],(function(n,e){var t=function(e){function t(){var e;(0,B.A)(this,t);for(var i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return e=(0,G.A)(this,t,[].concat(a)),n(e),e}return(0,X.A)(t,e),(0,$.A)(t)}(e);return{F:t,d:[{kind:"field",decorators:[(0,en.MZ)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,en.MZ)({attribute:!1})],key:"pipelineRun",value:void 0},{kind:"method",key:"render",value:function(){var n,e,t,i,a=this,s=this.pipelineRun&&["tts","intent","stt","wake_word"].find((function(n){return n in a.pipelineRun}))||"ready",r=[],o=(this.pipelineRun.init_options&&"text"in this.pipelineRun.init_options.input?this.pipelineRun.init_options.input.text:void 0)||(null===(n=this.pipelineRun)||void 0===n||null===(n=n.stt)||void 0===n||null===(n=n.stt_output)||void 0===n?void 0:n.text)||(null===(e=this.pipelineRun)||void 0===e||null===(e=e.intent)||void 0===e?void 0:e.intent_input);return o&&r.push({from:"user",text:o}),null!==(t=this.pipelineRun)&&void 0!==t&&null!==(t=t.intent)&&void 0!==t&&null!==(t=t.intent_output)&&void 0!==t&&null!==(t=t.response)&&void 0!==t&&null!==(t=t.speech)&&void 0!==t&&null!==(t=t.plain)&&void 0!==t&&t.speech&&r.push({from:"hass",text:this.pipelineRun.intent.intent_output.response.speech.plain.speech}),(0,nn.qy)(w||(w=(0,K.A)(['\n      <ha-card>\n        <div class="card-content">\n          <div class="row heading">\n            <div>Run</div>\n            <div>',"</div>\n          </div>\n\n          ","\n          ","\n        </div>\n      </ha-card>\n\n      ","\n      ","\n      ","\n      ","\n      ","\n      ","\n      ","\n      ","\n      ",'\n      <ha-card>\n        <ha-expansion-panel>\n          <span slot="header">Raw</span>\n          <ha-yaml-editor\n            readOnly\n            autoUpdate\n            .value=',"\n          ></ha-yaml-editor>\n        </ha-expansion-panel>\n      </ha-card>\n    "])),this.pipelineRun.stage,wn(this.pipelineRun.run,cn),r.length>0?(0,nn.qy)(b||(b=(0,K.A)(['\n                <div class="messages">\n                  ','\n                </div>\n                <div style="clear:both"></div>\n              '])),r.map((function(n){var e=n.from,t=n.text;return(0,nn.qy)(A||(A=(0,K.A)(["\n                      <div class=",">","</div>\n                    "])),"message ".concat(e),t)}))):"",kn(this.pipelineRun,"ready",s),mn(this.pipelineRun,"wake_word")?(0,nn.qy)(x||(x=(0,K.A)(['\n            <ha-card>\n              <div class="card-content">\n                <div class="row heading">\n                  <span>Wake word</span>\n                  ',"\n                </div>\n                ","\n              </div>\n            </ha-card>\n          "])),yn(this.hass,this.pipelineRun,"wake_word"),this.pipelineRun.wake_word?(0,nn.qy)(L||(L=(0,K.A)(['\n                      <div class="card-content">\n                        ',"\n                        ","\n                        ","\n                      </div>\n                    "])),wn(this.pipelineRun.wake_word,vn),this.pipelineRun.wake_word.wake_word_output?(0,nn.qy)(R||(R=(0,K.A)(['<div class="row">\n                                <div>Model</div>\n                                <div>\n                                  ','\n                                </div>\n                              </div>\n                              <div class="row">\n                                <div>Timestamp</div>\n                                <div>\n                                  ',"\n                                </div>\n                              </div>"])),this.pipelineRun.wake_word.wake_word_output.ww_id,this.pipelineRun.wake_word.wake_word_output.timestamp):"",bn(this.pipelineRun.wake_word,hn)):""):"",kn(this.pipelineRun,"wake_word",s),mn(this.pipelineRun,"stt")?(0,nn.qy)(q||(q=(0,K.A)(['\n            <ha-card>\n              <div class="card-content">\n                <div class="row heading">\n                  <span>Speech-to-text</span>\n                  ',"\n                </div>\n                ","\n              </div>\n            </ha-card>\n          "])),yn(this.hass,this.pipelineRun,"stt","-vad-end"),this.pipelineRun.stt?(0,nn.qy)(z||(z=(0,K.A)(['\n                      <div class="card-content">\n                        ','\n                        <div class="row">\n                          <div>Language</div>\n                          <div>',"</div>\n                        </div>\n                        ","\n                        ","\n                      </div>\n                    "])),wn(this.pipelineRun.stt,vn),this.pipelineRun.stt.metadata.language,this.pipelineRun.stt.stt_output?(0,nn.qy)(W||(W=(0,K.A)(['<div class="row">\n                              <div>Output</div>\n                              <div>',"</div>\n                            </div>"])),this.pipelineRun.stt.stt_output.text):"",bn(this.pipelineRun.stt,vn)):""):"",kn(this.pipelineRun,"stt",s),mn(this.pipelineRun,"intent")?(0,nn.qy)(M||(M=(0,K.A)(['\n            <ha-card>\n              <div class="card-content">\n                <div class="row heading">\n                  <span>Natural Language Processing</span>\n                  ',"\n                </div>\n                ","\n              </div>\n            </ha-card>\n          "])),yn(this.hass,this.pipelineRun,"intent"),this.pipelineRun.intent?(0,nn.qy)(E||(E=(0,K.A)(['\n                      <div class="card-content">\n                        ',"\n                        ","\n                        ","\n                      </div>\n                    "])),wn(this.pipelineRun.intent,gn),this.pipelineRun.intent.intent_output?(0,nn.qy)(F||(F=(0,K.A)(['<div class="row">\n                                <div>Response type</div>\n                                <div>\n                                  ',"\n                                </div>\n                              </div>\n                              ",""])),this.pipelineRun.intent.intent_output.response.response_type,"error"===this.pipelineRun.intent.intent_output.response.response_type?(0,nn.qy)(Z||(Z=(0,K.A)(['<div class="row">\n                                    <div>Error code</div>\n                                    <div>\n                                      ',"\n                                    </div>\n                                  </div>"])),this.pipelineRun.intent.intent_output.response.data.code):""):"",bn(this.pipelineRun.intent,gn)):""):"",kn(this.pipelineRun,"intent",s),mn(this.pipelineRun,"tts")?(0,nn.qy)(C||(C=(0,K.A)(['\n            <ha-card>\n              <div class="card-content">\n                <div class="row heading">\n                  <span>Text-to-speech</span>\n                  ',"\n                </div>\n                ","\n              </div>\n              ","\n            </ha-card>\n          "])),yn(this.hass,this.pipelineRun,"tts"),this.pipelineRun.tts?(0,nn.qy)(O||(O=(0,K.A)(['\n                      <div class="card-content">\n                        ',"\n                        ","\n                      </div>\n                    "])),wn(this.pipelineRun.tts,_n),bn(this.pipelineRun.tts,_n)):"",null!==(i=this.pipelineRun)&&void 0!==i&&null!==(i=i.tts)&&void 0!==i&&i.tts_output?(0,nn.qy)(T||(T=(0,K.A)(['\n                    <div class="card-actions">\n                      <ha-button @click=',">\n                        Play Audio\n                      </ha-button>\n                    </div>\n                  "])),this._playTTS):""):"",kn(this.pipelineRun,"tts",s),this.pipelineRun)}},{kind:"method",key:"_playTTS",value:function(){var n=this,e=this.pipelineRun.tts.tts_output.url,t=new Audio(e);t.addEventListener("error",(function(){(0,pn.K$)(n,{title:"Error",text:"Error playing audio"})})),t.addEventListener("canplaythrough",(function(){t.play()}))}},{kind:"field",static:!0,key:"styles",value:function(){return(0,nn.AH)(j||(j=(0,K.A)(["\n    :host {\n      display: block;\n    }\n    ha-card,\n    ha-alert {\n      display: block;\n      margin-bottom: 16px;\n    }\n    .row {\n      display: flex;\n      justify-content: space-between;\n    }\n    .row > div:last-child {\n      text-align: right;\n    }\n    ha-expansion-panel {\n      padding-left: 8px;\n      padding-inline-start: 8px;\n      padding-inline-end: initial;\n    }\n    .card-content ha-expansion-panel {\n      padding-left: 0px;\n      padding-inline-start: 0px;\n      padding-inline-end: initial;\n      --expansion-panel-summary-padding: 0px;\n      --expansion-panel-content-padding: 0px;\n    }\n    .heading {\n      font-weight: 500;\n      margin-bottom: 16px;\n    }\n\n    .messages {\n      margin-top: 8px;\n    }\n\n    .message {\n      font-size: 18px;\n      margin: 8px 0;\n      padding: 8px;\n      border-radius: 15px;\n      clear: both;\n    }\n\n    .message.user {\n      margin-left: 24px;\n      margin-inline-start: 24px;\n      margin-inline-end: initial;\n      float: var(--float-end);\n      text-align: right;\n      border-bottom-right-radius: 0px;\n      background-color: var(--light-primary-color);\n      color: var(--text-light-primary-color, var(--primary-text-color));\n      direction: var(--direction);\n    }\n\n    .message.hass {\n      margin-right: 24px;\n      margin-inline-end: 24px;\n      margin-inline-start: initial;\n      float: var(--float-start);\n      border-bottom-left-radius: 0px;\n      background-color: var(--primary-color);\n      color: var(--text-primary-color);\n      direction: var(--direction);\n    }\n  "])))}}]}}),nn.WF),(0,Y.A)([(0,en.EM)("assist-render-pipeline-events")],(function(n,e){var t=function(e){function t(){var e;(0,B.A)(this,t);for(var i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return e=(0,G.A)(this,t,[].concat(a)),n(e),e}return(0,X.A)(t,e),(0,$.A)(t)}(e);return{F:t,d:[{kind:"field",decorators:[(0,en.MZ)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,en.MZ)({attribute:!1})],key:"events",value:void 0},{kind:"field",key:"_processEvents",value:function(){return(0,rn.A)((function(n){var e;return n.forEach((function(n){e=(0,an.QC)(e,n)})),e}))}},{kind:"method",key:"render",value:function(){var n=this._processEvents(this.events);return n?(0,nn.qy)(S||(S=(0,K.A)(["\n      <assist-render-pipeline-run\n        .hass=","\n        .pipelineRun=","\n      ></assist-render-pipeline-run>\n    "])),this.hass,n):this.events.length?(0,nn.qy)(P||(P=(0,K.A)(['<ha-alert alert-type="error">Error showing run</ha-alert>\n          <ha-card>\n            <ha-expansion-panel>\n              <span slot="header">Raw</span>\n              <pre>',"</pre>\n            </ha-expansion-panel>\n          </ha-card>"])),JSON.stringify(this.events,null,2)):(0,nn.qy)(D||(D=(0,K.A)(['<ha-alert alert-type="warning"\n        >There were no events in this run.</ha-alert\n      >'])))}}]}}),nn.WF),t(19263)),xn=(0,Y.A)([(0,en.EM)("dialog-voice-assistant-pipeline-detail")],(function(n,e){var t,i,a=function(e){function t(){var e;(0,B.A)(this,t);for(var i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return e=(0,G.A)(this,t,[].concat(a)),n(e),e}return(0,X.A)(t,e),(0,$.A)(t)}(e);return{F:a,d:[{kind:"field",decorators:[(0,en.MZ)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,en.wk)()],key:"_params",value:void 0},{kind:"field",decorators:[(0,en.wk)()],key:"_data",value:void 0},{kind:"field",decorators:[(0,en.wk)()],key:"_cloudActive",value:void 0},{kind:"field",decorators:[(0,en.wk)()],key:"_error",value:void 0},{kind:"field",decorators:[(0,en.wk)()],key:"_submitting",value:function(){return!1}},{kind:"field",decorators:[(0,en.wk)()],key:"_supportedLanguages",value:void 0},{kind:"method",key:"showDialog",value:function(n){if(this._params=n,this._error=void 0,this._cloudActive=this._params.cloudActiveSubscription,this._params.pipeline)this._data=this._params.pipeline;else{var e,t;if(this._cloudActive)for(var i=0,a=Object.values(this.hass.entities);i<a.length;i++){var s=a[i];if("cloud"===s.platform)if("stt"===(0,An.m)(s.entity_id)){if(e=s.entity_id,t)break}else if("tts"===(0,An.m)(s.entity_id)&&(t=s.entity_id,e))break}this._data={language:(this.hass.config.language||this.hass.locale.language).substring(0,2),stt_engine:e,tts_engine:t}}}},{kind:"method",key:"closeDialog",value:function(){this._params=void 0,this._data=void 0,(0,tn.r)(this,"dialog-closed",{dialog:this.localName})}},{kind:"method",key:"firstUpdated",value:function(){this._getSupportedLanguages()}},{kind:"method",key:"_getSupportedLanguages",value:(i=(0,Q.A)((0,J.A)().mark((function n(){var e,t;return(0,J.A)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,an.ds)(this.hass);case 2:e=n.sent,t=e.languages,this._supportedLanguages=t;case 5:case"end":return n.stop()}}),n,this)}))),function(){return i.apply(this,arguments)})},{kind:"method",key:"render",value:function(){var n,e,t;if(!this._params||!this._data)return nn.s6;var i=null!==(n=this._params.pipeline)&&void 0!==n&&n.id?this._params.pipeline.name:this.hass.localize("ui.panel.config.voice_assistants.assistants.pipeline.detail.add_assistant_title");return(0,nn.qy)(H||(H=(0,K.A)(["\n      <ha-dialog\n        open\n        @closed=","\n        scrimClickAction\n        escapeKeyAction\n        .heading=",'\n      >\n        <ha-dialog-header slot="heading">\n          <ha-icon-button\n            slot="navigationIcon"\n            dialogAction="cancel"\n            .label=',"\n            .path=",'\n          ></ha-icon-button>\n          <span slot="title" .title=',">",'</span>\n        </ha-dialog-header>\n        <div class="content">\n          ',"\n          <assist-pipeline-detail-config\n            .hass=","\n            .data=","\n            .supportedLanguages=",'\n            keys="name,language"\n            @value-changed=',"\n            ?dialogInitialFocus=","\n          ></assist-pipeline-detail-config>\n          <assist-pipeline-detail-conversation\n            .hass=","\n            .data=",'\n            keys="conversation_engine,conversation_language"\n            @value-changed=',"\n          ></assist-pipeline-detail-conversation>\n          ","\n          <assist-pipeline-detail-stt\n            .hass=","\n            .data=",'\n            keys="stt_engine,stt_language"\n            @value-changed=',"\n          ></assist-pipeline-detail-stt>\n          <assist-pipeline-detail-tts\n            .hass=","\n            .data=",'\n            keys="tts_engine,tts_language,tts_voice"\n            @value-changed=',"\n          ></assist-pipeline-detail-tts>\n          ",'\n        </div>\n        <ha-button\n          slot="primaryAction"\n          @click=',"\n          .disabled=","\n          dialogInitialFocus\n        >\n          ","\n        </ha-button>\n      </ha-dialog>\n    "])),this.closeDialog,i,this.hass.localize("ui.common.close"),"M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z",i,i,this._error?(0,nn.qy)(I||(I=(0,K.A)(['<ha-alert alert-type="error">',"</ha-alert>"])),this._error):nn.s6,this.hass,this._data,this._supportedLanguages,this._valueChanged,!(null!==(e=this._params.pipeline)&&void 0!==e&&e.id),this.hass,this._data,this._valueChanged,this._cloudActive||"cloud"!==this._data.tts_engine&&"cloud"!==this._data.stt_engine?nn.s6:(0,nn.qy)(U||(U=(0,K.A)(['\n                <ha-alert alert-type="warning">\n                  ','\n                  <a\n                    href="/config/cloud"\n                    slot="action"\n                    @click=',"\n                  >\n                    <ha-button>\n                      ","\n                    </ha-button>\n                  </a>\n                </ha-alert>\n              "])),this.hass.localize("ui.panel.config.voice_assistants.assistants.pipeline.detail.no_cloud_message"),this.closeDialog,this.hass.localize("ui.panel.config.voice_assistants.assistants.pipeline.detail.no_cloud_action")),this.hass,this._data,this._valueChanged,this.hass,this._data,this._valueChanged,this._params.hideWakeWord?nn.s6:(0,nn.qy)(N||(N=(0,K.A)(["<assist-pipeline-detail-wakeword\n                .hass=","\n                .data=",'\n                keys="wake_word_entity,wake_word_id"\n                @value-changed=',"\n              ></assist-pipeline-detail-wakeword>"])),this.hass,this._data,this._valueChanged),this._updatePipeline,this._submitting,null!==(t=this._params.pipeline)&&void 0!==t&&t.id?this.hass.localize("ui.panel.config.voice_assistants.assistants.pipeline.detail.update_assistant_action"):this.hass.localize("ui.panel.config.voice_assistants.assistants.pipeline.detail.add_assistant_action"))}},{kind:"method",key:"_valueChanged",value:function(n){this._error=void 0;var e={};n.currentTarget.getAttribute("keys").split(",").forEach((function(t){e[t]=n.detail.value[t]})),this._data=Object.assign(Object.assign({},this._data),e)}},{kind:"method",key:"_updatePipeline",value:(t=(0,Q.A)((0,J.A)().mark((function n(){var e,t,i,a,s,r,o,d,l,u,p;return(0,J.A)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(this._submitting=!0,n.prev=1,u=this._data,p={name:u.name,language:u.language,conversation_engine:u.conversation_engine,conversation_language:null!==(e=u.conversation_language)&&void 0!==e?e:null,stt_engine:null!==(t=u.stt_engine)&&void 0!==t?t:null,stt_language:null!==(i=u.stt_language)&&void 0!==i?i:null,tts_engine:null!==(a=u.tts_engine)&&void 0!==a?a:null,tts_language:null!==(s=u.tts_language)&&void 0!==s?s:null,tts_voice:null!==(r=u.tts_voice)&&void 0!==r?r:null,wake_word_entity:null!==(o=u.wake_word_entity)&&void 0!==o?o:null,wake_word_id:null!==(d=u.wake_word_id)&&void 0!==d?d:null},null===(l=this._params.pipeline)||void 0===l||!l.id){n.next=9;break}return n.next=7,this._params.updatePipeline(p);case 7:n.next=15;break;case 9:if(!this._params.createPipeline){n.next=14;break}return n.next=12,this._params.createPipeline(p);case 12:n.next=15;break;case 14:console.error("No createPipeline function provided");case 15:this.closeDialog(),n.next=21;break;case 18:n.prev=18,n.t0=n.catch(1),this._error=(null===n.t0||void 0===n.t0?void 0:n.t0.message)||"Unknown error";case 21:return n.prev=21,this._submitting=!1,n.finish(21);case 24:case"end":return n.stop()}}),n,this,[[1,18,21,24]])}))),function(){return t.apply(this,arguments)})},{kind:"get",static:!0,key:"styles",value:function(){return[sn.nA,(0,nn.AH)(V||(V=(0,K.A)(["\n        .content > *:not(:last-child) {\n          margin-bottom: 16px;\n          display: block;\n        }\n        ha-alert {\n          margin-bottom: 16px;\n          display: block;\n        }\n        a {\n          text-decoration: none;\n        }\n      "])))]}}]}}),nn.WF)}}]);