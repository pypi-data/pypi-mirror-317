"use strict";(self.webpackChunkknx_frontend=self.webpackChunkknx_frontend||[]).push([[582],{80106:function(e,n,i){i.d(n,{d:function(){return t}});var t=function(e){switch(e.language){case"cz":case"de":case"fi":case"fr":case"sk":case"sv":return" ";default:return""}}},96287:function(e,n,i){var t,a,r,o,l,s,d,c,u=i(6238),h=i(36683),p=i(89231),v=i(29864),f=i(83647),k=i(8364),g=i(27526),y=(i(77052),i(35848),i(36724),i(848),i(650),i(68113),i(58971),i(56262),i(98168),i(8774),i(98597)),m=i(196),b=i(69760),_=i(33167),A=(i(66494),i(96396),i(80106)),x=i(96041),w=(i(86150),i(86245),"M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19Z"),M="M14,2H6A2,2 0 0,0 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2M13.5,16V19H10.5V16H8L12,12L16,16H13.5M13,9V3.5L18.5,9H13Z";(0,k.A)([(0,m.EM)("ha-file-upload")],(function(e,n){var i=function(n){function i(){var n;(0,p.A)(this,i);for(var t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];return n=(0,v.A)(this,i,[].concat(a)),e(n),n}return(0,f.A)(i,n),(0,h.A)(i)}(n);return{F:i,d:[{kind:"field",decorators:[(0,m.MZ)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,m.MZ)()],key:"accept",value:void 0},{kind:"field",decorators:[(0,m.MZ)()],key:"icon",value:void 0},{kind:"field",decorators:[(0,m.MZ)()],key:"label",value:void 0},{kind:"field",decorators:[(0,m.MZ)()],key:"secondary",value:void 0},{kind:"field",decorators:[(0,m.MZ)()],key:"supports",value:void 0},{kind:"field",decorators:[(0,m.MZ)({type:Object})],key:"value",value:void 0},{kind:"field",decorators:[(0,m.MZ)({type:Boolean})],key:"multiple",value:function(){return!1}},{kind:"field",decorators:[(0,m.MZ)({type:Boolean,reflect:!0})],key:"disabled",value:function(){return!1}},{kind:"field",decorators:[(0,m.MZ)({type:Boolean})],key:"uploading",value:function(){return!1}},{kind:"field",decorators:[(0,m.MZ)({type:Number})],key:"progress",value:void 0},{kind:"field",decorators:[(0,m.MZ)({type:Boolean,attribute:"auto-open-file-dialog"})],key:"autoOpenFileDialog",value:function(){return!1}},{kind:"field",decorators:[(0,m.wk)()],key:"_drag",value:function(){return!1}},{kind:"field",decorators:[(0,m.P)("#input")],key:"_input",value:void 0},{kind:"method",key:"firstUpdated",value:function(e){(0,g.A)(i,"firstUpdated",this,3)([e]),this.autoOpenFileDialog&&this._openFilePicker()}},{kind:"method",key:"render",value:function(){var e,n,i,c,h,p=this;return(0,y.qy)(t||(t=(0,u.A)(["\n      ","\n    "])),this.uploading?(0,y.qy)(a||(a=(0,u.A)(['<div class="container">\n            <div class="row">\n              <span class="header"\n                >',"</span\n              >\n              ","\n            </div>\n            <mwc-linear-progress\n              .indeterminate=","\n              .progress=","\n            ></mwc-linear-progress>\n          </div>"])),this.value?null===(e=this.hass)||void 0===e?void 0:e.localize("ui.components.file-upload.uploading_name",{name:this.value.toString()}):null===(n=this.hass)||void 0===n?void 0:n.localize("ui.components.file-upload.uploading"),this.progress?(0,y.qy)(r||(r=(0,u.A)(['<span class="progress"\n                    >',"","%</span\n                  >"])),this.progress,(0,A.d)(this.hass.locale)):"",!this.progress,this.progress?this.progress/100:void 0):(0,y.qy)(o||(o=(0,u.A)(["<label\n            for=",'\n            class="container ','"\n            @drop=',"\n            @dragenter=","\n            @dragover=","\n            @dragleave=","\n            @dragend=","\n            >",'\n            <input\n              id="input"\n              type="file"\n              class="file"\n              .accept=',"\n              .multiple=","\n              @change=","\n          /></label>"])),this.value?"":"input",(0,b.H)({dragged:this._drag,multiple:this.multiple,value:Boolean(this.value)}),this._handleDrop,this._handleDragStart,this._handleDragStart,this._handleDragEnd,this._handleDragEnd,this.value?"string"==typeof this.value?(0,y.qy)(s||(s=(0,u.A)(['<div class="row">\n                    <div class="value" @click=',">\n                      <ha-svg-icon\n                        .path=","\n                      ></ha-svg-icon>\n                      ","\n                    </div>\n                    <ha-icon-button\n                      @click=","\n                      .label=","\n                      .path=","\n                    ></ha-icon-button>\n                  </div>"])),this._openFilePicker,this.icon||M,this.value,this._clearValue,(null===(h=this.hass)||void 0===h?void 0:h.localize("ui.common.delete"))||"Delete",w):(this.value instanceof FileList?Array.from(this.value):(0,x.e)(this.value)).map((function(e){var n;return(0,y.qy)(d||(d=(0,u.A)(['<div class="row">\n                        <div class="value" @click=',">\n                          <ha-svg-icon\n                            .path=","\n                          ></ha-svg-icon>\n                          "," - ","\n                        </div>\n                        <ha-icon-button\n                          @click=","\n                          .label=","\n                          .path=","\n                        ></ha-icon-button>\n                      </div>"])),p._openFilePicker,p.icon||M,e.name,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;if(0===e)return"0 Bytes";n=n<0?0:n;var i=Math.floor(Math.log(e)/Math.log(1024));return"".concat(parseFloat((e/Math.pow(1024,i)).toFixed(n))," ").concat(["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"][i])}(e.size),p._clearValue,(null===(n=p.hass)||void 0===n?void 0:n.localize("ui.common.delete"))||"Delete",w)})):(0,y.qy)(l||(l=(0,u.A)(['<ha-svg-icon\n                    class="big-icon"\n                    .path=',"\n                  ></ha-svg-icon>\n                  <ha-button unelevated @click=",">\n                    ",'\n                  </ha-button>\n                  <span class="secondary"\n                    >','</span\n                  >\n                  <span class="supports">',"</span>"])),this.icon||M,this._openFilePicker,this.label||(null===(i=this.hass)||void 0===i?void 0:i.localize("ui.components.file-upload.label")),this.secondary||(null===(c=this.hass)||void 0===c?void 0:c.localize("ui.components.file-upload.secondary")),this.supports),this.accept,this.multiple,this._handleFilePicked))}},{kind:"method",key:"_openFilePicker",value:function(){var e;null===(e=this._input)||void 0===e||e.click()}},{kind:"method",key:"_handleDrop",value:function(e){var n;e.preventDefault(),e.stopPropagation(),null!==(n=e.dataTransfer)&&void 0!==n&&n.files&&(0,_.r)(this,"file-picked",{files:this.multiple||1===e.dataTransfer.files.length?Array.from(e.dataTransfer.files):[e.dataTransfer.files[0]]}),this._drag=!1}},{kind:"method",key:"_handleDragStart",value:function(e){e.preventDefault(),e.stopPropagation(),this._drag=!0}},{kind:"method",key:"_handleDragEnd",value:function(e){e.preventDefault(),e.stopPropagation(),this._drag=!1}},{kind:"method",key:"_handleFilePicked",value:function(e){0!==e.target.files.length&&(this.value=e.target.files,(0,_.r)(this,"file-picked",{files:e.target.files}))}},{kind:"method",key:"_clearValue",value:function(e){e.preventDefault(),this._input.value="",this.value=void 0,(0,_.r)(this,"change")}},{kind:"get",static:!0,key:"styles",value:function(){return(0,y.AH)(c||(c=(0,u.A)(['\n      :host {\n        display: block;\n        height: 240px;\n      }\n      :host([disabled]) {\n        pointer-events: none;\n        color: var(--disabled-text-color);\n      }\n      .container {\n        position: relative;\n        display: flex;\n        flex-direction: column;\n        justify-content: center;\n        align-items: center;\n        border: solid 1px\n          var(--mdc-text-field-idle-line-color, rgba(0, 0, 0, 0.42));\n        border-radius: var(--mdc-shape-small, 4px);\n        height: 100%;\n      }\n      label.container {\n        border: dashed 1px\n          var(--mdc-text-field-idle-line-color, rgba(0, 0, 0, 0.42));\n        cursor: pointer;\n      }\n      :host([disabled]) .container {\n        border-color: var(--disabled-color);\n      }\n      label.dragged {\n        border-color: var(--primary-color);\n      }\n      .dragged:before {\n        position: absolute;\n        top: 0;\n        right: 0;\n        bottom: 0;\n        left: 0;\n        background-color: var(--primary-color);\n        content: "";\n        opacity: var(--dark-divider-opacity);\n        pointer-events: none;\n        border-radius: var(--mdc-shape-small, 4px);\n      }\n      label.value {\n        cursor: default;\n      }\n      label.value.multiple {\n        justify-content: unset;\n        overflow: auto;\n      }\n      .highlight {\n        color: var(--primary-color);\n      }\n      .row {\n        display: flex;\n        width: 100%;\n        align-items: center;\n        justify-content: space-between;\n        padding: 0 16px;\n        box-sizing: border-box;\n      }\n      ha-button {\n        margin-bottom: 4px;\n      }\n      .supports {\n        color: var(--secondary-text-color);\n        font-size: 12px;\n      }\n      :host([disabled]) .secondary {\n        color: var(--disabled-text-color);\n      }\n      input.file {\n        display: none;\n      }\n      .value {\n        cursor: pointer;\n      }\n      .value ha-svg-icon {\n        margin-right: 8px;\n        margin-inline-end: 8px;\n        margin-inline-start: initial;\n      }\n      .big-icon {\n        --mdc-icon-size: 48px;\n        margin-bottom: 8px;\n      }\n      ha-button {\n        --mdc-button-outline-color: var(--primary-color);\n        --mdc-icon-button-size: 24px;\n      }\n      mwc-linear-progress {\n        width: 100%;\n        padding: 16px;\n        box-sizing: border-box;\n      }\n      .header {\n        font-weight: 500;\n      }\n      .progress {\n        color: var(--secondary-text-color);\n      }\n    '])))}}]}}),y.WF)},40582:function(e,n,i){i.r(n),i.d(n,{HaFileSelector:function(){return y}});var t,a=i(94881),r=i(1781),o=i(6238),l=i(36683),s=i(89231),d=i(29864),c=i(83647),u=i(8364),h=i(27526),p=(i(77052),i(848),i(98597)),v=i(196),f=i(33167),k=i(18966),g=i(31447),y=(i(96287),(0,u.A)([(0,v.EM)("ha-selector-file")],(function(e,n){var i,u=function(n){function i(){var n;(0,s.A)(this,i);for(var t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];return n=(0,d.A)(this,i,[].concat(a)),e(n),n}return(0,c.A)(i,n),(0,l.A)(i)}(n);return{F:u,d:[{kind:"field",decorators:[(0,v.MZ)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,v.MZ)({attribute:!1})],key:"selector",value:void 0},{kind:"field",decorators:[(0,v.MZ)()],key:"value",value:void 0},{kind:"field",decorators:[(0,v.MZ)()],key:"label",value:void 0},{kind:"field",decorators:[(0,v.MZ)()],key:"helper",value:void 0},{kind:"field",decorators:[(0,v.MZ)({type:Boolean})],key:"disabled",value:function(){return!1}},{kind:"field",decorators:[(0,v.MZ)({type:Boolean})],key:"required",value:function(){return!0}},{kind:"field",decorators:[(0,v.wk)()],key:"_filename",value:void 0},{kind:"field",decorators:[(0,v.wk)()],key:"_busy",value:function(){return!1}},{kind:"method",key:"render",value:function(){var e,n;return(0,p.qy)(t||(t=(0,o.A)(["\n      <ha-file-upload\n        .hass=","\n        .accept=","\n        .icon=","\n        .label=","\n        .required=","\n        .disabled=","\n        .supports=","\n        .uploading=","\n        .value=","\n        @file-picked=","\n        @change=","\n      ></ha-file-upload>\n    "])),this.hass,null===(e=this.selector.file)||void 0===e?void 0:e.accept,"M13,9V3.5L18.5,9M6,2C4.89,2 4,2.89 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2H6Z",this.label,this.required,this.disabled,this.helper,this._busy,this.value?(null===(n=this._filename)||void 0===n?void 0:n.name)||this.hass.localize("ui.components.selectors.file.unknown_file"):void 0,this._uploadFile,this._removeFile)}},{kind:"method",key:"willUpdate",value:function(e){(0,h.A)(u,"willUpdate",this,3)([e]),e.has("value")&&this._filename&&this.value!==this._filename.fileId&&(this._filename=void 0)}},{kind:"method",key:"_uploadFile",value:(i=(0,r.A)((0,a.A)().mark((function e(n){var i,t;return(0,a.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._busy=!0,i=n.detail.files[0],e.prev=2,e.next=5,(0,k.Q)(this.hass,i);case 5:t=e.sent,this._filename={fileId:t,name:i.name},(0,f.r)(this,"value-changed",{value:t}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),(0,g.K$)(this,{text:this.hass.localize("ui.components.selectors.file.upload_failed",{reason:e.t0.message||e.t0})});case 13:return e.prev=13,this._busy=!1,e.finish(13);case 16:case"end":return e.stop()}}),e,this,[[2,10,13,16]])}))),function(e){return i.apply(this,arguments)})},{kind:"field",key:"_removeFile",value:function(){var e=this;return(0,r.A)((0,a.A)().mark((function n(){return(0,a.A)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e._busy=!0,n.prev=1,n.next=4,(0,k.n)(e.hass,e.value);case 4:n.next=8;break;case 6:n.prev=6,n.t0=n.catch(1);case 8:return n.prev=8,e._busy=!1,n.finish(8);case 11:e._filename=void 0,(0,f.r)(e,"value-changed",{value:""});case 13:case"end":return n.stop()}}),n,null,[[1,6,8,11]])})))}}]}}),p.WF))},18966:function(e,n,i){i.d(n,{Q:function(){return r},n:function(){return o}});var t=i(94881),a=i(1781),r=(i(27934),i(848),function(){var e=(0,a.A)((0,t.A)().mark((function e(n,i){var a,r,o;return(0,t.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a=new FormData).append("file",i),e.next=4,n.fetchWithAuth("/api/file_upload",{method:"POST",body:a});case 4:if(413!==(r=e.sent).status){e.next=9;break}throw new Error("Uploaded file is too large (".concat(i.name,")"));case 9:if(200===r.status){e.next=11;break}throw new Error("Unknown error");case 11:return e.next=13,r.json();case 13:return o=e.sent,e.abrupt("return",o.file_id);case 15:case"end":return e.stop()}}),e)})));return function(n,i){return e.apply(this,arguments)}}()),o=function(){var e=(0,a.A)((0,t.A)().mark((function e(n,i){return(0,t.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.callApi("DELETE","file_upload",{file_id:i}));case 1:case"end":return e.stop()}}),e)})));return function(n,i){return e.apply(this,arguments)}}()}}]);