"use strict";(self.webpackChunkknx_frontend=self.webpackChunkknx_frontend||[]).push([[2527],{67905:function(e,t,a){a.d(t,{I:function(){return o}});var n=a(89231),s=a(36683),i=(a(75658),a(71936),a(60060),a(59092),a(43859),a(1158),a(68113),a(66274),a(84531),a(32877),a(34290),function(){return(0,s.A)((function e(){var t=this,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.localStorage;(0,n.A)(this,e),this.storage=void 0,this._storage={},this._listeners={},this.storage=a,a===window.localStorage&&window.addEventListener("storage",(function(e){e.key&&t.hasKey(e.key)&&(t._storage[e.key]=e.newValue?JSON.parse(e.newValue):e.newValue,t._listeners[e.key]&&t._listeners[e.key].forEach((function(a){return a(e.oldValue?JSON.parse(e.oldValue):e.oldValue,t._storage[e.key])})))}))}),[{key:"addFromStorage",value:function(e){if(!this._storage[e]){var t=this.storage.getItem(e);t&&(this._storage[e]=JSON.parse(t))}}},{key:"subscribeChanges",value:function(e,t){var a=this;return this._listeners[e]?this._listeners[e].push(t):this._listeners[e]=[t],function(){a.unsubscribeChanges(e,t)}}},{key:"unsubscribeChanges",value:function(e,t){if(e in this._listeners){var a=this._listeners[e].indexOf(t);-1!==a&&this._listeners[e].splice(a,1)}}},{key:"hasKey",value:function(e){return e in this._storage}},{key:"getValue",value:function(e){return this._storage[e]}},{key:"setValue",value:function(e,t){var a=this._storage[e];this._storage[e]=t;try{void 0===t?this.storage.removeItem(e):this.storage.setItem(e,JSON.stringify(t))}catch(n){}finally{this._listeners[e]&&this._listeners[e].forEach((function(e){return e(a,t)}))}}}])}()),r={},o=function(e){return function(t){var a,n=e.storage||"localStorage";n&&n in r?a=r[n]:(a=new i(window[n]),r[n]=a);var s=String(t.key),o=e.key||String(t.key),l=t.initializer?t.initializer():void 0;a.addFromStorage(o);var u=!1!==e.subscribe?function(e){return a.subscribeChanges(o,(function(a,n){e.requestUpdate(t.key,a)}))}:void 0,c=function(){return a.hasKey(o)?e.deserializer?e.deserializer(a.getValue(o)):a.getValue(o):l};return{kind:"method",placement:"prototype",key:t.key,descriptor:{set:function(n){!function(n,s){var i;e.state&&(i=c()),a.setValue(o,e.serializer?e.serializer(s):s),e.state&&n.requestUpdate(t.key,i)}(this,n)},get:function(){return c()},enumerable:!0,configurable:!0},finisher:function(a){if(e.state&&e.subscribe){var n=a.prototype.connectedCallback,i=a.prototype.disconnectedCallback;a.prototype.connectedCallback=function(){n.call(this),this["__unbsubLocalStorage".concat(s)]=null==u?void 0:u(this)},a.prototype.disconnectedCallback=function(){var e;i.call(this),null===(e=this["__unbsubLocalStorage".concat(s)])||void 0===e||e.call(this),this["__unbsubLocalStorage".concat(s)]=void 0}}e.state&&a.createProperty(t.key,Object.assign({noAccessor:!0},e.stateOptions))}}}}},2527:function(e,t,a){a.r(t),a.d(t,{TTSTryDialog:function(){return A}});var n,s,i,r,o=a(23141),l=a(94881),u=a(1781),c=a(6238),d=a(36683),h=a(89231),g=a(29864),p=a(83647),v=a(8364),f=(a(77052),a(43859),a(98597)),y=a(196),k=a(67905),_=a(33167),m=(a(66494),a(88762)),b=(a(77984),a(6933)),w=a(31447),A=(a(73279),(0,v.A)([(0,y.EM)("dialog-tts-try")],(function(e,t){var a,v,A=function(t){function a(){var t;(0,h.A)(this,a);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return t=(0,g.A)(this,a,[].concat(s)),e(t),t}return(0,p.A)(a,t),(0,d.A)(a)}(t);return{F:A,d:[{kind:"field",decorators:[(0,y.MZ)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,y.wk)()],key:"_loadingExample",value:function(){return!1}},{kind:"field",decorators:[(0,y.wk)()],key:"_params",value:void 0},{kind:"field",decorators:[(0,y.wk)()],key:"_valid",value:function(){return!1}},{kind:"field",decorators:[(0,y.P)("#message")],key:"_messageInput",value:void 0},{kind:"field",decorators:[(0,k.I)({key:"ttsTryMessages",state:!1,subscribe:!1})],key:"_messages",value:void 0},{kind:"method",key:"showDialog",value:function(e){this._params=e,this._valid=Boolean(this._defaultMessage)}},{kind:"method",key:"closeDialog",value:function(){this._params=void 0,(0,_.r)(this,"dialog-closed",{dialog:this.localName})}},{kind:"get",key:"_defaultMessage",value:function(){var e,t,a=null===(e=this._params.language)||void 0===e?void 0:e.substring(0,2),n=this.hass.locale.language.substring(0,2);return a&&null!==(t=this._messages)&&void 0!==t&&t[a]?this._messages[a]:a===n?this.hass.localize("ui.dialogs.tts-try.message_example"):""}},{kind:"method",key:"render",value:function(){return this._params?(0,f.qy)(n||(n=(0,c.A)(["\n      <ha-dialog\n        open\n        @closed=","\n        .heading=",'\n      >\n        <ha-textarea\n          autogrow\n          id="message"\n          .label=',"\n          .placeholder=","\n          .value=","\n          @input=","\n          ?dialogInitialFocus=","\n        >\n        </ha-textarea>\n        ","\n      </ha-dialog>\n    "])),this.closeDialog,(0,m.l)(this.hass,this.hass.localize("ui.dialogs.tts-try.header")),this.hass.localize("ui.dialogs.tts-try.message"),this.hass.localize("ui.dialogs.tts-try.message_placeholder"),this._defaultMessage,this._inputChanged,!this._defaultMessage,this._loadingExample?(0,f.qy)(s||(s=(0,c.A)(['\n              <ha-circular-progress\n                size="small"\n                indeterminate\n                slot="primaryAction"\n                class="loading"\n              ></ha-circular-progress>\n            ']))):(0,f.qy)(i||(i=(0,c.A)(["\n              <ha-button\n                ?dialogInitialFocus=",'\n                slot="primaryAction"\n                .label=',"\n                @click=","\n                .disabled=",'\n              >\n                <ha-svg-icon\n                  slot="icon"\n                  .path=',"\n                ></ha-svg-icon>\n              </ha-button>\n            "])),Boolean(this._defaultMessage),this.hass.localize("ui.dialogs.tts-try.play"),this._playExample,!this._valid,"M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20,12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M10,16.5L16,12L10,7.5V16.5Z")):f.s6}},{kind:"method",key:"_inputChanged",value:(v=(0,u.A)((0,l.A)().mark((function e(){var t;return(0,l.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._valid=Boolean(null===(t=this._messageInput)||void 0===t?void 0:t.value);case 1:case"end":return e.stop()}}),e,this)}))),function(){return v.apply(this,arguments)})},{kind:"method",key:"_playExample",value:(a=(0,u.A)((0,l.A)().mark((function e(){var t,a,n,s,i,r,u,c,d=this;return(0,l.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=null===(t=this._messageInput)||void 0===t?void 0:t.value){e.next=3;break}return e.abrupt("return");case 3:return n=this._params.engine,s=this._params.language,i=this._params.voice,s&&(this._messages=Object.assign(Object.assign({},this._messages),{},(0,o.A)({},s.substring(0,2),a))),this._loadingExample=!0,(r=new Audio).play(),e.prev=10,e.next=13,(0,b.S_)(this.hass,{platform:n,message:a,language:s,options:{voice:i}});case 13:c=e.sent,u=c.path,e.next=22;break;case 17:return e.prev=17,e.t0=e.catch(10),this._loadingExample=!1,(0,w.K$)(this,{text:"Unable to load example. ".concat(e.t0.error||e.t0.body||e.t0),warning:!0}),e.abrupt("return");case 22:r.src=u,r.addEventListener("canplaythrough",(function(){return r.play()})),r.addEventListener("playing",(function(){d._loadingExample=!1})),r.addEventListener("error",(function(){(0,w.K$)(d,{title:"Error playing audio."}),d._loadingExample=!1}));case 26:case"end":return e.stop()}}),e,this,[[10,17]])}))),function(){return a.apply(this,arguments)})},{kind:"get",static:!0,key:"styles",value:function(){return(0,f.AH)(r||(r=(0,c.A)(["\n      ha-dialog {\n        --mdc-dialog-max-width: 500px;\n      }\n      ha-textarea,\n      ha-select {\n        width: 100%;\n      }\n      ha-select {\n        margin-top: 8px;\n      }\n      .loading {\n        height: 36px;\n      }\n    "])))}}]}}),f.WF))}}]);