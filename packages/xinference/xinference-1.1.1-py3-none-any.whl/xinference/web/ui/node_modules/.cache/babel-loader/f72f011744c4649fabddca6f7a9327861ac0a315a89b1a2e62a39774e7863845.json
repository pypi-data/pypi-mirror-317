{"ast":null,"code":"import _slicedToArray from\"/home/runner/work/inference/inference/xinference/web/ui/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{Box}from'@mui/material';import Paper from'@mui/material/Paper';import Grid from'@mui/material/Unstable_Grid2';import React,{useContext,useEffect}from'react';import{useCookies}from'react-cookie';import{useNavigate}from'react-router-dom';import{ApiContext}from'../../components/apiContext';import TableTitle from'../../components/tableTitle';import Title from'../../components/Title';import{isValidBearerToken}from'../../components/utils';import NodeInfo from'./nodeInfo';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ClusterInfo=function ClusterInfo(){var endPoint=useContext(ApiContext).endPoint;var _useCookies=useCookies(['token']),_useCookies2=_slicedToArray(_useCookies,1),cookie=_useCookies2[0];var navigate=useNavigate();useEffect(function(){if(sessionStorage.getItem('auth')==='true'&&!isValidBearerToken(sessionStorage.getItem('token'))&&!isValidBearerToken(cookie.token)){navigate('/login',{replace:true});}},[cookie.token]);var handleGoBack=function handleGoBack(){var lastUrl=sessionStorage.getItem('lastActiveUrl');if(lastUrl==='launch_model'){navigate(sessionStorage.getItem('modelType'));}else if(lastUrl==='running_models'){navigate(sessionStorage.getItem('runningModelType'));}else if(lastUrl==='register_model'){navigate(sessionStorage.getItem('registerModelType'));}else{navigate('/launch_model/llm');}};return/*#__PURE__*/_jsxs(Box,{sx:{height:'100%',width:'100%',padding:'20px 20px 0 20px'},children:[/*#__PURE__*/_jsx(Title,{title:\"Cluster Information\"}),/*#__PURE__*/_jsxs(Grid,{container:true,spacing:3,style:{width:'100%'},children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsxs(Paper,{sx:{padding:2,display:'flex',overflow:'auto',flexDirection:'column'},children:[/*#__PURE__*/_jsx(TableTitle,{children:\"Supervisor\"}),/*#__PURE__*/_jsx(NodeInfo,{nodeRole:\"Supervisor\",endpoint:endPoint,cookie:cookie,handleGoBack:handleGoBack})]})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsxs(Paper,{sx:{padding:2,display:'flex',overflow:'auto',flexDirection:'column'},children:[/*#__PURE__*/_jsx(TableTitle,{children:\"Workers\"}),/*#__PURE__*/_jsx(NodeInfo,{nodeRole:\"Worker\",endpoint:endPoint,cookie:cookie,handleGoBack:handleGoBack})]})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsxs(Paper,{sx:{padding:2,display:'flex',overflow:'auto',flexDirection:'column'},children:[/*#__PURE__*/_jsx(TableTitle,{children:\"Worker Details\"}),/*#__PURE__*/_jsx(NodeInfo,{nodeRole:\"Worker-Details\",endpoint:endPoint,cookie:cookie,handleGoBack:handleGoBack})]})})]})]});};export default ClusterInfo;","map":{"version":3,"names":["Box","Paper","Grid","React","useContext","useEffect","useCookies","useNavigate","ApiContext","TableTitle","Title","isValidBearerToken","NodeInfo","jsx","_jsx","jsxs","_jsxs","ClusterInfo","endPoint","_useCookies","_useCookies2","_slicedToArray","cookie","navigate","sessionStorage","getItem","token","replace","handleGoBack","lastUrl","sx","height","width","padding","children","title","container","spacing","style","item","xs","display","overflow","flexDirection","nodeRole","endpoint"],"sources":["/home/runner/work/inference/inference/xinference/web/ui/src/scenes/cluster_info/index.js"],"sourcesContent":["import { Box } from '@mui/material'\nimport Paper from '@mui/material/Paper'\nimport Grid from '@mui/material/Unstable_Grid2'\nimport React, { useContext, useEffect } from 'react'\nimport { useCookies } from 'react-cookie'\nimport { useNavigate } from 'react-router-dom'\n\nimport { ApiContext } from '../../components/apiContext'\nimport TableTitle from '../../components/tableTitle'\nimport Title from '../../components/Title'\nimport { isValidBearerToken } from '../../components/utils'\nimport NodeInfo from './nodeInfo'\n\nconst ClusterInfo = () => {\n  const endPoint = useContext(ApiContext).endPoint\n  const [cookie] = useCookies(['token'])\n  const navigate = useNavigate()\n\n  useEffect(() => {\n    if (\n      sessionStorage.getItem('auth') === 'true' &&\n      !isValidBearerToken(sessionStorage.getItem('token')) &&\n      !isValidBearerToken(cookie.token)\n    ) {\n      navigate('/login', { replace: true })\n    }\n  }, [cookie.token])\n\n  const handleGoBack = () => {\n    const lastUrl = sessionStorage.getItem('lastActiveUrl')\n    if (lastUrl === 'launch_model') {\n      navigate(sessionStorage.getItem('modelType'))\n    } else if (lastUrl === 'running_models') {\n      navigate(sessionStorage.getItem('runningModelType'))\n    } else if (lastUrl === 'register_model') {\n      navigate(sessionStorage.getItem('registerModelType'))\n    } else {\n      navigate('/launch_model/llm')\n    }\n  }\n\n  return (\n    <Box\n      sx={{\n        height: '100%',\n        width: '100%',\n        padding: '20px 20px 0 20px',\n      }}\n    >\n      <Title title=\"Cluster Information\" />\n      <Grid container spacing={3} style={{ width: '100%' }}>\n        <Grid item xs={12}>\n          <Paper\n            sx={{\n              padding: 2,\n              display: 'flex',\n              overflow: 'auto',\n              flexDirection: 'column',\n            }}\n          >\n            <TableTitle>Supervisor</TableTitle>\n            <NodeInfo\n              nodeRole=\"Supervisor\"\n              endpoint={endPoint}\n              cookie={cookie}\n              handleGoBack={handleGoBack}\n            />\n          </Paper>\n        </Grid>\n        <Grid item xs={12}>\n          <Paper\n            sx={{\n              padding: 2,\n              display: 'flex',\n              overflow: 'auto',\n              flexDirection: 'column',\n            }}\n          >\n            <TableTitle>Workers</TableTitle>\n            <NodeInfo\n              nodeRole=\"Worker\"\n              endpoint={endPoint}\n              cookie={cookie}\n              handleGoBack={handleGoBack}\n            />\n          </Paper>\n        </Grid>\n        <Grid item xs={12}>\n          <Paper\n            sx={{\n              padding: 2,\n              display: 'flex',\n              overflow: 'auto',\n              flexDirection: 'column',\n            }}\n          >\n            <TableTitle>Worker Details</TableTitle>\n            <NodeInfo\n              nodeRole=\"Worker-Details\"\n              endpoint={endPoint}\n              cookie={cookie}\n              handleGoBack={handleGoBack}\n            />\n          </Paper>\n        </Grid>\n      </Grid>\n    </Box>\n  )\n}\n\nexport default ClusterInfo\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}