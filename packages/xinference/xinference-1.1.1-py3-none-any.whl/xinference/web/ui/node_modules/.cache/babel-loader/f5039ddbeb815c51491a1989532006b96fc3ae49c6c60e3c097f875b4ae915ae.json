{"ast":null,"code":"import _slicedToArray from\"/home/runner/work/inference/inference/xinference/web/ui/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{TabContext,TabList,TabPanel}from'@mui/lab';import{Box,Tab}from'@mui/material';import React,{useEffect}from'react';import{useCookies}from'react-cookie';import{useNavigate}from'react-router-dom';import ErrorMessageSnackBar from'../../components/errorMessageSnackBar';import Title from'../../components/Title';import{isValidBearerToken}from'../../components/utils';import RegisterModelComponent from'./registerModel';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var RegisterModel=function RegisterModel(){var _React$useState=React.useState(sessionStorage.getItem('registerModelType')?sessionStorage.getItem('registerModelType'):'/register_model/llm'),_React$useState2=_slicedToArray(_React$useState,2),tabValue=_React$useState2[0],setTabValue=_React$useState2[1];var _useCookies=useCookies(['token']),_useCookies2=_slicedToArray(_useCookies,1),cookie=_useCookies2[0];var navigate=useNavigate();useEffect(function(){if(sessionStorage.getItem('auth')==='true'&&!isValidBearerToken(sessionStorage.getItem('token'))&&!isValidBearerToken(cookie.token)){navigate('/login',{replace:true});}},[cookie.token]);var handleTabChange=function handleTabChange(_,newValue){setTabValue(newValue);navigate(newValue);sessionStorage.setItem('registerModelType',newValue);};return/*#__PURE__*/_jsxs(Box,{m:\"20px\",style:{overflow:'hidden'},children:[/*#__PURE__*/_jsx(Title,{title:\"Register Model\"}),/*#__PURE__*/_jsx(ErrorMessageSnackBar,{}),/*#__PURE__*/_jsxs(TabContext,{value:tabValue,children:[/*#__PURE__*/_jsx(Box,{sx:{borderBottom:1,borderColor:'divider'},children:/*#__PURE__*/_jsxs(TabList,{value:tabValue,onChange:handleTabChange,\"aria-label\":\"tabs\",children:[/*#__PURE__*/_jsx(Tab,{label:\"Language Model\",value:\"/register_model/llm\"}),/*#__PURE__*/_jsx(Tab,{label:\"Embedding Model\",value:\"/register_model/embedding\"}),/*#__PURE__*/_jsx(Tab,{label:\"Rerank Model\",value:\"/register_model/rerank\"}),/*#__PURE__*/_jsx(Tab,{label:\"Image Model\",value:\"/register_model/image\"}),/*#__PURE__*/_jsx(Tab,{label:\"Audio Model\",value:\"/register_model/audio\"}),/*#__PURE__*/_jsx(Tab,{label:\"Flexible Model\",value:\"/register_model/flexible\"})]})}),/*#__PURE__*/_jsx(TabPanel,{value:\"/register_model/llm\",sx:{padding:0},children:/*#__PURE__*/_jsx(RegisterModelComponent,{modelType:\"LLM\",customData:{version:1,model_name:'custom-llm',model_description:'This is a custom model description.',context_length:2048,model_lang:['en'],model_ability:['generate'],model_specs:[{model_uri:'/path/to/llama-1',model_size_in_billions:7,model_format:'pytorch',quantizations:['none']}],model_family:'your_custom_model'}})}),/*#__PURE__*/_jsx(TabPanel,{value:\"/register_model/embedding\",sx:{padding:0},children:/*#__PURE__*/_jsx(RegisterModelComponent,{modelType:\"embedding\",customData:{model_name:'custom-embedding',dimensions:768,max_tokens:512,model_uri:'/path/to/embedding-model',language:['en']}})}),/*#__PURE__*/_jsx(TabPanel,{value:\"/register_model/rerank\",sx:{padding:0},children:/*#__PURE__*/_jsx(RegisterModelComponent,{modelType:\"rerank\",customData:{model_name:'custom-rerank',model_uri:'/path/to/rerank-model',language:['en']}})}),/*#__PURE__*/_jsx(TabPanel,{value:\"/register_model/image\",sx:{padding:0},children:/*#__PURE__*/_jsx(RegisterModelComponent,{modelType:\"image\",customData:{model_name:'custom-image',model_uri:'/path/to/image-model',model_family:'stable_diffusion',controlnet:[]}})}),/*#__PURE__*/_jsx(TabPanel,{value:\"/register_model/audio\",sx:{padding:0},children:/*#__PURE__*/_jsx(RegisterModelComponent,{modelType:\"audio\",customData:{model_name:'custom-audio',model_uri:'/path/to/audio-model',multilingual:false,model_family:'whisper'}})}),/*#__PURE__*/_jsx(TabPanel,{value:\"/register_model/flexible\",sx:{padding:0},children:/*#__PURE__*/_jsx(RegisterModelComponent,{modelType:\"flexible\",customData:{model_name:'flexible-model',model_description:'This is a model description.',model_uri:'/path/to/model',launcher:'xinference.model.flexible.launchers.transformers',launcher_args:'{}'}})})]})]});};export default RegisterModel;","map":{"version":3,"names":["TabContext","TabList","TabPanel","Box","Tab","React","useEffect","useCookies","useNavigate","ErrorMessageSnackBar","Title","isValidBearerToken","RegisterModelComponent","jsx","_jsx","jsxs","_jsxs","RegisterModel","_React$useState","useState","sessionStorage","getItem","_React$useState2","_slicedToArray","tabValue","setTabValue","_useCookies","_useCookies2","cookie","navigate","token","replace","handleTabChange","_","newValue","setItem","m","style","overflow","children","title","value","sx","borderBottom","borderColor","onChange","label","padding","modelType","customData","version","model_name","model_description","context_length","model_lang","model_ability","model_specs","model_uri","model_size_in_billions","model_format","quantizations","model_family","dimensions","max_tokens","language","controlnet","multilingual","launcher","launcher_args"],"sources":["/home/runner/work/inference/inference/xinference/web/ui/src/scenes/register_model/index.js"],"sourcesContent":["import { TabContext, TabList, TabPanel } from '@mui/lab'\nimport { Box, Tab } from '@mui/material'\nimport React, { useEffect } from 'react'\nimport { useCookies } from 'react-cookie'\nimport { useNavigate } from 'react-router-dom'\n\nimport ErrorMessageSnackBar from '../../components/errorMessageSnackBar'\nimport Title from '../../components/Title'\nimport { isValidBearerToken } from '../../components/utils'\nimport RegisterModelComponent from './registerModel'\n\nconst RegisterModel = () => {\n  const [tabValue, setTabValue] = React.useState(\n    sessionStorage.getItem('registerModelType')\n      ? sessionStorage.getItem('registerModelType')\n      : '/register_model/llm'\n  )\n  const [cookie] = useCookies(['token'])\n  const navigate = useNavigate()\n\n  useEffect(() => {\n    if (\n      sessionStorage.getItem('auth') === 'true' &&\n      !isValidBearerToken(sessionStorage.getItem('token')) &&\n      !isValidBearerToken(cookie.token)\n    ) {\n      navigate('/login', { replace: true })\n    }\n  }, [cookie.token])\n\n  const handleTabChange = (_, newValue) => {\n    setTabValue(newValue)\n    navigate(newValue)\n    sessionStorage.setItem('registerModelType', newValue)\n  }\n\n  return (\n    <Box m=\"20px\" style={{ overflow: 'hidden' }}>\n      <Title title=\"Register Model\" />\n      <ErrorMessageSnackBar />\n      <TabContext value={tabValue}>\n        <Box sx={{ borderBottom: 1, borderColor: 'divider' }}>\n          <TabList\n            value={tabValue}\n            onChange={handleTabChange}\n            aria-label=\"tabs\"\n          >\n            <Tab label=\"Language Model\" value=\"/register_model/llm\" />\n            <Tab label=\"Embedding Model\" value=\"/register_model/embedding\" />\n            <Tab label=\"Rerank Model\" value=\"/register_model/rerank\" />\n            <Tab label=\"Image Model\" value=\"/register_model/image\" />\n            <Tab label=\"Audio Model\" value=\"/register_model/audio\" />\n            <Tab label=\"Flexible Model\" value=\"/register_model/flexible\" />\n          </TabList>\n        </Box>\n        <TabPanel value=\"/register_model/llm\" sx={{ padding: 0 }}>\n          <RegisterModelComponent\n            modelType=\"LLM\"\n            customData={{\n              version: 1,\n              model_name: 'custom-llm',\n              model_description: 'This is a custom model description.',\n              context_length: 2048,\n              model_lang: ['en'],\n              model_ability: ['generate'],\n              model_specs: [\n                {\n                  model_uri: '/path/to/llama-1',\n                  model_size_in_billions: 7,\n                  model_format: 'pytorch',\n                  quantizations: ['none'],\n                },\n              ],\n              model_family: 'your_custom_model',\n            }}\n          />\n        </TabPanel>\n        <TabPanel value=\"/register_model/embedding\" sx={{ padding: 0 }}>\n          <RegisterModelComponent\n            modelType=\"embedding\"\n            customData={{\n              model_name: 'custom-embedding',\n              dimensions: 768,\n              max_tokens: 512,\n              model_uri: '/path/to/embedding-model',\n              language: ['en'],\n            }}\n          />\n        </TabPanel>\n        <TabPanel value=\"/register_model/rerank\" sx={{ padding: 0 }}>\n          <RegisterModelComponent\n            modelType=\"rerank\"\n            customData={{\n              model_name: 'custom-rerank',\n              model_uri: '/path/to/rerank-model',\n              language: ['en'],\n            }}\n          />\n        </TabPanel>\n        <TabPanel value=\"/register_model/image\" sx={{ padding: 0 }}>\n          <RegisterModelComponent\n            modelType=\"image\"\n            customData={{\n              model_name: 'custom-image',\n              model_uri: '/path/to/image-model',\n              model_family: 'stable_diffusion',\n              controlnet: [],\n            }}\n          />\n        </TabPanel>\n        <TabPanel value=\"/register_model/audio\" sx={{ padding: 0 }}>\n          <RegisterModelComponent\n            modelType=\"audio\"\n            customData={{\n              model_name: 'custom-audio',\n              model_uri: '/path/to/audio-model',\n              multilingual: false,\n              model_family: 'whisper',\n            }}\n          />\n        </TabPanel>\n        <TabPanel value=\"/register_model/flexible\" sx={{ padding: 0 }}>\n          <RegisterModelComponent\n            modelType=\"flexible\"\n            customData={{\n              model_name: 'flexible-model',\n              model_description: 'This is a model description.',\n              model_uri: '/path/to/model',\n              launcher: 'xinference.model.flexible.launchers.transformers',\n              launcher_args: '{}',\n            }}\n          />\n        </TabPanel>\n      </TabContext>\n    </Box>\n  )\n}\n\nexport default RegisterModel\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}