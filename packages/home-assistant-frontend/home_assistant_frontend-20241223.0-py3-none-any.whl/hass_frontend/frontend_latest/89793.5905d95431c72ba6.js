export const ids=["89793"];export const modules={87865:function(e,t,a){a.d(t,{v:function(){return i}});const i=async e=>{if(navigator.clipboard)try{return void await navigator.clipboard.writeText(e)}catch{}const t=document.createElement("textarea");t.value=e,document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t)}},5828:function(e,t,a){a.r(t),a.d(t,{HaIconButtonPrev:function(){return d}});var i=a(44249),n=a(57243),o=a(15093),s=a(5111);a(23334);let d=(0,i.Z)([(0,o.Mo)("ha-icon-button-prev")],(function(e,t){return{F:class extends t{constructor(...t){super(...t),e(this)}},d:[{kind:"field",decorators:[(0,o.Cb)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,o.Cb)({type:Boolean})],key:"disabled",value:()=>!1},{kind:"field",decorators:[(0,o.Cb)()],key:"label",value:void 0},{kind:"field",decorators:[(0,o.SB)()],key:"_icon",value:()=>"rtl"===s.E.document.dir?"M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z":"M15.41,16.58L10.83,12L15.41,7.41L14,6L8,12L14,18L15.41,16.58Z"},{kind:"method",key:"render",value:function(){return n.dy` <ha-icon-button .disabled="${this.disabled}" .label="${this.label||this.hass?.localize("ui.common.back")||"Back"}" .path="${this._icon}"></ha-icon-button> `}}]}}),n.oi)},51784:function(e,t,a){a.d(t,{dJ:function(){return h},zB:function(){return p}});var i=a(44249),n=a(72621),o=a(67840),s=a(88854),d=a(57243),c=a(15093);let l;o.A.addInitializer((async e=>{await e.updateComplete;const t=e;t.dialog.prepend(t.scrim),t.scrim.style.inset=0,t.scrim.style.zIndex=0;const{getOpenAnimation:a,getCloseAnimation:i}=t;t.getOpenAnimation=()=>{const e=a.call(void 0);return e.container=[...e.container??[],...e.dialog??[]],e.dialog=[],e},t.getCloseAnimation=()=>{const e=i.call(void 0);return e.container=[...e.container??[],...e.dialog??[]],e.dialog=[],e}}));(0,i.Z)([(0,c.Mo)("ha-md-dialog")],(function(e,t){class i extends t{constructor(){super(),e(this),this.addEventListener("cancel",this._handleCancel),"function"!=typeof HTMLDialogElement&&(this.addEventListener("open",this._handleOpen),l||(l=a.e("73854").then(a.bind(a,85893)))),void 0===this.animate&&(this.quick=!0),void 0===this.animate&&(this.quick=!0)}}return{F:i,d:[{kind:"field",decorators:[(0,c.Cb)({attribute:"disable-cancel-action",type:Boolean})],key:"disableCancelAction",value:()=>!1},{kind:"field",key:"_polyfillDialogRegistered",value:()=>!1},{kind:"method",key:"_handleOpen",value:async function(e){if(e.preventDefault(),this._polyfillDialogRegistered)return;this._polyfillDialogRegistered=!0,this._loadPolyfillStylesheet("/static/polyfills/dialog-polyfill.css");const t=this.shadowRoot?.querySelector("dialog");(await l).default.registerDialog(t),this.removeEventListener("open",this._handleOpen),this.show()}},{kind:"method",key:"_loadPolyfillStylesheet",value:async function(e){const t=document.createElement("link");return t.rel="stylesheet",t.href=e,new Promise(((a,i)=>{t.onload=()=>a(),t.onerror=()=>i(new Error(`Stylesheet failed to load: ${e}`)),this.shadowRoot?.appendChild(t)}))}},{kind:"method",key:"_handleCancel",value:function(e){if(this.disableCancelAction){e.preventDefault();const t=this.shadowRoot?.querySelector("dialog .container");void 0!==this.animate&&t?.animate([{transform:"rotate(-1deg)","animation-timing-function":"ease-in"},{transform:"rotate(1.5deg)","animation-timing-function":"ease-out"},{transform:"rotate(0deg)","animation-timing-function":"ease-in"}],{duration:200,iterations:2})}}},{kind:"field",static:!0,key:"styles",value(){return[...(0,n.Z)(i,"styles",this),d.iv`:host{--md-dialog-container-color:var(--card-background-color);--md-dialog-headline-color:var(--primary-text-color);--md-dialog-supporting-text-color:var(--primary-text-color);--md-sys-color-scrim:#000000;--md-dialog-headline-weight:400;--md-dialog-headline-size:1.574rem;--md-dialog-supporting-text-size:1rem;--md-dialog-supporting-text-line-height:1.5rem}:host([type=alert]){min-width:320px}@media all and (max-width:450px),all and (max-height:500px){:host(:not([type=alert])){min-width:calc(100vw - env(safe-area-inset-right) - env(safe-area-inset-left));max-width:calc(100vw - env(safe-area-inset-right) - env(safe-area-inset-left));min-height:100%;max-height:100%;--md-dialog-container-shape:0}}::slotted(ha-dialog-header[slot=headline]){display:contents}.scroller{overflow:var(--dialog-content-overflow,auto)}slot[name=content]::slotted(*){padding:var(--dialog-content-padding,24px)}.scrim{z-index:10}`]}}]}}),o.A);const r={...s.I,dialog:[[[{transform:"translateY(50px)"},{transform:"translateY(0)"}],{duration:500,easing:"cubic-bezier(.3,0,0,1)"}]],container:[[[{opacity:0},{opacity:1}],{duration:50,easing:"linear",pseudoElement:"::before"}]]},u={...s.G,dialog:[[[{transform:"translateY(0)"},{transform:"translateY(50px)"}],{duration:150,easing:"cubic-bezier(.3,0,0,1)"}]],container:[[[{opacity:"1"},{opacity:"0"}],{delay:100,duration:50,easing:"linear",pseudoElement:"::before"}]]},h=()=>window.matchMedia("all and (max-width: 450px), all and (max-height: 500px)").matches?r:s.I,p=()=>window.matchMedia("all and (max-width: 450px), all and (max-height: 500px)").matches?u:s.G},35956:function(e,t,a){a.r(t);var i=a(44249),n=(a(92745),a(92519),a(42179),a(89256),a(24931),a(88463),a(57449),a(19814),a(57243)),o=a(15093),s=a(72344),d=a(36522),c=a(87865),l=(a(59826),a(95198),a(23334),a(5828),a(13928),a(51784),a(19993),a(74633),a(34326),a(37583),a(26779)),r=a(28008),u=a(58014),h=a(72473);a(68545),a(5131),a(45866);const p=["welcome","key","setup","schedule","data","locations"],m=new Set(["setup"]),g={create_backup:{agent_ids:[],include_folders:[],include_database:!0,include_addons:[],include_all_addons:!0,password:null,name:null},retention:{copies:3,days:null},schedule:{state:l.g2.DAILY},last_attempted_automatic_backup:null,last_completed_automatic_backup:null};(0,i.Z)([(0,o.Mo)("ha-dialog-backup-onboarding")],(function(e,t){return{F:class extends t{constructor(...t){super(...t),e(this)}},d:[{kind:"field",decorators:[(0,o.Cb)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,o.SB)()],key:"_opened",value:()=>!1},{kind:"field",decorators:[(0,o.SB)()],key:"_step",value:void 0},{kind:"field",decorators:[(0,o.SB)()],key:"_params",value:void 0},{kind:"field",decorators:[(0,o.IO)("ha-md-dialog")],key:"_dialog",value:void 0},{kind:"field",decorators:[(0,o.SB)()],key:"_config",value:void 0},{kind:"method",key:"showDialog",value:function(e){this._params=e,this._step=p[0],this._config=g;const t=[];(0,s.p)(this.hass,"hassio")?t.push(l.Kn):t.push(l.UR),this._params.cloudStatus.logged_in&&t.push(l.$u),this._config={...this._config,create_backup:{...this._config.create_backup,agent_ids:t,password:(0,l.Ty)()}},this._opened=!0}},{kind:"method",key:"closeDialog",value:function(){this._params.cancel&&this._params.cancel(),this._opened&&(0,d.B)(this,"dialog-closed",{dialog:this.localName}),this._opened=!1,this._step=void 0,this._config=void 0,this._params=void 0}},{kind:"method",key:"_done",value:async function(){if(!this._config)return;const e={create_backup:{password:this._config.create_backup.password,include_database:this._config.create_backup.include_database,agent_ids:this._config.create_backup.agent_ids},schedule:this._config.schedule.state,retention:this._config.retention};(0,s.p)(this.hass,"hassio")&&(e.create_backup.include_folders=this._config.create_backup.include_folders||[],e.create_backup.include_all_addons=this._config.create_backup.include_all_addons,e.create_backup.include_addons=this._config.create_backup.include_addons||[]);try{await(0,l._r)(this.hass,e),this._params?.submit(!0),this._dialog.close()}catch(e){console.error(e),(0,h.C)(this,{message:"Failed to save backup configuration"})}}},{kind:"method",key:"_previousStep",value:function(){const e=p.indexOf(this._step);0!==e&&(this._step=p[e-1])}},{kind:"method",key:"_nextStep",value:function(){const e=p.indexOf(this._step);e!==p.length-1&&(this._step=p[e+1])}},{kind:"method",key:"render",value:function(){if(!this._opened||!this._params||!this._step)return n.Ld;const e=this._step===p[p.length-1],t=this._step===p[0];return n.dy` <ha-md-dialog disable-cancel-action open @closed="${this.closeDialog}"> <ha-dialog-header slot="headline"> ${t?n.dy` <ha-icon-button slot="navigationIcon" .label="${this.hass.localize("ui.dialogs.generic.close")}" .path="${"M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z"}" @click="${this.closeDialog}"></ha-icon-button> `:n.dy` <ha-icon-button-prev slot="navigationIcon" @click="${this._previousStep}"></ha-icon-button-prev> `} <span slot="title">${this._stepTitle}</span> </ha-dialog-header> <div slot="content">${this._renderStepContent()}</div> ${m.has(this._step)?n.Ld:n.dy` <div slot="actions"> ${e?n.dy` <ha-button @click="${this._done}" .disabled="${!this._isStepValid()}"> Save and create backup </ha-button> `:n.dy` <ha-button @click="${this._nextStep}" .disabled="${!this._isStepValid()}"> Next </ha-button> `} </div> `} </ha-md-dialog> `}},{kind:"get",key:"_stepTitle",value:function(){switch(this._step){case"welcome":default:return"";case"key":return"Encryption key";case"setup":return"Set up your automatic backups";case"schedule":return"Automatic backups";case"data":return"Backup data";case"locations":return"Locations"}}},{kind:"method",key:"_isStepValid",value:function(){switch(this._step){case"key":case"setup":default:return!0;case"schedule":case"data":return!!this._config?.schedule;case"locations":return!!this._config?.create_backup.agent_ids.length}}},{kind:"method",key:"_renderStepContent",value:function(){if(!this._config)return n.Ld;switch(this._step){case"welcome":return n.dy` <div class="welcome"> <img src="/static/images/voice-assistant/hi.png" alt="Casita Home Assistant logo"> <h1>Set up your automatic backups</h1> <p class="secondary"> Backups are essential to a reliable smart home. They protect your setup against failures and allows you to quickly have a working system again. It is recommended to create a daily backup and keep backups of the last 3 days on two different locations. And one of them is off-site. </p> </div> `;case"key":return n.dy` <p> All your backups are encrypted to keep your data private and secure. We recommend to save this key somewhere secure. As you can only restore your data with the backup encryption key. </p> <div class="encryption-key"> <p>${this._config.create_backup.password}</p> <ha-icon-button .path="${"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"}" @click="${this._copyKeyToClipboard}"></ha-icon-button> </div> <ha-md-list> <ha-md-list-item> <span slot="headline">Download emergency kit</span> <span slot="supporting-text"> We recommend to save this encryption key somewhere secure. </span> <ha-button slot="end" @click="${this._downloadKey}"> <ha-svg-icon .path="${"M5,20H19V18H5M19,9H15V3H9V9H5L12,16L19,9Z"}" slot="icon"></ha-svg-icon> Download </ha-button> </ha-md-list-item> </ha-md-list> `;case"setup":return n.dy` <p> It is recommended to create a daily backup and keep backups of the last 3 days on two different locations. And one of them is off-site. </p> <ha-md-list class="full"> <ha-md-list-item type="button" @click="${this._done}"> <span slot="headline">Recommended settings</span> <span slot="supporting-text"> Set the proven settings of daily backup. </span> <ha-icon-next slot="end"> </ha-icon-next> </ha-md-list-item> <ha-md-list-item type="button" @click="${this._nextStep}"> <span slot="headline">Custom settings</span> <span slot="supporting-text"> Select your own automation, data and locations </span> <ha-icon-next slot="end"> </ha-icon-next> </ha-md-list-item> </ha-md-list> `;case"schedule":return n.dy` <p> Let Home Assistant take care of your backups by creating a scheduled backup that also removes older backups. </p> <ha-backup-config-schedule .hass="${this.hass}" .value="${this._config}" @value-changed="${this._scheduleChanged}"></ha-backup-config-schedule> `;case"data":return n.dy` <p> Choose what data to include in your backups. You can always change this later. </p> <ha-backup-config-data .hass="${this.hass}" .value="${this._dataConfig(this._config)}" @value-changed="${this._dataChanged}" force-home-assistant hide-addon-version></ha-backup-config-data> `;case"locations":return n.dy` <p> Home Assistant will upload to these locations when an automatic backup is made. You can use all locations for manual backups. </p> <ha-backup-config-agents .hass="${this.hass}" .value="${this._config.create_backup.agent_ids}" .cloudStatus="${this._params.cloudStatus}" @value-changed="${this._agentsConfigChanged}"></ha-backup-config-agents> `}return n.Ld}},{kind:"method",key:"_downloadKey",value:function(){const e=this._config?.create_backup.password;e&&(0,u.N)("data:text/plain;charset=utf-8,"+encodeURIComponent(e),"emergency_kit.txt")}},{kind:"method",key:"_copyKeyToClipboard",value:function(){(0,c.v)(this._config.create_backup.password),(0,h.C)(this,{message:this.hass.localize("ui.common.copied_clipboard")})}},{kind:"method",key:"_dataConfig",value:function(e){const{include_addons:t,include_all_addons:a,include_database:i,include_folders:n}=e.create_backup;return{include_homeassistant:!0,include_database:i,include_folders:n||void 0,include_all_addons:a,include_addons:t||void 0}}},{kind:"method",key:"_dataChanged",value:function(e){const t=e.detail.value;this._config={...this._config,create_backup:{...this._config.create_backup,include_database:t.include_database,include_folders:t.include_folders||null,include_all_addons:t.include_all_addons,include_addons:t.include_addons||null}}}},{kind:"method",key:"_scheduleChanged",value:function(e){const t=e.detail.value;this._config={...this._config,schedule:t.schedule,retention:t.retention}}},{kind:"method",key:"_agentsConfigChanged",value:function(e){const t=e.detail.value;this._config={...this._config,create_backup:{...this._config.create_backup,agent_ids:t}}}},{kind:"get",static:!0,key:"styles",value:function(){return[r.Qx,r.yu,n.iv`ha-md-dialog{width:90vw;max-width:560px;--dialog-content-padding:8px 24px}ha-md-list{background:0 0;--md-list-item-leading-space:0;--md-list-item-trailing-space:0}ha-md-list.full{--md-list-item-leading-space:24px;--md-list-item-trailing-space:24px;margin-left:-24px;margin-right:-24px}@media all and (max-width:450px),all and (max-height:500px){ha-md-dialog{max-width:none}div[slot=content]{margin-top:0}}p{margin-top:0}.welcome{text-align:center}.encryption-key{border:1px solid var(--divider-color);background-color:var(--primary-background-color);border-radius:8px;padding:16px;display:flex;flex-direction:row;align-items:center;gap:24px}.encryption-key p{margin:0;flex:1;font-family:"Roboto Mono",Consolas,Menlo,monospace;font-size:20px;font-style:normal;font-weight:400;line-height:28px;text-align:center}.encryption-key ha-icon-button{flex:none;margin:-16px}`]}}]}}),n.oi)}};
//# sourceMappingURL=89793.5905d95431c72ba6.js.map