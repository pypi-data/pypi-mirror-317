"use strict";(self.webpackChunkhome_assistant_frontend=self.webpackChunkhome_assistant_frontend||[]).push([["96245"],{29937:function(t,i,e){e.d(i,{Q:()=>C});var a=e("61701"),o=e("72621"),d=(e("71695"),e("61893"),e("19423"),e("40251"),e("92519"),e("42179"),e("89256"),e("24931"),e("88463"),e("57449"),e("19814"),e("39527"),e("41360"),e("13334"),e("36993"),e("47021"),e("57243")),n=e("50778"),s=e("35359"),l=e("69634"),r=e("36522"),h=e("34593"),c=e("22381");e("19134"),e("5740");const u=/Mac/i.test(navigator.userAgent);let p,v,g,b,y,k,f,_,m,x=t=>t;const C=3e5;(0,a.Z)([(0,n.Mo)("ha-chart-base")],(function(t,i){class a extends i{constructor(...i){super(...i),t(this)}}return{F:a,d:[{kind:"field",key:"chart",value:void 0},{kind:"field",decorators:[(0,n.Cb)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,n.Cb)({attribute:"chart-type",reflect:!0})],key:"chartType",value(){return"line"}},{kind:"field",decorators:[(0,n.Cb)({attribute:!1})],key:"data",value(){return{datasets:[]}}},{kind:"field",decorators:[(0,n.Cb)({attribute:!1})],key:"extraData",value:void 0},{kind:"field",decorators:[(0,n.Cb)({attribute:!1})],key:"options",value:void 0},{kind:"field",decorators:[(0,n.Cb)({attribute:!1})],key:"plugins",value:void 0},{kind:"field",decorators:[(0,n.Cb)({type:Number})],key:"height",value:void 0},{kind:"field",decorators:[(0,n.Cb)({attribute:!1,type:Number})],key:"paddingYAxis",value(){return 0}},{kind:"field",decorators:[(0,n.Cb)({attribute:"external-hidden",type:Boolean})],key:"externalHidden",value(){return!1}},{kind:"field",decorators:[(0,n.SB)()],key:"_chartHeight",value:void 0},{kind:"field",decorators:[(0,n.SB)()],key:"_legendHeight",value:void 0},{kind:"field",decorators:[(0,n.SB)()],key:"_tooltip",value:void 0},{kind:"field",decorators:[(0,n.SB)()],key:"_hiddenDatasets",value(){return new Set}},{kind:"field",decorators:[(0,n.SB)()],key:"_showZoomHint",value(){return!1}},{kind:"field",decorators:[(0,n.SB)()],key:"_isZoomed",value(){return!1}},{kind:"field",key:"_paddingUpdateCount",value(){return 0}},{kind:"field",key:"_paddingUpdateLock",value(){return!1}},{kind:"field",key:"_paddingYAxisInternal",value(){return 0}},{kind:"field",key:"_datasetOrder",value(){return[]}},{kind:"method",key:"disconnectedCallback",value:function(){(0,o.Z)(a,"disconnectedCallback",this,3)([]),this._releaseCanvas()}},{kind:"method",key:"connectedCallback",value:function(){(0,o.Z)(a,"connectedCallback",this,3)([]),this.hasUpdated&&(this._releaseCanvas(),this._setupChart())}},{kind:"field",key:"updateChart",value(){return t=>{var i;null===(i=this.chart)||void 0===i||i.update(t)}}},{kind:"field",key:"resize",value(){return t=>{var i,e,a,o;if(null!=t&&t.aspectRatio&&!t.height)t.height=Math.round((null!==(o=t.width)&&void 0!==o?o:this.clientWidth)/t.aspectRatio);else if(null!=t&&t.aspectRatio&&!t.width){var d;t.width=Math.round((null!==(d=t.height)&&void 0!==d?d:this.clientHeight)*t.aspectRatio)}null===(i=this.chart)||void 0===i||i.resize(null!==(e=null==t?void 0:t.width)&&void 0!==e?e:this.clientWidth,null!==(a=null==t?void 0:t.height)&&void 0!==a?a:this.clientHeight)}}},{kind:"method",key:"firstUpdated",value:function(){this._setupChart(),this.data.datasets.forEach(((t,i)=>{t.hidden&&this._hiddenDatasets.add(i)}))}},{kind:"method",key:"shouldUpdate",value:function(t){return!this._paddingUpdateLock||1!==t.size||!t.has("paddingYAxis")}},{kind:"field",key:"_debouncedClearUpdates",value(){return(0,c.D)((()=>{this._paddingUpdateCount=0}),2e3,!1)}},{kind:"method",key:"willUpdate",value:function(t){var i,e;((0,o.Z)(a,"willUpdate",this,3)([t]),this._paddingUpdateLock||(this._paddingYAxisInternal=this.paddingYAxis,1===t.size&&t.has("paddingYAxis")&&(this._paddingUpdateCount++,this._paddingUpdateCount>300?(this._paddingUpdateLock=!0,console.error("Detected excessive chart padding updates, possibly an infinite loop. Disabling axis padding.")):this._debouncedClearUpdates())),t.has("data"))&&(this._datasetOrder=this.data.datasets.map(((t,i)=>i)),null!==(i=this.data)&&void 0!==i&&i.datasets.some((t=>t.order))&&this._datasetOrder.sort(((t,i)=>(this.data.datasets[t].order||0)-(this.data.datasets[i].order||0))),this.externalHidden&&(this._hiddenDatasets=new Set,null!==(e=this.data)&&void 0!==e&&e.datasets&&this.data.datasets.forEach(((t,i)=>{t.hidden&&this._hiddenDatasets.add(i)}))));if(this.hasUpdated&&this.chart){if(t.has("plugins")||t.has("chartType"))return this._releaseCanvas(),void this._setupChart();t.has("data")&&(this._hiddenDatasets.size&&!this.externalHidden&&this.data.datasets.forEach(((t,i)=>{t.hidden=this._hiddenDatasets.has(i)})),this.chart.data=this.data),t.has("options")&&!this.chart.isZoomedOrPanned()&&(this.chart.options=this._createOptions()),this.chart.update("none")}}},{kind:"method",key:"updated",value:function(t){var i,e;((0,o.Z)(a,"updated",this,3)([t]),t.has("data")||t.has("options"))&&(null!==(i=this.options)&&void 0!==i&&null!==(i=i.plugins)&&void 0!==i&&null!==(i=i.legend)&&void 0!==i&&i.display?this._legendHeight=null===(e=this.renderRoot.querySelector(".chart-legend"))||void 0===e?void 0:e.clientHeight:this._legendHeight=0)}},{kind:"method",key:"render",value:function(){var t,i,e;return(0,d.dy)(p||(p=x` ${0} <div class="animation-container" style="${0}"> <div class="chart-container" style="${0}" @wheel="${0}"> <canvas class="${0}"></canvas> <div class="zoom-hint ${0}"> <div> ${0} </div> </div> ${0} </div> </div> `),!0===(null===(t=this.options)||void 0===t||null===(t=t.plugins)||void 0===t||null===(t=t.legend)||void 0===t?void 0:t.display)?(0,d.dy)(v||(v=x`<div class="chart-legend"> <ul> ${0} </ul> </div>`),this._datasetOrder.map((t=>{var i,e,a,o,n;const r=this.data.datasets[t];return!1===(null===(i=this.extraData)||void 0===i||null===(i=i[t])||void 0===i?void 0:i.show_legend)?d.Ld:(0,d.dy)(g||(g=x`<li .datasetIndex="${0}" @click="${0}" class="${0}" .title="${0}"> <div class="bullet" style="${0}"></div> <div class="label"> ${0} </div> </li>`),t,this._legendClick,(0,s.$)({hidden:this._hiddenDatasets.has(t)}),null!==(e=null===(a=this.extraData)||void 0===a||null===(a=a[t])||void 0===a?void 0:a.legend_label)&&void 0!==e?e:r.label,(0,l.V)({backgroundColor:r.backgroundColor,borderColor:r.borderColor}),null!==(o=null===(n=this.extraData)||void 0===n||null===(n=n[t])||void 0===n?void 0:n.legend_label)&&void 0!==o?o:r.label)}))):"",(0,l.V)({height:`${this.height||this._chartHeight||0}px`,overflow:this._chartHeight?"initial":"hidden"}),(0,l.V)({height:`${null!==(i=null!==(e=this.height)&&void 0!==e?e:this._chartHeight)&&void 0!==i?i:this.clientWidth/2}px`,"padding-left":`${this._paddingYAxisInternal}px`,"padding-right":0,"padding-inline-start":`${this._paddingYAxisInternal}px`,"padding-inline-end":0}),this._handleChartScroll,(0,s.$)({"not-zoomed":!this._isZoomed}),(0,s.$)({visible:this._showZoomHint}),u?this.hass.localize("ui.components.history_charts.zoom_hint_mac"):this.hass.localize("ui.components.history_charts.zoom_hint"),this._tooltip?(0,d.dy)(b||(b=x`<div class="chart-tooltip ${0}" style="${0}"> <div class="title">${0}</div> ${0} <div> <ul> ${0} </ul> </div> ${0} </div>`),(0,s.$)({[this._tooltip.yAlign]:!0}),(0,l.V)({top:this._tooltip.top,left:this._tooltip.left}),this._tooltip.title,this._tooltip.beforeBody?(0,d.dy)(y||(y=x`<div class="before-body"> ${0} </div>`),this._tooltip.beforeBody):"",this._tooltip.body.map(((t,i)=>(0,d.dy)(k||(k=x`<li> <div class="bullet" style="${0}"></div> ${0} </li>`),(0,l.V)({backgroundColor:this._tooltip.labelColors[i].backgroundColor,borderColor:this._tooltip.labelColors[i].borderColor}),t.lines.join("\n")))),this._tooltip.footer.length?(0,d.dy)(f||(f=x`<div class="footer"> ${0} </div>`),this._tooltip.footer.map((t=>(0,d.dy)(_||(_=x`${0}<br>`),t)))):""):"")}},{kind:"field",key:"_loading",value(){return!1}},{kind:"method",key:"_setupChart",value:async function(){if(this._loading)return;const t=this.renderRoot.querySelector("canvas").getContext("2d");this._loading=!0;try{const i=(await Promise.all([e.e("471"),e.e("41074"),e.e("72383")]).then(e.bind(e,63876))).Chart,a=getComputedStyle(this);i.defaults.borderColor=a.getPropertyValue("--divider-color"),i.defaults.color=a.getPropertyValue("--secondary-text-color"),i.defaults.font.family=a.getPropertyValue("--mdc-typography-body1-font-family")||a.getPropertyValue("--mdc-typography-font-family")||"Roboto, Noto, sans-serif",this.chart=new i(t,{type:this.chartType,data:this.data,options:this._createOptions(),plugins:this._createPlugins()})}finally{this._loading=!1}}},{kind:"method",key:"_createOptions",value:function(){var t,i,e,a,o,d;const n=u?"meta":"ctrl";return Object.assign(Object.assign({maintainAspectRatio:!1,animation:{duration:500}},this.options),{},{plugins:Object.assign(Object.assign({},null===(t=this.options)||void 0===t?void 0:t.plugins),{},{tooltip:Object.assign(Object.assign({},null===(i=this.options)||void 0===i||null===(i=i.plugins)||void 0===i?void 0:i.tooltip),{},{enabled:!1,external:t=>this._handleTooltip(t)}),legend:Object.assign(Object.assign({},null===(e=this.options)||void 0===e||null===(e=e.plugins)||void 0===e?void 0:e.legend),{},{display:!1}),zoom:Object.assign(Object.assign({},null===(a=this.options)||void 0===a||null===(a=a.plugins)||void 0===a?void 0:a.zoom),{},{pan:{enabled:!0},zoom:{pinch:{enabled:!0},drag:{enabled:!0,modifierKey:n,threshold:2},wheel:{enabled:!0,modifierKey:n,speed:.05},mode:"x",onZoomComplete:()=>{var t,i;const e=null!==(t=null===(i=this.chart)||void 0===i?void 0:i.isZoomedOrPanned())&&void 0!==t&&t;this._isZoomed&&!e&&setTimeout((()=>{var t;null===(t=this.chart)||void 0===t||t.resetZoom()})),this._isZoomed=e}},limits:{x:{min:"original",max:null!==(o=null===(d=this.options)||void 0===d||null===(d=d.scales)||void 0===d||null===(d=d.x)||void 0===d?void 0:d.max)&&void 0!==o?o:"original"},y:{min:"original",max:"original"}}})})})}},{kind:"method",key:"_createPlugins",value:function(){var t;return[...this.plugins||[],{id:"resizeHook",resize:t=>{var i;const e=t.height-(null!==(i=this._chartHeight)&&void 0!==i?i:0);(!this._chartHeight||e>12||e<-12)&&(this._chartHeight=t.height)},legend:Object.assign(Object.assign({},null===(t=this.options)||void 0===t||null===(t=t.plugins)||void 0===t?void 0:t.legend),{},{display:!1})}]}},{kind:"method",key:"_handleChartScroll",value:function(t){const i=u?"metaKey":"ctrlKey";this._tooltip=void 0,t[i]||this._showZoomHint||(this._showZoomHint=!0,setTimeout((()=>{this._showZoomHint=!1}),1e3))}},{kind:"method",key:"_legendClick",value:function(t){if(!this.chart)return;const i=t.currentTarget.datasetIndex;this.chart.isDatasetVisible(i)?(this.chart.setDatasetVisibility(i,!1),this._hiddenDatasets.add(i),this.externalHidden&&(0,r.B)(this,"dataset-hidden",{index:i})):(this.chart.setDatasetVisibility(i,!0),this._hiddenDatasets.delete(i),this.externalHidden&&(0,r.B)(this,"dataset-unhidden",{index:i})),this.chart.update("none"),this.requestUpdate("_hiddenDatasets")}},{kind:"method",key:"_handleTooltip",value:function(t){if(0===t.tooltip.opacity)return void(this._tooltip=void 0);const i=this.getBoundingClientRect();this._tooltip=Object.assign(Object.assign({},t.tooltip),{},{top:i.y+(this._legendHeight||0)+t.tooltip.caretY+12+"px",left:(0,h.u)(i.x+t.tooltip.caretX,i.x+100,i.x+i.width-100)-100+"px"})}},{kind:"method",key:"_releaseCanvas",value:function(){this.chart&&this.chart.destroy()}},{kind:"get",static:!0,key:"styles",value:function(){return(0,d.iv)(m||(m=x`:host{display:block;position:relative}.animation-container{overflow:hidden;height:0;transition:height .3s cubic-bezier(.4, 0, .2, 1)}canvas{max-height:var(--chart-max-height,400px)}canvas.not-zoomed{touch-action:pan-y!important}.chart-legend{text-align:center}.chart-legend li{cursor:pointer;display:inline-grid;grid-auto-flow:column;padding:0 8px;box-sizing:border-box;align-items:center;color:var(--secondary-text-color)}.chart-legend .hidden{text-decoration:line-through}.chart-legend .label{text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.chart-legend .bullet,.chart-tooltip .bullet{border-width:1px;border-style:solid;border-radius:50%;display:inline-block;height:16px;margin-right:6px;width:16px;flex-shrink:0;box-sizing:border-box;margin-inline-end:6px;margin-inline-start:initial;direction:var(--direction)}.chart-tooltip .bullet{align-self:baseline}.chart-tooltip{padding:8px;font-size:90%;position:fixed;background:rgba(80,80,80,.9);color:#fff;border-radius:4px;pointer-events:none;z-index:1;-ms-user-select:none;-webkit-user-select:none;-moz-user-select:none;width:200px;box-sizing:border-box;direction:var(--direction)}.chart-legend ul,.chart-tooltip ul{display:inline-block;padding:0 0px;margin:8px 0 0 0;width:100%}.chart-tooltip ul{margin:0 4px}.chart-tooltip li{display:flex;white-space:pre-line;word-break:break-word;align-items:center;line-height:16px;padding:4px 0}.chart-tooltip .title{text-align:center;font-weight:500;word-break:break-word;direction:ltr}.chart-tooltip .footer{font-weight:500}.chart-tooltip .before-body{text-align:center;font-weight:300;word-break:break-all}.zoom-hint{position:absolute;top:0;left:0;right:0;bottom:0;display:flex;align-items:center;justify-content:center;opacity:0;transition:opacity .5s cubic-bezier(.4, 0, .2, 1);pointer-events:none}.zoom-hint.visible{opacity:1}.zoom-hint>div{color:#fff;font-size:1.5em;font-weight:500;padding:8px;border-radius:8px;background:rgba(0,0,0,.3);box-shadow:0 0 32px 32px rgba(0,0,0,.3)}`))}}]}}),d.oi)}}]);
//# sourceMappingURL=96245.0a6a8748a46f547d.js.map