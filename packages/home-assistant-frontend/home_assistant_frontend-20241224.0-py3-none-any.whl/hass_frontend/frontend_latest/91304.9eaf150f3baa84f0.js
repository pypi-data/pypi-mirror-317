export const ids=["91304"];export const modules={50875:function(t,e,i){i.d(e,{Eu:function(){return o},hZ:function(){return n}});var a=i(11259);const s=["#4269d0","#f4bd4a","#ff725c","#6cc5b0","#a463f2","#ff8ab7","#9c6b4e","#97bbf5","#01ab63","#9498a0","#094bad","#c99000","#d84f3e","#49a28f","#048732","#d96895","#8043ce","#7599d1","#7a4c31","#74787f","#6989f4","#ffd444","#ff957c","#8fe9d3","#62cc71","#ffadda","#c884ff","#badeff","#bf8b6d","#b6bac2","#927acc","#97ee3f","#bf3947","#9f5b00","#f48758","#8caed6","#f2b94f","#eff26e","#e43872","#d9b100","#9d7a00","#698cff","#d9d9d9","#00d27e","#d06800","#009f82","#c49200","#cbe8ff","#fecddf","#c27eb6","#8cd2ce","#c4b8d9","#f883b0","#a49100","#f48800","#27d0df","#a04a9b"];function o(t){return s[t%s.length]}function n(t,e){const i=e.getPropertyValue(`--graph-color-${t+1}`)||o(t);return(0,a.Rq)(i)}},29937:function(t,e,i){i.d(e,{Q:()=>p});var a=i("44249"),s=i("72621"),o=(i("92519"),i("42179"),i("89256"),i("24931"),i("88463"),i("57449"),i("19814"),i("39527"),i("41360"),i("13334"),i("36993"),i("57243")),n=i("15093"),d=i("35359"),r=i("69634"),h=i("36522"),l=i("34593"),c=i("22381");const u=/Mac/i.test(navigator.userAgent),p=3e5;(0,a.Z)([(0,n.Mo)("ha-chart-base")],(function(t,e){class a extends e{constructor(...e){super(...e),t(this)}}return{F:a,d:[{kind:"field",key:"chart",value:void 0},{kind:"field",decorators:[(0,n.Cb)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,n.Cb)({attribute:"chart-type",reflect:!0})],key:"chartType",value:()=>"line"},{kind:"field",decorators:[(0,n.Cb)({attribute:!1})],key:"data",value:()=>({datasets:[]})},{kind:"field",decorators:[(0,n.Cb)({attribute:!1})],key:"extraData",value:void 0},{kind:"field",decorators:[(0,n.Cb)({attribute:!1})],key:"options",value:void 0},{kind:"field",decorators:[(0,n.Cb)({attribute:!1})],key:"plugins",value:void 0},{kind:"field",decorators:[(0,n.Cb)({type:Number})],key:"height",value:void 0},{kind:"field",decorators:[(0,n.Cb)({attribute:!1,type:Number})],key:"paddingYAxis",value:()=>0},{kind:"field",decorators:[(0,n.Cb)({attribute:"external-hidden",type:Boolean})],key:"externalHidden",value:()=>!1},{kind:"field",decorators:[(0,n.SB)()],key:"_chartHeight",value:void 0},{kind:"field",decorators:[(0,n.SB)()],key:"_legendHeight",value:void 0},{kind:"field",decorators:[(0,n.SB)()],key:"_tooltip",value:void 0},{kind:"field",decorators:[(0,n.SB)()],key:"_hiddenDatasets",value:()=>new Set},{kind:"field",decorators:[(0,n.SB)()],key:"_showZoomHint",value:()=>!1},{kind:"field",decorators:[(0,n.SB)()],key:"_isZoomed",value:()=>!1},{kind:"field",key:"_paddingUpdateCount",value:()=>0},{kind:"field",key:"_paddingUpdateLock",value:()=>!1},{kind:"field",key:"_paddingYAxisInternal",value:()=>0},{kind:"field",key:"_datasetOrder",value:()=>[]},{kind:"method",key:"disconnectedCallback",value:function(){(0,s.Z)(a,"disconnectedCallback",this,3)([]),this._releaseCanvas()}},{kind:"method",key:"connectedCallback",value:function(){(0,s.Z)(a,"connectedCallback",this,3)([]),this.hasUpdated&&(this._releaseCanvas(),this._setupChart())}},{kind:"field",key:"updateChart",value(){return t=>{this.chart?.update(t)}}},{kind:"field",key:"resize",value(){return t=>{t?.aspectRatio&&!t.height?t.height=Math.round((t.width??this.clientWidth)/t.aspectRatio):t?.aspectRatio&&!t.width&&(t.width=Math.round((t.height??this.clientHeight)*t.aspectRatio)),this.chart?.resize(t?.width??this.clientWidth,t?.height??this.clientHeight)}}},{kind:"method",key:"firstUpdated",value:function(){this._setupChart(),this.data.datasets.forEach(((t,e)=>{t.hidden&&this._hiddenDatasets.add(e)}))}},{kind:"method",key:"shouldUpdate",value:function(t){return!this._paddingUpdateLock||1!==t.size||!t.has("paddingYAxis")}},{kind:"field",key:"_debouncedClearUpdates",value(){return(0,c.D)((()=>{this._paddingUpdateCount=0}),2e3,!1)}},{kind:"method",key:"willUpdate",value:function(t){if((0,s.Z)(a,"willUpdate",this,3)([t]),this._paddingUpdateLock||(this._paddingYAxisInternal=this.paddingYAxis,1===t.size&&t.has("paddingYAxis")&&(this._paddingUpdateCount++,this._paddingUpdateCount>300?(this._paddingUpdateLock=!0,console.error("Detected excessive chart padding updates, possibly an infinite loop. Disabling axis padding.")):this._debouncedClearUpdates())),t.has("data")&&(this._datasetOrder=this.data.datasets.map(((t,e)=>e)),this.data?.datasets.some((t=>t.order))&&this._datasetOrder.sort(((t,e)=>(this.data.datasets[t].order||0)-(this.data.datasets[e].order||0))),this.externalHidden&&(this._hiddenDatasets=new Set,this.data?.datasets&&this.data.datasets.forEach(((t,e)=>{t.hidden&&this._hiddenDatasets.add(e)})))),this.hasUpdated&&this.chart){if(t.has("plugins")||t.has("chartType"))return this._releaseCanvas(),void this._setupChart();t.has("data")&&(this._hiddenDatasets.size&&!this.externalHidden&&this.data.datasets.forEach(((t,e)=>{t.hidden=this._hiddenDatasets.has(e)})),this.chart.data=this.data),t.has("options")&&!this.chart.isZoomedOrPanned()&&(this.chart.options=this._createOptions()),this.chart.update("none")}}},{kind:"method",key:"updated",value:function(t){(0,s.Z)(a,"updated",this,3)([t]),(t.has("data")||t.has("options"))&&(this.options?.plugins?.legend?.display?this._legendHeight=this.renderRoot.querySelector(".chart-legend")?.clientHeight:this._legendHeight=0)}},{kind:"method",key:"render",value:function(){return o.dy` ${!0===this.options?.plugins?.legend?.display?o.dy`<div class="chart-legend"> <ul> ${this._datasetOrder.map((t=>{const e=this.data.datasets[t];return!1===this.extraData?.[t]?.show_legend?o.Ld:o.dy`<li .datasetIndex="${t}" @click="${this._legendClick}" class="${(0,d.$)({hidden:this._hiddenDatasets.has(t)})}" .title="${this.extraData?.[t]?.legend_label??e.label}"> <div class="bullet" style="${(0,r.V)({backgroundColor:e.backgroundColor,borderColor:e.borderColor})}"></div> <div class="label"> ${this.extraData?.[t]?.legend_label??e.label} </div> </li>`}))} </ul> </div>`:""} <div class="animation-container" style="${(0,r.V)({height:`${this.height||this._chartHeight||0}px`,overflow:this._chartHeight?"initial":"hidden"})}"> <div class="chart-container" style="${(0,r.V)({height:`${this.height??this._chartHeight??this.clientWidth/2}px`,"padding-left":`${this._paddingYAxisInternal}px`,"padding-right":0,"padding-inline-start":`${this._paddingYAxisInternal}px`,"padding-inline-end":0})}" @wheel="${this._handleChartScroll}"> <canvas class="${(0,d.$)({"not-zoomed":!this._isZoomed})}"></canvas> <div class="zoom-hint ${(0,d.$)({visible:this._showZoomHint})}"> <div> ${u?this.hass.localize("ui.components.history_charts.zoom_hint_mac"):this.hass.localize("ui.components.history_charts.zoom_hint")} </div> </div> ${this._tooltip?o.dy`<div class="chart-tooltip ${(0,d.$)({[this._tooltip.yAlign]:!0})}" style="${(0,r.V)({top:this._tooltip.top,left:this._tooltip.left})}"> <div class="title">${this._tooltip.title}</div> ${this._tooltip.beforeBody?o.dy`<div class="before-body"> ${this._tooltip.beforeBody} </div>`:""} <div> <ul> ${this._tooltip.body.map(((t,e)=>o.dy`<li> <div class="bullet" style="${(0,r.V)({backgroundColor:this._tooltip.labelColors[e].backgroundColor,borderColor:this._tooltip.labelColors[e].borderColor})}"></div> ${t.lines.join("\n")} </li>`))} </ul> </div> ${this._tooltip.footer.length?o.dy`<div class="footer"> ${this._tooltip.footer.map((t=>o.dy`${t}<br>`))} </div>`:""} </div>`:""} </div> </div> `}},{kind:"field",key:"_loading",value:()=>!1},{kind:"method",key:"_setupChart",value:async function(){if(this._loading)return;const t=this.renderRoot.querySelector("canvas").getContext("2d");this._loading=!0;try{const e=(await Promise.all([i.e("471"),i.e("13164"),i.e("49702")]).then(i.bind(i,63876))).Chart,a=getComputedStyle(this);e.defaults.borderColor=a.getPropertyValue("--divider-color"),e.defaults.color=a.getPropertyValue("--secondary-text-color"),e.defaults.font.family=a.getPropertyValue("--mdc-typography-body1-font-family")||a.getPropertyValue("--mdc-typography-font-family")||"Roboto, Noto, sans-serif",this.chart=new e(t,{type:this.chartType,data:this.data,options:this._createOptions(),plugins:this._createPlugins()})}finally{this._loading=!1}}},{kind:"method",key:"_createOptions",value:function(){const t=u?"meta":"ctrl";return{maintainAspectRatio:!1,animation:{duration:500},...this.options,plugins:{...this.options?.plugins,tooltip:{...this.options?.plugins?.tooltip,enabled:!1,external:t=>this._handleTooltip(t)},legend:{...this.options?.plugins?.legend,display:!1},zoom:{...this.options?.plugins?.zoom,pan:{enabled:!0},zoom:{pinch:{enabled:!0},drag:{enabled:!0,modifierKey:t,threshold:2},wheel:{enabled:!0,modifierKey:t,speed:.05},mode:"x",onZoomComplete:()=>{const t=this.chart?.isZoomedOrPanned()??!1;this._isZoomed&&!t&&setTimeout((()=>{this.chart?.resetZoom()})),this._isZoomed=t}},limits:{x:{min:"original",max:this.options?.scales?.x?.max??"original"},y:{min:"original",max:"original"}}}}}}},{kind:"method",key:"_createPlugins",value:function(){return[...this.plugins||[],{id:"resizeHook",resize:t=>{const e=t.height-(this._chartHeight??0);(!this._chartHeight||e>12||e<-12)&&(this._chartHeight=t.height)},legend:{...this.options?.plugins?.legend,display:!1}}]}},{kind:"method",key:"_handleChartScroll",value:function(t){const e=u?"metaKey":"ctrlKey";this._tooltip=void 0,t[e]||this._showZoomHint||(this._showZoomHint=!0,setTimeout((()=>{this._showZoomHint=!1}),1e3))}},{kind:"method",key:"_legendClick",value:function(t){if(!this.chart)return;const e=t.currentTarget.datasetIndex;this.chart.isDatasetVisible(e)?(this.chart.setDatasetVisibility(e,!1),this._hiddenDatasets.add(e),this.externalHidden&&(0,h.B)(this,"dataset-hidden",{index:e})):(this.chart.setDatasetVisibility(e,!0),this._hiddenDatasets.delete(e),this.externalHidden&&(0,h.B)(this,"dataset-unhidden",{index:e})),this.chart.update("none"),this.requestUpdate("_hiddenDatasets")}},{kind:"method",key:"_handleTooltip",value:function(t){if(0===t.tooltip.opacity)return void(this._tooltip=void 0);const e=this.getBoundingClientRect();this._tooltip={...t.tooltip,top:e.y+(this._legendHeight||0)+t.tooltip.caretY+12+"px",left:(0,l.u)(e.x+t.tooltip.caretX,e.x+100,e.x+e.width-100)-100+"px"}}},{kind:"method",key:"_releaseCanvas",value:function(){this.chart&&this.chart.destroy()}},{kind:"get",static:!0,key:"styles",value:function(){return o.iv`:host{display:block;position:relative}.animation-container{overflow:hidden;height:0;transition:height .3s cubic-bezier(.4, 0, .2, 1)}canvas{max-height:var(--chart-max-height,400px)}canvas.not-zoomed{touch-action:pan-y!important}.chart-legend{text-align:center}.chart-legend li{cursor:pointer;display:inline-grid;grid-auto-flow:column;padding:0 8px;box-sizing:border-box;align-items:center;color:var(--secondary-text-color)}.chart-legend .hidden{text-decoration:line-through}.chart-legend .label{text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.chart-legend .bullet,.chart-tooltip .bullet{border-width:1px;border-style:solid;border-radius:50%;display:inline-block;height:16px;margin-right:6px;width:16px;flex-shrink:0;box-sizing:border-box;margin-inline-end:6px;margin-inline-start:initial;direction:var(--direction)}.chart-tooltip .bullet{align-self:baseline}.chart-tooltip{padding:8px;font-size:90%;position:fixed;background:rgba(80,80,80,.9);color:#fff;border-radius:4px;pointer-events:none;z-index:1;-ms-user-select:none;-webkit-user-select:none;-moz-user-select:none;width:200px;box-sizing:border-box;direction:var(--direction)}.chart-legend ul,.chart-tooltip ul{display:inline-block;padding:0 0px;margin:8px 0 0 0;width:100%}.chart-tooltip ul{margin:0 4px}.chart-tooltip li{display:flex;white-space:pre-line;word-break:break-word;align-items:center;line-height:16px;padding:4px 0}.chart-tooltip .title{text-align:center;font-weight:500;word-break:break-word;direction:ltr}.chart-tooltip .footer{font-weight:500}.chart-tooltip .before-body{text-align:center;font-weight:300;word-break:break-all}.zoom-hint{position:absolute;top:0;left:0;right:0;bottom:0;display:flex;align-items:center;justify-content:center;opacity:0;transition:opacity .5s cubic-bezier(.4, 0, .2, 1);pointer-events:none}.zoom-hint.visible{opacity:1}.zoom-hint>div{color:#fff;font-size:1.5em;font-weight:500;padding:8px;border-radius:8px;background:rgba(0,0,0,.3);box-shadow:0 0 32px 32px rgba(0,0,0,.3)}`}}]}}),o.oi)},65354:function(t,e,i){i.d(e,{U:function(){return p}});var a=i(50875),s=i(11259),o=i(4643),n=i(73850),d=i(42818),r=i(96194),h=i(76190);const l={media_player:{paused:.5,idle:1},vacuum:{returning:.5}};let c=0;const u=new Map;function p(t,e,i){return function(t,e,i){if(!i||t===r.nZ)return(0,h.g)("--history-unavailable-color",e);if(t===r.lz)return(0,h.g)("--history-unknown-color",e);const a=(0,d.tD)(i,t);if(!a)return;const c=(0,h.g)(a,e);if(!c)return;const u=(0,n.M)(i.entity_id),p=l[u]?.[t];return p?(0,s.uO)((0,o.C)((0,s.Rw)((0,s.wK)(c)),p)):c}(t,e,i)||function(t,e){if(u.has(t))return u.get(t);const i=(0,a.hZ)(c,e);return c++,u.set(t,i),i}(t,e)}},26799:function(t,e,i){i.a(t,(async function(t,a){try{i.r(e),i.d(e,{DEFAULT_HOURS_TO_SHOW:function(){return _},HuiHistoryGraphCard:function(){return b}});var s=i(44249),o=i(72621),n=(i(92745),i(39527),i(41360),i(57243)),d=i(15093),r=i(35359),h=i(72344),l=i(71489),c=(i(99426),i(54977),i(13928),i(6280)),u=i(96309),p=i(93331),f=i(29401),g=i(58776),y=t([l,c]);[l,c]=y.then?(await y)():y;const _=24;let b=(0,s.Z)([(0,d.Mo)("hui-history-graph-card")],(function(t,e){class a extends e{constructor(...e){super(...e),t(this)}}return{F:a,d:[{kind:"method",static:!0,key:"getConfigElement",value:async function(){return await Promise.all([i.e("46379"),i.e("24199"),i.e("27506"),i.e("67390"),i.e("3049"),i.e("47744")]).then(i.bind(i,96312)),document.createElement("hui-history-graph-card-editor")}},{kind:"method",static:!0,key:"getStubConfig",value:function(){return{type:"history-graph",entities:["sun.sun"]}}},{kind:"field",decorators:[(0,d.Cb)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,d.SB)()],key:"_stateHistory",value:void 0},{kind:"field",decorators:[(0,d.SB)()],key:"_config",value:void 0},{kind:"field",decorators:[(0,d.SB)()],key:"_error",value:void 0},{kind:"field",key:"_names",value:()=>({})},{kind:"field",key:"_entityIds",value:()=>[]},{kind:"field",key:"_hoursToShow",value:()=>_},{kind:"field",key:"_interval",value:void 0},{kind:"field",key:"_subscribed",value:void 0},{kind:"method",key:"getCardSize",value:function(){return this._config?.title?2:0+2*(this._entityIds?.length||1)}},{kind:"method",key:"setConfig",value:function(t){if(!t.entities||!Array.isArray(t.entities))throw new Error("Entities need to be an array");if(!t.entities.length)throw new Error("You must include at least one entity");const e=t.entities?(0,f.A)(t.entities):[];this._entityIds=[],e.forEach((t=>{this._entityIds.push(t.entity),t.name&&(this._names[t.entity]=t.name)})),this._hoursToShow=t.hours_to_show||_,this._config=t}},{kind:"method",key:"connectedCallback",value:function(){(0,o.Z)(a,"connectedCallback",this,3)([]),this.hasUpdated&&this._subscribeHistory()}},{kind:"method",key:"disconnectedCallback",value:function(){(0,o.Z)(a,"disconnectedCallback",this,3)([]),this._unsubscribeHistory()}},{kind:"method",key:"_subscribeHistory",value:async function(){if(!(0,h.p)(this.hass,"history")||this._subscribed)return;const{numeric_device_classes:t}=await(0,u.ib)(this.hass);this._subscribed=(0,c.xS)(this.hass,(e=>{this._subscribed&&(this._stateHistory=(0,c.Nu)(this.hass,e,this._entityIds,this.hass.localize,t,this._config?.split_device_classes))}),this._hoursToShow,this._entityIds).catch((t=>{this._subscribed=void 0,this._error=t})),this._setRedrawTimer()}},{kind:"method",key:"_redrawGraph",value:function(){this._stateHistory&&(this._stateHistory={...this._stateHistory})}},{kind:"method",key:"_setRedrawTimer",value:function(){clearInterval(this._interval),this._interval=window.setInterval((()=>this._redrawGraph()),6e4)}},{kind:"method",key:"_unsubscribeHistory",value:function(){clearInterval(this._interval),this._subscribed&&(this._subscribed.then((t=>t?.())),this._subscribed=void 0)}},{kind:"method",key:"shouldUpdate",value:function(t){return(0,p.Wh)(this,t)||t.size>1||!t.has("hass")}},{kind:"method",key:"updated",value:function(t){if((0,o.Z)(a,"updated",this,3)([t]),!(this._config&&this.hass&&this._hoursToShow&&this._entityIds.length))return;if(!t.has("_config")&&!t.has("hass"))return;const e=t.get("_config");!t.has("_config")||e?.entities===this._config.entities&&e?.hours_to_show===this._config.hours_to_show||(this._unsubscribeHistory(),this._subscribeHistory())}},{kind:"method",key:"render",value:function(){if(!this.hass||!this._config)return n.Ld;const t=new Date;t.setHours(t.getHours()-this._hoursToShow);const e=`/history?${(0,g.ou)({entity_id:this._entityIds.join(","),start_date:t.toISOString()})}`;return n.dy` <ha-card> ${this._config.title?n.dy` <h1 class="card-header"> ${this._config.title} <a href="${e}"><ha-icon-next></ha-icon-next></a> </h1> `:n.Ld} <div class="content ${(0,r.$)({"has-header":!!this._config.title})}"> ${this._error?n.dy` <ha-alert alert-type="error"> ${this.hass.localize("ui.components.history_charts.error")}: ${this._error.message||this._error.code} </ha-alert> `:n.dy` <state-history-charts .hass="${this.hass}" .isLoadingData="${!this._stateHistory}" .historyData="${this._stateHistory}" .names="${this._names}" up-to-now .hoursToShow="${this._hoursToShow}" .showNames="${void 0===this._config.show_names||this._config.show_names}" .logarithmicScale="${this._config.logarithmic_scale||!1}" .minYAxis="${this._config.min_y_axis}" .maxYAxis="${this._config.max_y_axis}" .fitYData="${this._config.fit_y_data||!1}"></state-history-charts> `} </div> </ha-card> `}},{kind:"get",static:!0,key:"styles",value:function(){return n.iv`ha-card{height:100%}.card-header{justify-content:space-between;display:flex}.card-header ha-icon-next{--mdc-icon-button-size:24px;line-height:24px;color:var(--primary-text-color)}.content{padding:16px}.has-header{padding-top:0}`}}]}}),n.oi);a()}catch(t){a(t)}}))}};
//# sourceMappingURL=91304.9eaf150f3baa84f0.js.map