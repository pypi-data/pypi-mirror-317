export const ids=["50437"];export const modules={87865:function(e,t,n){n.d(t,{v:function(){return i}});const i=async e=>{if(navigator.clipboard)try{return void await navigator.clipboard.writeText(e)}catch{}const t=document.createElement("textarea");t.value=e,document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t)}},5828:function(e,t,n){n.r(t),n.d(t,{HaIconButtonPrev:function(){return d}});var i=n(44249),o=n(57243),a=n(15093),s=n(5111);n(23334);let d=(0,i.Z)([(0,a.Mo)("ha-icon-button-prev")],(function(e,t){return{F:class extends t{constructor(...t){super(...t),e(this)}},d:[{kind:"field",decorators:[(0,a.Cb)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,a.Cb)({type:Boolean})],key:"disabled",value:()=>!1},{kind:"field",decorators:[(0,a.Cb)()],key:"label",value:void 0},{kind:"field",decorators:[(0,a.SB)()],key:"_icon",value:()=>"rtl"===s.E.document.dir?"M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z":"M15.41,16.58L10.83,12L15.41,7.41L14,6L8,12L14,18L15.41,16.58Z"},{kind:"method",key:"render",value:function(){return o.dy` <ha-icon-button .disabled="${this.disabled}" .label="${this.label||this.hass?.localize("ui.common.back")||"Back"}" .path="${this._icon}"></ha-icon-button> `}}]}}),o.oi)},51784:function(e,t,n){n.d(t,{dJ:function(){return p},zB:function(){return u}});var i=n(44249),o=n(72621),a=n(67840),s=n(88854),d=n(57243),l=n(15093);let r;a.A.addInitializer((async e=>{await e.updateComplete;const t=e;t.dialog.prepend(t.scrim),t.scrim.style.inset=0,t.scrim.style.zIndex=0;const{getOpenAnimation:n,getCloseAnimation:i}=t;t.getOpenAnimation=()=>{const e=n.call(void 0);return e.container=[...e.container??[],...e.dialog??[]],e.dialog=[],e},t.getCloseAnimation=()=>{const e=i.call(void 0);return e.container=[...e.container??[],...e.dialog??[]],e.dialog=[],e}}));(0,i.Z)([(0,l.Mo)("ha-md-dialog")],(function(e,t){class i extends t{constructor(){super(),e(this),this.addEventListener("cancel",this._handleCancel),"function"!=typeof HTMLDialogElement&&(this.addEventListener("open",this._handleOpen),r||(r=n.e("73854").then(n.bind(n,85893)))),void 0===this.animate&&(this.quick=!0),void 0===this.animate&&(this.quick=!0)}}return{F:i,d:[{kind:"field",decorators:[(0,l.Cb)({attribute:"disable-cancel-action",type:Boolean})],key:"disableCancelAction",value:()=>!1},{kind:"field",key:"_polyfillDialogRegistered",value:()=>!1},{kind:"method",key:"_handleOpen",value:async function(e){if(e.preventDefault(),this._polyfillDialogRegistered)return;this._polyfillDialogRegistered=!0,this._loadPolyfillStylesheet("/static/polyfills/dialog-polyfill.css");const t=this.shadowRoot?.querySelector("dialog");(await r).default.registerDialog(t),this.removeEventListener("open",this._handleOpen),this.show()}},{kind:"method",key:"_loadPolyfillStylesheet",value:async function(e){const t=document.createElement("link");return t.rel="stylesheet",t.href=e,new Promise(((n,i)=>{t.onload=()=>n(),t.onerror=()=>i(new Error(`Stylesheet failed to load: ${e}`)),this.shadowRoot?.appendChild(t)}))}},{kind:"method",key:"_handleCancel",value:function(e){if(this.disableCancelAction){e.preventDefault();const t=this.shadowRoot?.querySelector("dialog .container");void 0!==this.animate&&t?.animate([{transform:"rotate(-1deg)","animation-timing-function":"ease-in"},{transform:"rotate(1.5deg)","animation-timing-function":"ease-out"},{transform:"rotate(0deg)","animation-timing-function":"ease-in"}],{duration:200,iterations:2})}}},{kind:"field",static:!0,key:"styles",value(){return[...(0,o.Z)(i,"styles",this),d.iv`:host{--md-dialog-container-color:var(--card-background-color);--md-dialog-headline-color:var(--primary-text-color);--md-dialog-supporting-text-color:var(--primary-text-color);--md-sys-color-scrim:#000000;--md-dialog-headline-weight:400;--md-dialog-headline-size:1.574rem;--md-dialog-supporting-text-size:1rem;--md-dialog-supporting-text-line-height:1.5rem}:host([type=alert]){min-width:320px}@media all and (max-width:450px),all and (max-height:500px){:host(:not([type=alert])){min-width:calc(100vw - env(safe-area-inset-right) - env(safe-area-inset-left));max-width:calc(100vw - env(safe-area-inset-right) - env(safe-area-inset-left));min-height:100%;max-height:100%;--md-dialog-container-shape:0}}::slotted(ha-dialog-header[slot=headline]){display:contents}.scroller{overflow:var(--dialog-content-overflow,auto)}slot[name=content]::slotted(*){padding:var(--dialog-content-padding,24px)}.scrim{z-index:10}`]}}]}}),a.A);const c={...s.I,dialog:[[[{transform:"translateY(50px)"},{transform:"translateY(0)"}],{duration:500,easing:"cubic-bezier(.3,0,0,1)"}]],container:[[[{opacity:0},{opacity:1}],{duration:50,easing:"linear",pseudoElement:"::before"}]]},h={...s.G,dialog:[[[{transform:"translateY(0)"},{transform:"translateY(50px)"}],{duration:150,easing:"cubic-bezier(.3,0,0,1)"}]],container:[[[{opacity:"1"},{opacity:"0"}],{delay:100,duration:50,easing:"linear",pseudoElement:"::before"}]]},p=()=>window.matchMedia("all and (max-width: 450px), all and (max-height: 500px)").matches?c:s.I,u=()=>window.matchMedia("all and (max-width: 450px), all and (max-height: 500px)").matches?h:s.G},36943:function(e,t,n){n.r(t);var i=n(44249),o=n(57243),a=n(15093),s=n(36522),d=n(87865),l=(n(59826),n(95198),n(23334),n(5828),n(51784),n(19993),n(74633),n(34326),n(26779)),r=n(28008),c=n(58014),h=n(72473);const p="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z",u="M5,20H19V18H5M19,9H15V3H9V9H5L12,16L19,9Z",m=["current","new","done"];(0,i.Z)([(0,a.Mo)("ha-dialog-change-backup-encryption-key")],(function(e,t){return{F:class extends t{constructor(...t){super(...t),e(this)}},d:[{kind:"field",decorators:[(0,a.Cb)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,a.SB)()],key:"_opened",value:()=>!1},{kind:"field",decorators:[(0,a.SB)()],key:"_step",value:void 0},{kind:"field",decorators:[(0,a.SB)()],key:"_params",value:void 0},{kind:"field",decorators:[(0,a.IO)("ha-md-dialog")],key:"_dialog",value:void 0},{kind:"field",decorators:[(0,a.SB)()],key:"_newEncryptionKey",value:void 0},{kind:"method",key:"showDialog",value:function(e){this._params=e,this._step=m[0],this._opened=!0,this._newEncryptionKey=(0,l.Ty)()}},{kind:"method",key:"closeDialog",value:function(){this._params.cancel&&this._params.cancel(),this._opened&&(0,s.B)(this,"dialog-closed",{dialog:this.localName}),this._opened=!1,this._step=void 0,this._params=void 0,this._newEncryptionKey=void 0}},{kind:"method",key:"_done",value:function(){this._params?.submit(!0),this._dialog.close()}},{kind:"method",key:"_previousStep",value:function(){const e=m.indexOf(this._step);0!==e&&(this._step=m[e-1])}},{kind:"method",key:"_nextStep",value:function(){const e=m.indexOf(this._step);e!==m.length-1&&(this._step=m[e+1])}},{kind:"method",key:"render",value:function(){if(!this._opened||!this._params)return o.Ld;const e="current"===this._step?"Save current encryption key":"new"===this._step?"New encryption key":"";return o.dy` <ha-md-dialog disable-cancel-action open @closed="${this.closeDialog}"> <ha-dialog-header slot="headline"> ${"new"===this._step?o.dy` <ha-icon-button-prev slot="navigationIcon" @click="${this._previousStep}"></ha-icon-button-prev> `:o.dy` <ha-icon-button slot="navigationIcon" .label="${this.hass.localize("ui.dialogs.generic.close")}" .path="${"M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z"}" @click="${this.closeDialog}"></ha-icon-button> `} <span slot="title">${e}</span> </ha-dialog-header> <div slot="content">${this._renderStepContent()}</div> <div slot="actions"> ${"current"===this._step?o.dy`<ha-button @click="${this._nextStep}">Next</ha-button>`:"new"===this._step?o.dy` <ha-button @click="${this._submit}" .disabled="${!this._newEncryptionKey}" class="danger"> Change encryption key </ha-button> `:o.dy`<ha-button @click="${this._done}">Done</ha-button>`} </div> </ha-md-dialog> `}},{kind:"method",key:"_renderStepContent",value:function(){switch(this._step){case"current":return o.dy` <p> Make sure you have saved the current encryption key to make sure you have access to all your current backups. All next backups will use the new encryption key. </p> <div class="encryption-key"> <p>${this._params?.currentKey}</p> <ha-icon-button .path="${p}" @click="${this._copyOldKeyToClipboard}"></ha-icon-button> </div> <ha-md-list> <ha-md-list-item> <span slot="headline">Download old emergency kit</span> <span slot="supporting-text"> We recommend saving this encryption key file somewhere secure. </span> <ha-button slot="end" @click="${this._downloadOld}"> <ha-svg-icon .path="${u}" slot="icon"></ha-svg-icon> Download </ha-button> </ha-md-list-item> </ha-md-list> `;case"new":return o.dy` <p> Keep this encryption key in a safe place, as you will need it to access your backup, allowing it to be restored. Either record the characters below or download them as an emergency kit file. Encryption keeps your backups private and secure. </p> <div class="encryption-key"> <p>${this._newEncryptionKey}</p> <ha-icon-button .path="${p}" @click="${this._copyKeyToClipboard}"></ha-icon-button> </div> <ha-md-list> <ha-md-list-item> <span slot="headline">Download new emergency kit</span> <span slot="supporting-text"> We recommend saving this encryption key file somewhere secure. </span> <ha-button slot="end" @click="${this._downloadNew}"> <ha-svg-icon .path="${u}" slot="icon"></ha-svg-icon> Download </ha-button> </ha-md-list-item> </ha-md-list> `;case"done":return o.dy` <div class="done"> <img src="/static/images/voice-assistant/hi.png" alt="Casita Home Assistant logo"> <p>Encryption key changed</p> </div> `}return o.Ld}},{kind:"method",key:"_copyKeyToClipboard",value:function(){(0,d.v)(this._newEncryptionKey),(0,h.C)(this,{message:this.hass.localize("ui.common.copied_clipboard")})}},{kind:"method",key:"_copyOldKeyToClipboard",value:function(){this._params?.currentKey&&((0,d.v)(this._params.currentKey),(0,h.C)(this,{message:this.hass.localize("ui.common.copied_clipboard")}))}},{kind:"method",key:"_downloadOld",value:function(){this._params?.currentKey&&(0,c.N)("data:text/plain;charset=utf-8,"+encodeURIComponent(this._params.currentKey),"emergency_kit_old.txt")}},{kind:"method",key:"_downloadNew",value:function(){this._newEncryptionKey&&(0,c.N)("data:text/plain;charset=utf-8,"+encodeURIComponent(this._newEncryptionKey),"emergency_kit.txt")}},{kind:"method",key:"_submit",value:async function(){this._newEncryptionKey&&(this._params.saveKey(this._newEncryptionKey),this._nextStep())}},{kind:"get",static:!0,key:"styles",value:function(){return[r.Qx,r.yu,o.iv`ha-md-dialog{width:90vw;max-width:560px;--dialog-content-padding:8px 24px}ha-md-list{background:0 0;--md-list-item-leading-space:0;--md-list-item-trailing-space:0}ha-button.danger{--mdc-theme-primary:var(--error-color)}.encryption-key{border:1px solid var(--divider-color);background-color:var(--primary-background-color);border-radius:8px;padding:16px;display:flex;flex-direction:row;align-items:center;gap:24px}.encryption-key p{margin:0;flex:1;font-family:"Roboto Mono",Consolas,Menlo,monospace;font-size:20px;font-style:normal;font-weight:400;line-height:28px;text-align:center}.encryption-key ha-icon-button{flex:none;margin:-16px}@media all and (max-width:450px),all and (max-height:500px){ha-md-dialog{max-width:none}div[slot=content]{margin-top:0}}p{margin-top:0}.done{text-align:center;font-size:22px;font-style:normal;font-weight:400;line-height:28px}`]}}]}}),o.oi)}};
//# sourceMappingURL=50437.53dba7719d4ab991.js.map